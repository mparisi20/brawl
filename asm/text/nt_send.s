.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global NtSend$7create
NtSend$7create:
/* 8013D490 00133210  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013D494 00133214  7C 08 02 A6 */	mflr r0
/* 8013D498 00133218  38 80 03 00 */	li r4, 0x300
/* 8013D49C 0013321C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013D4A0 00133220  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013D4A4 00133224  7C 7F 1B 78 */	mr r31, r3
/* 8013D4A8 00133228  90 6D BF 68 */	stw r3, lbl_805A0388-_SDA_BASE_(r13)
/* 8013D4AC 0013322C  38 60 00 06 */	li r3, 6
/* 8013D4B0 00133230  4B EE 75 35 */	bl gfHeapManager$7alloc
/* 8013D4B4 00133234  90 7F 00 20 */	stw r3, 0x20(r31)
/* 8013D4B8 00133238  38 7F 00 40 */	addi r3, r31, 0x40
/* 8013D4BC 0013323C  38 80 03 84 */	li r4, 0x384
/* 8013D4C0 00133240  38 A0 00 06 */	li r5, 6
/* 8013D4C4 00133244  81 9F 00 40 */	lwz r12, 0x40(r31)
/* 8013D4C8 00133248  81 8C 00 0C */	lwz r12, 0xc(r12)
/* 8013D4CC 0013324C  7D 89 03 A6 */	mtctr r12
/* 8013D4D0 00133250  4E 80 04 21 */	bctrl 
/* 8013D4D4 00133254  81 9F 00 24 */	lwz r12, 0x24(r31)
/* 8013D4D8 00133258  3C 80 00 01 */	lis r4, 0x0000E100@ha
/* 8013D4DC 0013325C  38 7F 00 24 */	addi r3, r31, 0x24
/* 8013D4E0 00133260  38 A0 00 06 */	li r5, 6
/* 8013D4E4 00133264  81 8C 00 0C */	lwz r12, 0xc(r12)
/* 8013D4E8 00133268  38 84 E1 00 */	addi r4, r4, 0x0000E100@l
/* 8013D4EC 0013326C  7D 89 03 A6 */	mtctr r12
/* 8013D4F0 00133270  4E 80 04 21 */	bctrl 
/* 8013D4F4 00133274  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D4F8 00133278  38 80 00 00 */	li r4, 0
/* 8013D4FC 0013327C  38 A0 00 04 */	li r5, 4
/* 8013D500 00133280  4B EC 6F 3D */	bl func_8000443C
/* 8013D504 00133284  38 00 00 04 */	li r0, 4
/* 8013D508 00133288  80 BF 00 20 */	lwz r5, 0x20(r31)
/* 8013D50C 0013328C  38 80 00 00 */	li r4, 0
/* 8013D510 00133290  7C 09 03 A6 */	mtctr r0
lbl_8013D514:
/* 8013D514 00133294  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D518 00133298  7C 00 22 14 */	add r0, r0, r4
/* 8013D51C 0013329C  90 05 00 08 */	stw r0, 8(r5)
/* 8013D520 001332A0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D524 001332A4  7C 64 02 14 */	add r3, r4, r0
/* 8013D528 001332A8  38 03 03 84 */	addi r0, r3, 0x384
/* 8013D52C 001332AC  90 05 00 14 */	stw r0, 0x14(r5)
/* 8013D530 001332B0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D534 001332B4  7C 64 02 14 */	add r3, r4, r0
/* 8013D538 001332B8  38 03 07 08 */	addi r0, r3, 0x708
/* 8013D53C 001332BC  90 05 00 20 */	stw r0, 0x20(r5)
/* 8013D540 001332C0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D544 001332C4  7C 64 02 14 */	add r3, r4, r0
/* 8013D548 001332C8  38 03 0A 8C */	addi r0, r3, 0xa8c
/* 8013D54C 001332CC  90 05 00 2C */	stw r0, 0x2c(r5)
/* 8013D550 001332D0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D554 001332D4  7C 64 02 14 */	add r3, r4, r0
/* 8013D558 001332D8  38 03 0E 10 */	addi r0, r3, 0xe10
/* 8013D55C 001332DC  90 05 00 38 */	stw r0, 0x38(r5)
/* 8013D560 001332E0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D564 001332E4  7C 64 02 14 */	add r3, r4, r0
/* 8013D568 001332E8  38 03 11 94 */	addi r0, r3, 0x1194
/* 8013D56C 001332EC  90 05 00 44 */	stw r0, 0x44(r5)
/* 8013D570 001332F0  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D574 001332F4  7C 64 02 14 */	add r3, r4, r0
/* 8013D578 001332F8  38 03 15 18 */	addi r0, r3, 0x1518
/* 8013D57C 001332FC  90 05 00 50 */	stw r0, 0x50(r5)
/* 8013D580 00133300  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D584 00133304  7C 64 02 14 */	add r3, r4, r0
/* 8013D588 00133308  38 84 1C 20 */	addi r4, r4, 0x1c20
/* 8013D58C 0013330C  38 03 18 9C */	addi r0, r3, 0x189c
/* 8013D590 00133310  90 05 00 5C */	stw r0, 0x5c(r5)
/* 8013D594 00133314  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D598 00133318  7C 00 22 14 */	add r0, r0, r4
/* 8013D59C 0013331C  90 05 00 68 */	stw r0, 0x68(r5)
/* 8013D5A0 00133320  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5A4 00133324  7C 64 02 14 */	add r3, r4, r0
/* 8013D5A8 00133328  38 03 03 84 */	addi r0, r3, 0x384
/* 8013D5AC 0013332C  90 05 00 74 */	stw r0, 0x74(r5)
/* 8013D5B0 00133330  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5B4 00133334  7C 64 02 14 */	add r3, r4, r0
/* 8013D5B8 00133338  38 03 07 08 */	addi r0, r3, 0x708
/* 8013D5BC 0013333C  90 05 00 80 */	stw r0, 0x80(r5)
/* 8013D5C0 00133340  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5C4 00133344  7C 64 02 14 */	add r3, r4, r0
/* 8013D5C8 00133348  38 03 0A 8C */	addi r0, r3, 0xa8c
/* 8013D5CC 0013334C  90 05 00 8C */	stw r0, 0x8c(r5)
/* 8013D5D0 00133350  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5D4 00133354  7C 64 02 14 */	add r3, r4, r0
/* 8013D5D8 00133358  38 03 0E 10 */	addi r0, r3, 0xe10
/* 8013D5DC 0013335C  90 05 00 98 */	stw r0, 0x98(r5)
/* 8013D5E0 00133360  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5E4 00133364  7C 64 02 14 */	add r3, r4, r0
/* 8013D5E8 00133368  38 03 11 94 */	addi r0, r3, 0x1194
/* 8013D5EC 0013336C  90 05 00 A4 */	stw r0, 0xa4(r5)
/* 8013D5F0 00133370  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D5F4 00133374  7C 64 02 14 */	add r3, r4, r0
/* 8013D5F8 00133378  38 03 15 18 */	addi r0, r3, 0x1518
/* 8013D5FC 0013337C  90 05 00 B0 */	stw r0, 0xb0(r5)
/* 8013D600 00133380  80 1F 00 34 */	lwz r0, 0x34(r31)
/* 8013D604 00133384  7C 64 02 14 */	add r3, r4, r0
/* 8013D608 00133388  38 84 1C 20 */	addi r4, r4, 0x1c20
/* 8013D60C 0013338C  38 03 18 9C */	addi r0, r3, 0x189c
/* 8013D610 00133390  90 05 00 BC */	stw r0, 0xbc(r5)
/* 8013D614 00133394  38 A5 00 C0 */	addi r5, r5, 0xc0
/* 8013D618 00133398  42 00 FE FC */	bdnz lbl_8013D514
/* 8013D61C 0013339C  38 00 00 00 */	li r0, 0
/* 8013D620 001333A0  7F E3 FB 78 */	mr r3, r31
/* 8013D624 001333A4  90 1F 00 3C */	stw r0, 0x3c(r31)
/* 8013D628 001333A8  90 1F 00 38 */	stw r0, 0x38(r31)
/* 8013D62C 001333AC  48 0A 15 51 */	bl OSInitMutex
/* 8013D630 001333B0  38 7F 00 18 */	addi r3, r31, 0x18
/* 8013D634 001333B4  48 0A 18 4D */	bl OSInitCond
/* 8013D638 001333B8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013D63C 001333BC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013D640 001333C0  7C 08 03 A6 */	mtlr r0
/* 8013D644 001333C4  38 21 00 10 */	addi r1, r1, 0x10
/* 8013D648 001333C8  4E 80 00 20 */	blr 

.global NtSend$7destroy
NtSend$7destroy:
/* 8013D64C 001333CC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013D650 001333D0  7C 08 02 A6 */	mflr r0
/* 8013D654 001333D4  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013D658 001333D8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013D65C 001333DC  7C 7F 1B 78 */	mr r31, r3
/* 8013D660 001333E0  81 83 00 40 */	lwz r12, 0x40(r3)
/* 8013D664 001333E4  81 8C 00 10 */	lwz r12, 0x10(r12)
/* 8013D668 001333E8  7D 89 03 A6 */	mtctr r12
/* 8013D66C 001333EC  38 63 00 40 */	addi r3, r3, 0x40
/* 8013D670 001333F0  4E 80 04 21 */	bctrl 
/* 8013D674 001333F4  81 9F 00 24 */	lwz r12, 0x24(r31)
/* 8013D678 001333F8  38 7F 00 24 */	addi r3, r31, 0x24
/* 8013D67C 001333FC  81 8C 00 10 */	lwz r12, 0x10(r12)
/* 8013D680 00133400  7D 89 03 A6 */	mtctr r12
/* 8013D684 00133404  4E 80 04 21 */	bctrl 
/* 8013D688 00133408  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D68C 0013340C  4B EE 73 C1 */	bl gfHeapManager$7free
/* 8013D690 00133410  38 00 00 00 */	li r0, 0
/* 8013D694 00133414  90 1F 00 20 */	stw r0, 0x20(r31)
/* 8013D698 00133418  90 0D BF 68 */	stw r0, lbl_805A0388-_SDA_BASE_(r13)
/* 8013D69C 0013341C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013D6A0 00133420  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013D6A4 00133424  7C 08 03 A6 */	mtlr r0
/* 8013D6A8 00133428  38 21 00 10 */	addi r1, r1, 0x10
/* 8013D6AC 0013342C  4E 80 00 20 */	blr 

.global NtSend$7clearSendBuffer
NtSend$7clearSendBuffer:
/* 8013D6B0 00133430  38 00 00 00 */	li r0, 0
/* 8013D6B4 00133434  90 03 00 3C */	stw r0, 0x3c(r3)
/* 8013D6B8 00133438  90 03 00 38 */	stw r0, 0x38(r3)
/* 8013D6BC 0013343C  4E 80 00 20 */	blr 

.global NtSend$7pushback
NtSend$7pushback:
/* 8013D6C0 00133440  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8013D6C4 00133444  7C 08 02 A6 */	mflr r0
/* 8013D6C8 00133448  90 01 00 24 */	stw r0, 0x24(r1)
/* 8013D6CC 0013344C  38 00 00 01 */	li r0, 1
/* 8013D6D0 00133450  7C 00 20 30 */	slw r0, r0, r4
/* 8013D6D4 00133454  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8013D6D8 00133458  7C 7F 1B 78 */	mr r31, r3
/* 8013D6DC 0013345C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8013D6E0 00133460  7C DE 33 78 */	mr r30, r6
/* 8013D6E4 00133464  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8013D6E8 00133468  7C BD 2B 78 */	mr r29, r5
/* 8013D6EC 0013346C  93 81 00 10 */	stw r28, 0x10(r1)
/* 8013D6F0 00133470  7C 9C 23 78 */	mr r28, r4
/* 8013D6F4 00133474  80 ED BF EC */	lwz r7, lbl_805A040C-_SDA_BASE_(r13)
/* 8013D6F8 00133478  7C E0 00 39 */	and. r0, r7, r0
/* 8013D6FC 0013347C  40 82 00 0C */	bne lbl_8013D708
/* 8013D700 00133480  38 60 00 00 */	li r3, 0
/* 8013D704 00133484  48 00 00 A8 */	b lbl_8013D7AC
lbl_8013D708:
/* 8013D708 00133488  28 04 00 04 */	cmplwi r4, 4
/* 8013D70C 0013348C  41 80 00 0C */	blt lbl_8013D718
/* 8013D710 00133490  38 60 FF FF */	li r3, -1
/* 8013D714 00133494  48 00 00 98 */	b lbl_8013D7AC
lbl_8013D718:
/* 8013D718 00133498  2C 06 03 7E */	cmpwi r6, 0x37e
/* 8013D71C 0013349C  40 81 00 14 */	ble lbl_8013D730
/* 8013D720 001334A0  3C 60 80 46 */	lis r3, lbl_8045E000@ha
/* 8013D724 001334A4  38 63 E0 00 */	addi r3, r3, lbl_8045E000@l
/* 8013D728 001334A8  4C C6 31 82 */	crclr 6
/* 8013D72C 001334AC  4B F8 9D C1 */	bl netReport
lbl_8013D730:
/* 8013D730 001334B0  80 8D BF 68 */	lwz r4, lbl_805A0388-_SDA_BASE_(r13)
/* 8013D734 001334B4  80 64 00 38 */	lwz r3, 0x38(r4)
/* 8013D738 001334B8  80 04 00 3C */	lwz r0, 0x3c(r4)
/* 8013D73C 001334BC  7C 03 00 50 */	subf r0, r3, r0
/* 8013D740 001334C0  54 00 06 BE */	clrlwi r0, r0, 0x1a
/* 8013D744 001334C4  2C 00 00 3E */	cmpwi r0, 0x3e
/* 8013D748 001334C8  41 80 00 0C */	blt lbl_8013D754
/* 8013D74C 001334CC  38 60 FF FF */	li r3, -1
/* 8013D750 001334D0  48 00 00 5C */	b lbl_8013D7AC
lbl_8013D754:
/* 8013D754 001334D4  80 1F 00 3C */	lwz r0, 0x3c(r31)
/* 8013D758 001334D8  7F A4 EB 78 */	mr r4, r29
/* 8013D75C 001334DC  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D760 001334E0  7F C5 F3 78 */	mr r5, r30
/* 8013D764 001334E4  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8013D768 001334E8  7F 83 01 AE */	stbx r28, r3, r0
/* 8013D76C 001334EC  80 1F 00 3C */	lwz r0, 0x3c(r31)
/* 8013D770 001334F0  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D774 001334F4  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8013D778 001334F8  7C 63 02 14 */	add r3, r3, r0
/* 8013D77C 001334FC  93 C3 00 04 */	stw r30, 4(r3)
/* 8013D780 00133500  80 1F 00 3C */	lwz r0, 0x3c(r31)
/* 8013D784 00133504  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D788 00133508  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8013D78C 0013350C  7C 63 02 14 */	add r3, r3, r0
/* 8013D790 00133510  80 63 00 08 */	lwz r3, 8(r3)
/* 8013D794 00133514  4B EC 6B A5 */	bl func_80004338
/* 8013D798 00133518  80 9F 00 3C */	lwz r4, 0x3c(r31)
/* 8013D79C 0013351C  38 60 00 00 */	li r3, 0
/* 8013D7A0 00133520  38 04 00 01 */	addi r0, r4, 1
/* 8013D7A4 00133524  54 00 06 BE */	clrlwi r0, r0, 0x1a
/* 8013D7A8 00133528  90 1F 00 3C */	stw r0, 0x3c(r31)
lbl_8013D7AC:
/* 8013D7AC 0013352C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8013D7B0 00133530  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8013D7B4 00133534  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8013D7B8 00133538  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8013D7BC 0013353C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8013D7C0 00133540  7C 08 03 A6 */	mtlr r0
/* 8013D7C4 00133544  38 21 00 20 */	addi r1, r1, 0x20
/* 8013D7C8 00133548  4E 80 00 20 */	blr 

.global NtSend$7task
NtSend$7task:
/* 8013D7CC 0013354C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8013D7D0 00133550  7C 08 02 A6 */	mflr r0
/* 8013D7D4 00133554  90 01 00 24 */	stw r0, 0x24(r1)
/* 8013D7D8 00133558  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8013D7DC 0013355C  7C 7F 1B 78 */	mr r31, r3
/* 8013D7E0 00133560  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8013D7E4 00133564  3B C0 00 01 */	li r30, 1
/* 8013D7E8 00133568  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8013D7EC 0013356C  93 81 00 10 */	stw r28, 0x10(r1)
/* 8013D7F0 00133570  48 00 00 88 */	b lbl_8013D878
lbl_8013D7F4:
/* 8013D7F4 00133574  80 7F 00 38 */	lwz r3, 0x38(r31)
/* 8013D7F8 00133578  80 1F 00 38 */	lwz r0, 0x38(r31)
/* 8013D7FC 0013357C  1C 63 00 0C */	mulli r3, r3, 0xc
/* 8013D800 00133580  80 9F 00 20 */	lwz r4, 0x20(r31)
/* 8013D804 00133584  7C 64 1A 14 */	add r3, r4, r3
/* 8013D808 00133588  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8013D80C 0013358C  83 A3 00 08 */	lwz r29, 8(r3)
/* 8013D810 00133590  7C 64 02 14 */	add r3, r4, r0
/* 8013D814 00133594  83 83 00 04 */	lwz r28, 4(r3)
/* 8013D818 00133598  48 0A 43 35 */	bl OSGetTick
/* 8013D81C 0013359C  54 60 46 3E */	srwi r0, r3, 0x18
/* 8013D820 001335A0  7C BD E2 14 */	add r5, r29, r28
/* 8013D824 001335A4  7C 1D E1 AE */	stbx r0, r29, r28
/* 8013D828 001335A8  54 64 86 3E */	rlwinm r4, r3, 0x10, 0x18, 0x1f
/* 8013D82C 001335AC  54 60 C6 3E */	rlwinm r0, r3, 0x18, 0x18, 0x1f
/* 8013D830 001335B0  98 85 00 01 */	stb r4, 1(r5)
/* 8013D834 001335B4  98 05 00 02 */	stb r0, 2(r5)
/* 8013D838 001335B8  98 65 00 03 */	stb r3, 3(r5)
/* 8013D83C 001335BC  80 1F 00 38 */	lwz r0, 0x38(r31)
/* 8013D840 001335C0  80 7F 00 20 */	lwz r3, 0x20(r31)
/* 8013D844 001335C4  1C 00 00 0C */	mulli r0, r0, 0xc
/* 8013D848 001335C8  80 8D BF EC */	lwz r4, lbl_805A040C-_SDA_BASE_(r13)
/* 8013D84C 001335CC  7C 63 00 AE */	lbzx r3, r3, r0
/* 8013D850 001335D0  7F C0 18 30 */	slw r0, r30, r3
/* 8013D854 001335D4  7C 80 00 39 */	and. r0, r4, r0
/* 8013D858 001335D8  41 82 00 10 */	beq lbl_8013D868
/* 8013D85C 001335DC  7F A4 EB 78 */	mr r4, r29
/* 8013D860 001335E0  38 BC 00 04 */	addi r5, r28, 4
/* 8013D864 001335E4  48 21 0B B5 */	bl DWC_SendUnreliable
lbl_8013D868:
/* 8013D868 001335E8  80 7F 00 38 */	lwz r3, 0x38(r31)
/* 8013D86C 001335EC  38 03 00 01 */	addi r0, r3, 1
/* 8013D870 001335F0  54 00 06 BE */	clrlwi r0, r0, 0x1a
/* 8013D874 001335F4  90 1F 00 38 */	stw r0, 0x38(r31)
lbl_8013D878:
/* 8013D878 001335F8  80 7F 00 38 */	lwz r3, 0x38(r31)
/* 8013D87C 001335FC  80 1F 00 3C */	lwz r0, 0x3c(r31)
/* 8013D880 00133600  7C 03 00 00 */	cmpw r3, r0
/* 8013D884 00133604  40 82 FF 70 */	bne lbl_8013D7F4
/* 8013D888 00133608  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8013D88C 0013360C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8013D890 00133610  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8013D894 00133614  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8013D898 00133618  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8013D89C 0013361C  7C 08 03 A6 */	mtlr r0
/* 8013D8A0 00133620  38 21 00 20 */	addi r1, r1, 0x20
/* 8013D8A4 00133624  4E 80 00 20 */	blr 

