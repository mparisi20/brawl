.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global GetSizeTHPReadWork
GetSizeTHPReadWork:
/* 8007E0EC 00073E6C  38 60 13 C8 */	li r3, 0x13c8
/* 8007E0F0 00073E70  4E 80 00 20 */	blr 

.global SetTHPReadWork
SetTHPReadWork:
/* 8007E0F4 00073E74  80 0D BD E0 */	lwz r0, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E0F8 00073E78  2C 00 00 00 */	cmpwi r0, 0
/* 8007E0FC 00073E7C  4C 82 00 20 */	bnelr 
/* 8007E100 00073E80  90 6D BD E0 */	stw r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E104 00073E84  38 00 00 00 */	li r0, 0
/* 8007E108 00073E88  90 03 00 00 */	stw r0, 0(r3)
/* 8007E10C 00073E8C  4E 80 00 20 */	blr 

.global FreeTHPReadWork
FreeTHPReadWork:
/* 8007E110 00073E90  38 00 00 00 */	li r0, 0
/* 8007E114 00073E94  90 0D BD E0 */	stw r0, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E118 00073E98  4E 80 00 20 */	blr 

.global CreateReadThread
CreateReadThread:
/* 8007E11C 00073E9C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8007E120 00073EA0  7C 08 02 A6 */	mflr r0
/* 8007E124 00073EA4  3C 80 80 08 */	lis r4, Reader@ha
/* 8007E128 00073EA8  7C 68 1B 78 */	mr r8, r3
/* 8007E12C 00073EAC  90 01 00 14 */	stw r0, 0x14(r1)
/* 8007E130 00073EB0  38 A0 00 00 */	li r5, 0
/* 8007E134 00073EB4  38 84 E2 18 */	addi r4, r4, Reader@l
/* 8007E138 00073EB8  38 E0 10 00 */	li r7, 0x1000
/* 8007E13C 00073EBC  80 CD BD E0 */	lwz r6, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E140 00073EC0  39 20 00 01 */	li r9, 1
/* 8007E144 00073EC4  38 66 00 B0 */	addi r3, r6, 0xb0
/* 8007E148 00073EC8  38 C6 13 C8 */	addi r6, r6, 0x13c8
/* 8007E14C 00073ECC  48 16 2B B1 */	bl OSCreateThread
/* 8007E150 00073ED0  2C 03 00 00 */	cmpwi r3, 0
/* 8007E154 00073ED4  40 82 00 0C */	bne lbl_8007E160
/* 8007E158 00073ED8  38 60 00 00 */	li r3, 0
/* 8007E15C 00073EDC  48 00 00 50 */	b lbl_8007E1AC
lbl_8007E160:
/* 8007E160 00073EE0  80 8D BD E0 */	lwz r4, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E164 00073EE4  38 A0 00 06 */	li r5, 6
/* 8007E168 00073EE8  38 64 00 04 */	addi r3, r4, 4
/* 8007E16C 00073EEC  38 84 00 64 */	addi r4, r4, 0x64
/* 8007E170 00073EF0  48 15 FF 25 */	bl OSInitMessageQueue
/* 8007E174 00073EF4  80 8D BD E0 */	lwz r4, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E178 00073EF8  38 A0 00 06 */	li r5, 6
/* 8007E17C 00073EFC  38 64 00 24 */	addi r3, r4, 0x24
/* 8007E180 00073F00  38 84 00 7C */	addi r4, r4, 0x7c
/* 8007E184 00073F04  48 15 FF 11 */	bl OSInitMessageQueue
/* 8007E188 00073F08  80 8D BD E0 */	lwz r4, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E18C 00073F0C  38 A0 00 06 */	li r5, 6
/* 8007E190 00073F10  38 64 00 44 */	addi r3, r4, 0x44
/* 8007E194 00073F14  38 84 00 94 */	addi r4, r4, 0x94
/* 8007E198 00073F18  48 15 FE FD */	bl OSInitMessageQueue
/* 8007E19C 00073F1C  80 8D BD E0 */	lwz r4, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E1A0 00073F20  38 00 00 01 */	li r0, 1
/* 8007E1A4 00073F24  38 60 00 01 */	li r3, 1
/* 8007E1A8 00073F28  90 04 00 00 */	stw r0, 0(r4)
lbl_8007E1AC:
/* 8007E1AC 00073F2C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8007E1B0 00073F30  7C 08 03 A6 */	mtlr r0
/* 8007E1B4 00073F34  38 21 00 10 */	addi r1, r1, 0x10
/* 8007E1B8 00073F38  4E 80 00 20 */	blr 

.global ReadThreadStart
ReadThreadStart:
/* 8007E1BC 00073F3C  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E1C0 00073F40  80 03 00 00 */	lwz r0, 0(r3)
/* 8007E1C4 00073F44  2C 00 00 00 */	cmpwi r0, 0
/* 8007E1C8 00073F48  4D 82 00 20 */	beqlr 
/* 8007E1CC 00073F4C  38 63 00 B0 */	addi r3, r3, 0xb0
/* 8007E1D0 00073F50  48 16 31 94 */	b OSResumeThread
/* 8007E1D4 00073F54  4E 80 00 20 */	blr 

.global ReadThreadCancel
ReadThreadCancel:
/* 8007E1D8 00073F58  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8007E1DC 00073F5C  7C 08 02 A6 */	mflr r0
/* 8007E1E0 00073F60  90 01 00 14 */	stw r0, 0x14(r1)
/* 8007E1E4 00073F64  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E1E8 00073F68  80 03 00 00 */	lwz r0, 0(r3)
/* 8007E1EC 00073F6C  2C 00 00 00 */	cmpwi r0, 0
/* 8007E1F0 00073F70  41 82 00 18 */	beq lbl_8007E208
/* 8007E1F4 00073F74  38 63 00 B0 */	addi r3, r3, 0xb0
/* 8007E1F8 00073F78  48 16 2E 55 */	bl OSCancelThread
/* 8007E1FC 00073F7C  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E200 00073F80  38 00 00 00 */	li r0, 0
/* 8007E204 00073F84  90 03 00 00 */	stw r0, 0(r3)
lbl_8007E208:
/* 8007E208 00073F88  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8007E20C 00073F8C  7C 08 03 A6 */	mtlr r0
/* 8007E210 00073F90  38 21 00 10 */	addi r1, r1, 0x10
/* 8007E214 00073F94  4E 80 00 20 */	blr 

.global Reader
Reader:
/* 8007E218 00073F98  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8007E21C 00073F9C  7C 08 02 A6 */	mflr r0
/* 8007E220 00073FA0  90 01 00 34 */	stw r0, 0x34(r1)
/* 8007E224 00073FA4  39 61 00 30 */	addi r11, r1, 0x30
/* 8007E228 00073FA8  48 37 30 F1 */	bl _savegpr_25
/* 8007E22C 00073FAC  3F A0 80 4A */	lis r29, lbl_8049DC00@ha
/* 8007E230 00073FB0  3B 40 00 00 */	li r26, 0
/* 8007E234 00073FB4  3B DD DC 00 */	addi r30, r29, lbl_8049DC00@l
/* 8007E238 00073FB8  3B E0 FF FF */	li r31, -1
/* 8007E23C 00073FBC  83 9E 00 B8 */	lwz r28, 0xb8(r30)
/* 8007E240 00073FC0  83 7E 00 BC */	lwz r27, 0xbc(r30)
lbl_8007E244:
/* 8007E244 00073FC4  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E248 00073FC8  38 81 00 08 */	addi r4, r1, 8
/* 8007E24C 00073FCC  38 A0 00 01 */	li r5, 1
/* 8007E250 00073FD0  38 63 00 04 */	addi r3, r3, 4
/* 8007E254 00073FD4  48 15 FF 69 */	bl OSReceiveMessage
/* 8007E258 00073FD8  83 21 00 08 */	lwz r25, 8(r1)
/* 8007E25C 00073FDC  7F 65 DB 78 */	mr r5, r27
/* 8007E260 00073FE0  7F 86 E3 78 */	mr r6, r28
/* 8007E264 00073FE4  38 7D DC 00 */	addi r3, r29, -9216
/* 8007E268 00073FE8  80 99 00 00 */	lwz r4, 0(r25)
/* 8007E26C 00073FEC  38 E0 00 02 */	li r7, 2
/* 8007E270 00073FF0  48 17 85 81 */	bl DVDReadPrio
/* 8007E274 00073FF4  7C 03 D8 00 */	cmpw r3, r27
/* 8007E278 00073FF8  41 82 00 2C */	beq lbl_8007E2A4
/* 8007E27C 00073FFC  2C 03 FF FF */	cmpwi r3, -1
/* 8007E280 00074000  40 82 00 08 */	bne lbl_8007E288
/* 8007E284 00074004  93 FE 00 A8 */	stw r31, 0xa8(r30)
lbl_8007E288:
/* 8007E288 00074008  2C 1A 00 00 */	cmpwi r26, 0
/* 8007E28C 0007400C  40 82 00 0C */	bne lbl_8007E298
/* 8007E290 00074010  38 60 00 00 */	li r3, 0
/* 8007E294 00074014  4B FF E3 75 */	bl PrepareReady
lbl_8007E298:
/* 8007E298 00074018  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E29C 0007401C  38 63 00 B0 */	addi r3, r3, 0xb0
/* 8007E2A0 00074020  48 16 33 5D */	bl OSSuspendThread
lbl_8007E2A4:
/* 8007E2A4 00074024  93 59 00 04 */	stw r26, 4(r25)
/* 8007E2A8 00074028  7F 24 CB 78 */	mr r4, r25
/* 8007E2AC 0007402C  38 A0 00 01 */	li r5, 1
/* 8007E2B0 00074030  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E2B4 00074034  38 63 00 24 */	addi r3, r3, 0x24
/* 8007E2B8 00074038  48 15 FE 3D */	bl OSSendMessage
/* 8007E2BC 0007403C  80 1E 00 C0 */	lwz r0, 0xc0(r30)
/* 8007E2C0 00074040  7F 9C DA 14 */	add r28, r28, r27
/* 8007E2C4 00074044  80 DE 00 50 */	lwz r6, 0x50(r30)
/* 8007E2C8 00074048  7C 9A 02 14 */	add r4, r26, r0
/* 8007E2CC 0007404C  80 B9 00 00 */	lwz r5, 0(r25)
/* 8007E2D0 00074050  7C 64 33 96 */	divwu r3, r4, r6
/* 8007E2D4 00074054  38 06 FF FF */	addi r0, r6, -1
/* 8007E2D8 00074058  83 65 00 00 */	lwz r27, 0(r5)
/* 8007E2DC 0007405C  7C 63 31 D6 */	mullw r3, r3, r6
/* 8007E2E0 00074060  7C 63 20 50 */	subf r3, r3, r4
/* 8007E2E4 00074064  7C 03 00 40 */	cmplw r3, r0
/* 8007E2E8 00074068  40 82 00 24 */	bne lbl_8007E30C
/* 8007E2EC 0007406C  88 1E 00 A6 */	lbz r0, 0xa6(r30)
/* 8007E2F0 00074070  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8007E2F4 00074074  41 82 00 0C */	beq lbl_8007E300
/* 8007E2F8 00074078  83 9E 00 64 */	lwz r28, 0x64(r30)
/* 8007E2FC 0007407C  48 00 00 10 */	b lbl_8007E30C
lbl_8007E300:
/* 8007E300 00074080  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E304 00074084  38 63 00 B0 */	addi r3, r3, 0xb0
/* 8007E308 00074088  48 16 32 F5 */	bl OSSuspendThread
lbl_8007E30C:
/* 8007E30C 0007408C  3B 5A 00 01 */	addi r26, r26, 1
/* 8007E310 00074090  4B FF FF 34 */	b lbl_8007E244

.global PopReadedBuffer
PopReadedBuffer:
/* 8007E314 00074094  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8007E318 00074098  7C 08 02 A6 */	mflr r0
/* 8007E31C 0007409C  38 A0 00 01 */	li r5, 1
/* 8007E320 000740A0  90 01 00 14 */	stw r0, 0x14(r1)
/* 8007E324 000740A4  38 81 00 08 */	addi r4, r1, 8
/* 8007E328 000740A8  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E32C 000740AC  38 63 00 24 */	addi r3, r3, 0x24
/* 8007E330 000740B0  48 15 FE 8D */	bl OSReceiveMessage
/* 8007E334 000740B4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8007E338 000740B8  80 61 00 08 */	lwz r3, 8(r1)
/* 8007E33C 000740BC  7C 08 03 A6 */	mtlr r0
/* 8007E340 000740C0  38 21 00 10 */	addi r1, r1, 0x10
/* 8007E344 000740C4  4E 80 00 20 */	blr 

.global PushFreeReadBuffer
PushFreeReadBuffer:
/* 8007E348 000740C8  80 CD BD E0 */	lwz r6, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E34C 000740CC  7C 64 1B 78 */	mr r4, r3
/* 8007E350 000740D0  38 A0 00 01 */	li r5, 1
/* 8007E354 000740D4  38 66 00 04 */	addi r3, r6, 4
/* 8007E358 000740D8  48 15 FD 9C */	b OSSendMessage

.global PopReadedBuffer2
PopReadedBuffer2:
/* 8007E35C 000740DC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8007E360 000740E0  7C 08 02 A6 */	mflr r0
/* 8007E364 000740E4  38 A0 00 01 */	li r5, 1
/* 8007E368 000740E8  90 01 00 14 */	stw r0, 0x14(r1)
/* 8007E36C 000740EC  38 81 00 08 */	addi r4, r1, 8
/* 8007E370 000740F0  80 6D BD E0 */	lwz r3, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E374 000740F4  38 63 00 44 */	addi r3, r3, 0x44
/* 8007E378 000740F8  48 15 FE 45 */	bl OSReceiveMessage
/* 8007E37C 000740FC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8007E380 00074100  80 61 00 08 */	lwz r3, 8(r1)
/* 8007E384 00074104  7C 08 03 A6 */	mtlr r0
/* 8007E388 00074108  38 21 00 10 */	addi r1, r1, 0x10
/* 8007E38C 0007410C  4E 80 00 20 */	blr 

.global PushReadedBuffer2
PushReadedBuffer2:
/* 8007E390 00074110  80 CD BD E0 */	lwz r6, lbl_805A0200-_SDA_BASE_(r13)
/* 8007E394 00074114  7C 64 1B 78 */	mr r4, r3
/* 8007E398 00074118  38 A0 00 01 */	li r5, 1
/* 8007E39C 0007411C  38 66 00 44 */	addi r3, r6, 0x44
/* 8007E3A0 00074120  48 15 FD 54 */	b OSSendMessage

