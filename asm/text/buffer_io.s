.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global __prep_buffer
__prep_buffer:
/* 803F5070 003EADF0  80 83 00 18 */	lwz r4, 0x18(r3)
/* 803F5074 003EADF4  80 03 00 2C */	lwz r0, 0x2c(r3)
/* 803F5078 003EADF8  80 C3 00 1C */	lwz r6, 0x1c(r3)
/* 803F507C 003EADFC  80 A3 00 20 */	lwz r5, 0x20(r3)
/* 803F5080 003EAE00  7C 80 00 38 */	and r0, r4, r0
/* 803F5084 003EAE04  90 C3 00 24 */	stw r6, 0x24(r3)
/* 803F5088 003EAE08  7C 00 28 50 */	subf r0, r0, r5
/* 803F508C 003EAE0C  90 03 00 28 */	stw r0, 0x28(r3)
/* 803F5090 003EAE10  90 83 00 34 */	stw r4, 0x34(r3)
/* 803F5094 003EAE14  4E 80 00 20 */	blr 

.global __load_buffer
__load_buffer:
/* 803F5098 003EAE18  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803F509C 003EAE1C  7C 08 02 A6 */	mflr r0
/* 803F50A0 003EAE20  2C 05 00 01 */	cmpwi r5, 1
/* 803F50A4 003EAE24  90 01 00 14 */	stw r0, 0x14(r1)
/* 803F50A8 003EAE28  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803F50AC 003EAE2C  7C 7F 1B 78 */	mr r31, r3
/* 803F50B0 003EAE30  93 C1 00 08 */	stw r30, 8(r1)
/* 803F50B4 003EAE34  7C 9E 23 78 */	mr r30, r4
/* 803F50B8 003EAE38  80 C3 00 18 */	lwz r6, 0x18(r3)
/* 803F50BC 003EAE3C  80 03 00 2C */	lwz r0, 0x2c(r3)
/* 803F50C0 003EAE40  80 A3 00 1C */	lwz r5, 0x1c(r3)
/* 803F50C4 003EAE44  80 83 00 20 */	lwz r4, 0x20(r3)
/* 803F50C8 003EAE48  7C C0 00 38 */	and r0, r6, r0
/* 803F50CC 003EAE4C  90 A3 00 24 */	stw r5, 0x24(r3)
/* 803F50D0 003EAE50  7C 00 20 50 */	subf r0, r0, r4
/* 803F50D4 003EAE54  90 03 00 28 */	stw r0, 0x28(r3)
/* 803F50D8 003EAE58  90 C3 00 34 */	stw r6, 0x34(r3)
/* 803F50DC 003EAE5C  40 82 00 08 */	bne lbl_803F50E4
/* 803F50E0 003EAE60  90 83 00 28 */	stw r4, 0x28(r3)
lbl_803F50E4:
/* 803F50E4 003EAE64  81 9F 00 3C */	lwz r12, 0x3c(r31)
/* 803F50E8 003EAE68  38 BF 00 28 */	addi r5, r31, 0x28
/* 803F50EC 003EAE6C  80 63 00 00 */	lwz r3, 0(r3)
/* 803F50F0 003EAE70  80 9F 00 1C */	lwz r4, 0x1c(r31)
/* 803F50F4 003EAE74  80 DF 00 48 */	lwz r6, 0x48(r31)
/* 803F50F8 003EAE78  7D 89 03 A6 */	mtctr r12
/* 803F50FC 003EAE7C  4E 80 04 21 */	bctrl 
/* 803F5100 003EAE80  2C 03 00 02 */	cmpwi r3, 2
/* 803F5104 003EAE84  40 82 00 0C */	bne lbl_803F5110
/* 803F5108 003EAE88  38 00 00 00 */	li r0, 0
/* 803F510C 003EAE8C  90 1F 00 28 */	stw r0, 0x28(r31)
lbl_803F5110:
/* 803F5110 003EAE90  2C 1E 00 00 */	cmpwi r30, 0
/* 803F5114 003EAE94  41 82 00 0C */	beq lbl_803F5120
/* 803F5118 003EAE98  80 1F 00 28 */	lwz r0, 0x28(r31)
/* 803F511C 003EAE9C  90 1E 00 00 */	stw r0, 0(r30)
lbl_803F5120:
/* 803F5120 003EAEA0  2C 03 00 00 */	cmpwi r3, 0
/* 803F5124 003EAEA4  41 82 00 08 */	beq lbl_803F512C
/* 803F5128 003EAEA8  48 00 00 54 */	b lbl_803F517C
lbl_803F512C:
/* 803F512C 003EAEAC  80 1F 00 04 */	lwz r0, 4(r31)
/* 803F5130 003EAEB0  80 9F 00 18 */	lwz r4, 0x18(r31)
/* 803F5134 003EAEB4  80 7F 00 28 */	lwz r3, 0x28(r31)
/* 803F5138 003EAEB8  54 00 6F FF */	rlwinm. r0, r0, 0xd, 0x1f, 0x1f
/* 803F513C 003EAEBC  7C 04 1A 14 */	add r0, r4, r3
/* 803F5140 003EAEC0  90 1F 00 18 */	stw r0, 0x18(r31)
/* 803F5144 003EAEC4  40 82 00 34 */	bne lbl_803F5178
/* 803F5148 003EAEC8  80 9F 00 1C */	lwz r4, 0x1c(r31)
/* 803F514C 003EAECC  7C 69 03 A6 */	mtctr r3
/* 803F5150 003EAED0  2C 03 00 00 */	cmpwi r3, 0
/* 803F5154 003EAED4  41 82 00 24 */	beq lbl_803F5178
lbl_803F5158:
/* 803F5158 003EAED8  88 04 00 00 */	lbz r0, 0(r4)
/* 803F515C 003EAEDC  38 84 00 01 */	addi r4, r4, 1
/* 803F5160 003EAEE0  28 00 00 0A */	cmplwi r0, 0xa
/* 803F5164 003EAEE4  40 82 00 10 */	bne lbl_803F5174
/* 803F5168 003EAEE8  80 7F 00 18 */	lwz r3, 0x18(r31)
/* 803F516C 003EAEEC  38 03 00 01 */	addi r0, r3, 1
/* 803F5170 003EAEF0  90 1F 00 18 */	stw r0, 0x18(r31)
lbl_803F5174:
/* 803F5174 003EAEF4  42 00 FF E4 */	bdnz lbl_803F5158
lbl_803F5178:
/* 803F5178 003EAEF8  38 60 00 00 */	li r3, 0
lbl_803F517C:
/* 803F517C 003EAEFC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803F5180 003EAF00  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803F5184 003EAF04  83 C1 00 08 */	lwz r30, 8(r1)
/* 803F5188 003EAF08  7C 08 03 A6 */	mtlr r0
/* 803F518C 003EAF0C  38 21 00 10 */	addi r1, r1, 0x10
/* 803F5190 003EAF10  4E 80 00 20 */	blr 

.global __flush_buffer
__flush_buffer:
/* 803F5194 003EAF14  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803F5198 003EAF18  7C 08 02 A6 */	mflr r0
/* 803F519C 003EAF1C  90 01 00 14 */	stw r0, 0x14(r1)
/* 803F51A0 003EAF20  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803F51A4 003EAF24  7C 9F 23 78 */	mr r31, r4
/* 803F51A8 003EAF28  93 C1 00 08 */	stw r30, 8(r1)
/* 803F51AC 003EAF2C  7C 7E 1B 78 */	mr r30, r3
/* 803F51B0 003EAF30  80 A3 00 1C */	lwz r5, 0x1c(r3)
/* 803F51B4 003EAF34  80 03 00 24 */	lwz r0, 0x24(r3)
/* 803F51B8 003EAF38  7C 05 00 51 */	subf. r0, r5, r0
/* 803F51BC 003EAF3C  41 82 00 50 */	beq lbl_803F520C
/* 803F51C0 003EAF40  81 9E 00 40 */	lwz r12, 0x40(r30)
/* 803F51C4 003EAF44  7C A4 2B 78 */	mr r4, r5
/* 803F51C8 003EAF48  90 03 00 28 */	stw r0, 0x28(r3)
/* 803F51CC 003EAF4C  38 BE 00 28 */	addi r5, r30, 0x28
/* 803F51D0 003EAF50  80 63 00 00 */	lwz r3, 0(r3)
/* 803F51D4 003EAF54  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 803F51D8 003EAF58  7D 89 03 A6 */	mtctr r12
/* 803F51DC 003EAF5C  4E 80 04 21 */	bctrl 
/* 803F51E0 003EAF60  2C 1F 00 00 */	cmpwi r31, 0
/* 803F51E4 003EAF64  41 82 00 0C */	beq lbl_803F51F0
/* 803F51E8 003EAF68  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 803F51EC 003EAF6C  90 1F 00 00 */	stw r0, 0(r31)
lbl_803F51F0:
/* 803F51F0 003EAF70  2C 03 00 00 */	cmpwi r3, 0
/* 803F51F4 003EAF74  41 82 00 08 */	beq lbl_803F51FC
/* 803F51F8 003EAF78  48 00 00 3C */	b lbl_803F5234
lbl_803F51FC:
/* 803F51FC 003EAF7C  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 803F5200 003EAF80  80 1E 00 28 */	lwz r0, 0x28(r30)
/* 803F5204 003EAF84  7C 03 02 14 */	add r0, r3, r0
/* 803F5208 003EAF88  90 1E 00 18 */	stw r0, 0x18(r30)
lbl_803F520C:
/* 803F520C 003EAF8C  80 9E 00 18 */	lwz r4, 0x18(r30)
/* 803F5210 003EAF90  38 60 00 00 */	li r3, 0
/* 803F5214 003EAF94  80 1E 00 2C */	lwz r0, 0x2c(r30)
/* 803F5218 003EAF98  80 DE 00 1C */	lwz r6, 0x1c(r30)
/* 803F521C 003EAF9C  80 BE 00 20 */	lwz r5, 0x20(r30)
/* 803F5220 003EAFA0  7C 80 00 38 */	and r0, r4, r0
/* 803F5224 003EAFA4  90 DE 00 24 */	stw r6, 0x24(r30)
/* 803F5228 003EAFA8  7C 00 28 50 */	subf r0, r0, r5
/* 803F522C 003EAFAC  90 1E 00 28 */	stw r0, 0x28(r30)
/* 803F5230 003EAFB0  90 9E 00 34 */	stw r4, 0x34(r30)
lbl_803F5234:
/* 803F5234 003EAFB4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803F5238 003EAFB8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803F523C 003EAFBC  83 C1 00 08 */	lwz r30, 8(r1)
/* 803F5240 003EAFC0  7C 08 03 A6 */	mtlr r0
/* 803F5244 003EAFC4  38 21 00 10 */	addi r1, r1, 0x10
/* 803F5248 003EAFC8  4E 80 00 20 */	blr 

