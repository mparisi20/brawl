.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global NHTTPi_InitBgnEndInfo
NHTTPi_InitBgnEndInfo:
/* 80390014 00385D94  38 80 00 00 */	li r4, 0
/* 80390018 00385D98  38 00 FF FF */	li r0, -1
/* 8039001C 00385D9C  90 83 07 D4 */	stw r4, 0x7d4(r3)
/* 80390020 00385DA0  90 83 07 D8 */	stw r4, 0x7d8(r3)
/* 80390024 00385DA4  90 83 07 C4 */	stw r4, 0x7c4(r3)
/* 80390028 00385DA8  90 83 07 C8 */	stw r4, 0x7c8(r3)
/* 8039002C 00385DAC  90 83 07 CC */	stw r4, 0x7cc(r3)
/* 80390030 00385DB0  90 03 07 D0 */	stw r0, 0x7d0(r3)
/* 80390034 00385DB4  90 83 07 DC */	stw r4, 0x7dc(r3)
/* 80390038 00385DB8  90 83 07 E0 */	stw r4, 0x7e0(r3)
/* 8039003C 00385DBC  90 83 07 E4 */	stw r4, 0x7e4(r3)
/* 80390040 00385DC0  4E 80 00 20 */	blr 

.global NHTTPi_alloc
NHTTPi_alloc:
/* 80390044 00385DC4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80390048 00385DC8  7C 08 02 A6 */	mflr r0
/* 8039004C 00385DCC  90 01 00 14 */	stw r0, 0x14(r1)
/* 80390050 00385DD0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80390054 00385DD4  7C 9F 23 78 */	mr r31, r4
/* 80390058 00385DD8  93 C1 00 08 */	stw r30, 8(r1)
/* 8039005C 00385DDC  7C 7E 1B 78 */	mr r30, r3
/* 80390060 00385DE0  48 00 74 9D */	bl NHTTPi_GetSystemInfoP
/* 80390064 00385DE4  81 83 07 C4 */	lwz r12, 0x7c4(r3)
/* 80390068 00385DE8  2C 0C 00 00 */	cmpwi r12, 0
/* 8039006C 00385DEC  41 82 00 18 */	beq lbl_80390084
/* 80390070 00385DF0  7F C3 F3 78 */	mr r3, r30
/* 80390074 00385DF4  7F E4 FB 78 */	mr r4, r31
/* 80390078 00385DF8  7D 89 03 A6 */	mtctr r12
/* 8039007C 00385DFC  4E 80 04 21 */	bctrl 
/* 80390080 00385E00  48 00 00 08 */	b lbl_80390088
lbl_80390084:
/* 80390084 00385E04  38 60 00 00 */	li r3, 0
lbl_80390088:
/* 80390088 00385E08  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8039008C 00385E0C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80390090 00385E10  83 C1 00 08 */	lwz r30, 8(r1)
/* 80390094 00385E14  7C 08 03 A6 */	mtlr r0
/* 80390098 00385E18  38 21 00 10 */	addi r1, r1, 0x10
/* 8039009C 00385E1C  4E 80 00 20 */	blr 

.global NHTTPi_free
NHTTPi_free:
/* 803900A0 00385E20  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803900A4 00385E24  7C 08 02 A6 */	mflr r0
/* 803900A8 00385E28  90 01 00 14 */	stw r0, 0x14(r1)
/* 803900AC 00385E2C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803900B0 00385E30  7C 7F 1B 78 */	mr r31, r3
/* 803900B4 00385E34  48 00 74 49 */	bl NHTTPi_GetSystemInfoP
/* 803900B8 00385E38  81 83 07 C8 */	lwz r12, 0x7c8(r3)
/* 803900BC 00385E3C  2C 0C 00 00 */	cmpwi r12, 0
/* 803900C0 00385E40  41 82 00 10 */	beq lbl_803900D0
/* 803900C4 00385E44  7F E3 FB 78 */	mr r3, r31
/* 803900C8 00385E48  7D 89 03 A6 */	mtctr r12
/* 803900CC 00385E4C  4E 80 04 21 */	bctrl 
lbl_803900D0:
/* 803900D0 00385E50  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803900D4 00385E54  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803900D8 00385E58  7C 08 03 A6 */	mtlr r0
/* 803900DC 00385E5C  38 21 00 10 */	addi r1, r1, 0x10
/* 803900E0 00385E60  4E 80 00 20 */	blr 

.global NHTTPi_SetError
NHTTPi_SetError:
/* 803900E4 00385E64  90 83 07 D8 */	stw r4, 0x7d8(r3)
/* 803900E8 00385E68  4E 80 00 20 */	blr 

.global NHTTPi_SetSSLError
NHTTPi_SetSSLError:
/* 803900EC 00385E6C  90 83 07 D4 */	stw r4, 0x7d4(r3)
/* 803900F0 00385E70  4E 80 00 20 */	blr 

.global NHTTPi_GetSSLError
NHTTPi_GetSSLError:
/* 803900F4 00385E74  80 63 07 D4 */	lwz r3, 0x7d4(r3)
/* 803900F8 00385E78  4E 80 00 20 */	blr 

.global NHTTPi_Startup
NHTTPi_Startup:
/* 803900FC 00385E7C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80390100 00385E80  7C 08 02 A6 */	mflr r0
/* 80390104 00385E84  90 01 00 34 */	stw r0, 0x34(r1)
/* 80390108 00385E88  39 61 00 30 */	addi r11, r1, 0x30
/* 8039010C 00385E8C  48 06 12 05 */	bl _savegpr_23
/* 80390110 00385E90  3F C0 80 49 */	lis r30, lbl_80491528@ha
/* 80390114 00385E94  7C 7F 1B 78 */	mr r31, r3
/* 80390118 00385E98  7C 99 23 78 */	mr r25, r4
/* 8039011C 00385E9C  7C B7 2B 78 */	mr r23, r5
/* 80390120 00385EA0  7C D8 33 78 */	mr r24, r6
/* 80390124 00385EA4  3B DE 15 28 */	addi r30, r30, lbl_80491528@l
/* 80390128 00385EA8  48 00 74 3D */	bl NHTTPi_GetBgnEndInfoP
/* 8039012C 00385EAC  7C 7D 1B 78 */	mr r29, r3
/* 80390130 00385EB0  7F E3 FB 78 */	mr r3, r31
/* 80390134 00385EB4  48 00 74 35 */	bl NHTTPi_GetListInfoP
/* 80390138 00385EB8  7C 7C 1B 78 */	mr r28, r3
/* 8039013C 00385EBC  7F E3 FB 78 */	mr r3, r31
/* 80390140 00385EC0  48 00 74 31 */	bl NHTTPi_GetReqInfoP
/* 80390144 00385EC4  7C 7B 1B 78 */	mr r27, r3
/* 80390148 00385EC8  7F E3 FB 78 */	mr r3, r31
/* 8039014C 00385ECC  48 00 74 35 */	bl NHTTPi_GetMutexInfoP
/* 80390150 00385ED0  7C 7A 1B 78 */	mr r26, r3
/* 80390154 00385ED4  7F E3 FB 78 */	mr r3, r31
/* 80390158 00385ED8  48 00 74 21 */	bl NHTTPi_GetThreadInfoP
/* 8039015C 00385EDC  93 3D 07 C4 */	stw r25, 0x7c4(r29)
/* 80390160 00385EE0  7C 79 1B 78 */	mr r25, r3
/* 80390164 00385EE4  3B E0 00 00 */	li r31, 0
/* 80390168 00385EE8  7F 83 E3 78 */	mr r3, r28
/* 8039016C 00385EEC  92 FD 07 C8 */	stw r23, 0x7c8(r29)
/* 80390170 00385EF0  93 FD 07 D8 */	stw r31, 0x7d8(r29)
/* 80390174 00385EF4  93 FD 07 D4 */	stw r31, 0x7d4(r29)
/* 80390178 00385EF8  93 FD 07 DC */	stw r31, 0x7dc(r29)
/* 8039017C 00385EFC  48 00 05 31 */	bl NHTTPi_InitListInfo
/* 80390180 00385F00  7F 63 DB 78 */	mr r3, r27
/* 80390184 00385F04  48 00 10 39 */	bl NHTTPi_InitRequestInfo
/* 80390188 00385F08  7F 43 D3 78 */	mr r3, r26
/* 8039018C 00385F0C  48 00 07 7D */	bl NHTTPi_initLockReqList
/* 80390190 00385F10  48 00 74 21 */	bl NHTTPi_InitConnectionList
/* 80390194 00385F14  38 00 FF FF */	li r0, -1
/* 80390198 00385F18  90 1D 07 D0 */	stw r0, 0x7d0(r29)
/* 8039019C 00385F1C  48 00 73 61 */	bl NHTTPi_GetSystemInfoP
/* 803901A0 00385F20  81 83 07 C4 */	lwz r12, 0x7c4(r3)
/* 803901A4 00385F24  2C 0C 00 00 */	cmpwi r12, 0
/* 803901A8 00385F28  41 82 00 18 */	beq lbl_803901C0
/* 803901AC 00385F2C  38 60 20 00 */	li r3, 0x2000
/* 803901B0 00385F30  38 80 00 08 */	li r4, 8
/* 803901B4 00385F34  7D 89 03 A6 */	mtctr r12
/* 803901B8 00385F38  4E 80 04 21 */	bctrl 
/* 803901BC 00385F3C  7C 7F 1B 78 */	mr r31, r3
lbl_803901C0:
/* 803901C0 00385F40  2C 1F 00 00 */	cmpwi r31, 0
/* 803901C4 00385F44  93 FD 07 E0 */	stw r31, 0x7e0(r29)
/* 803901C8 00385F48  40 82 00 18 */	bne lbl_803901E0
/* 803901CC 00385F4C  38 00 00 01 */	li r0, 1
/* 803901D0 00385F50  90 1D 07 D8 */	stw r0, 0x7d8(r29)
/* 803901D4 00385F54  48 00 07 75 */	bl NHTTPi_exitLockReqList
/* 803901D8 00385F58  38 60 00 00 */	li r3, 0
/* 803901DC 00385F5C  48 00 00 98 */	b lbl_80390274
lbl_803901E0:
/* 803901E0 00385F60  7F 23 CB 78 */	mr r3, r25
/* 803901E4 00385F64  7F 04 C3 78 */	mr r4, r24
/* 803901E8 00385F68  7F E5 FB 78 */	mr r5, r31
/* 803901EC 00385F6C  48 00 07 69 */	bl NHTTPi_createCommThread
/* 803901F0 00385F70  2C 03 00 00 */	cmpwi r3, 0
/* 803901F4 00385F74  40 82 00 40 */	bne lbl_80390234
/* 803901F8 00385F78  38 00 00 09 */	li r0, 9
/* 803901FC 00385F7C  90 1D 07 D8 */	stw r0, 0x7d8(r29)
/* 80390200 00385F80  83 DD 07 E0 */	lwz r30, 0x7e0(r29)
/* 80390204 00385F84  48 00 72 F9 */	bl NHTTPi_GetSystemInfoP
/* 80390208 00385F88  81 83 07 C8 */	lwz r12, 0x7c8(r3)
/* 8039020C 00385F8C  2C 0C 00 00 */	cmpwi r12, 0
/* 80390210 00385F90  41 82 00 10 */	beq lbl_80390220
/* 80390214 00385F94  7F C3 F3 78 */	mr r3, r30
/* 80390218 00385F98  7D 89 03 A6 */	mtctr r12
/* 8039021C 00385F9C  4E 80 04 21 */	bctrl 
lbl_80390220:
/* 80390220 00385FA0  38 00 00 00 */	li r0, 0
/* 80390224 00385FA4  90 1D 07 E0 */	stw r0, 0x7e0(r29)
/* 80390228 00385FA8  48 00 07 21 */	bl NHTTPi_exitLockReqList
/* 8039022C 00385FAC  38 60 00 00 */	li r3, 0
/* 80390230 00385FB0  48 00 00 44 */	b lbl_80390274
lbl_80390234:
/* 80390234 00385FB4  7F A3 EB 78 */	mr r3, r29
/* 80390238 00385FB8  4B FF E2 B1 */	bl NCDGetCurrentIpConfig
/* 8039023C 00385FBC  2C 03 00 00 */	cmpwi r3, 0
/* 80390240 00385FC0  40 80 00 28 */	bge lbl_80390268
/* 80390244 00385FC4  7C 64 1B 78 */	mr r4, r3
/* 80390248 00385FC8  38 7E 00 00 */	addi r3, r30, 0
/* 8039024C 00385FCC  4C C6 31 82 */	crclr 6
/* 80390250 00385FD0  4B E4 83 B1 */	bl OSReport
/* 80390254 00385FD4  38 7E 00 20 */	addi r3, r30, 0x20
/* 80390258 00385FD8  38 BE 00 30 */	addi r5, r30, 0x30
/* 8039025C 00385FDC  38 80 00 E6 */	li r4, 0xe6
/* 80390260 00385FE0  4C C6 31 82 */	crclr 6
/* 80390264 00385FE4  4B E4 84 2D */	bl OSPanic
lbl_80390268:
/* 80390268 00385FE8  38 00 00 01 */	li r0, 1
/* 8039026C 00385FEC  38 60 00 01 */	li r3, 1
/* 80390270 00385FF0  90 1D 07 CC */	stw r0, 0x7cc(r29)
lbl_80390274:
/* 80390274 00385FF4  39 61 00 30 */	addi r11, r1, 0x30
/* 80390278 00385FF8  48 06 10 E5 */	bl _restgpr_23
/* 8039027C 00385FFC  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80390280 00386000  7C 08 03 A6 */	mtlr r0
/* 80390284 00386004  38 21 00 30 */	addi r1, r1, 0x30
/* 80390288 00386008  4E 80 00 20 */	blr 

.global NHTTPi_CleanupAsync
NHTTPi_CleanupAsync:
/* 8039028C 0038600C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80390290 00386010  7C 08 02 A6 */	mflr r0
/* 80390294 00386014  90 01 00 24 */	stw r0, 0x24(r1)
/* 80390298 00386018  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8039029C 0038601C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803902A0 00386020  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803902A4 00386024  7C 9D 23 78 */	mr r29, r4
/* 803902A8 00386028  93 81 00 10 */	stw r28, 0x10(r1)
/* 803902AC 0038602C  7C 7C 1B 78 */	mr r28, r3
/* 803902B0 00386030  48 00 72 B5 */	bl NHTTPi_GetBgnEndInfoP
/* 803902B4 00386034  7C 7E 1B 78 */	mr r30, r3
/* 803902B8 00386038  7F 83 E3 78 */	mr r3, r28
/* 803902BC 0038603C  48 00 72 BD */	bl NHTTPi_GetThreadInfoP
/* 803902C0 00386040  7C 7F 1B 78 */	mr r31, r3
/* 803902C4 00386044  38 80 00 01 */	li r4, 1
/* 803902C8 00386048  48 00 07 9D */	bl NHTTPi_CheckCurrentThread
/* 803902CC 0038604C  7F 83 E3 78 */	mr r3, r28
/* 803902D0 00386050  48 00 18 15 */	bl NHTTPi_cancelAllRequests
/* 803902D4 00386054  7F E3 FB 78 */	mr r3, r31
/* 803902D8 00386058  7F C4 F3 78 */	mr r4, r30
/* 803902DC 0038605C  48 00 07 0D */	bl NHTTPi_destroyCommThread
/* 803902E0 00386060  83 FE 07 E0 */	lwz r31, 0x7e0(r30)
/* 803902E4 00386064  48 00 72 19 */	bl NHTTPi_GetSystemInfoP
/* 803902E8 00386068  81 83 07 C8 */	lwz r12, 0x7c8(r3)
/* 803902EC 0038606C  2C 0C 00 00 */	cmpwi r12, 0
/* 803902F0 00386070  41 82 00 10 */	beq lbl_80390300
/* 803902F4 00386074  7F E3 FB 78 */	mr r3, r31
/* 803902F8 00386078  7D 89 03 A6 */	mtctr r12
/* 803902FC 0038607C  4E 80 04 21 */	bctrl 
lbl_80390300:
/* 80390300 00386080  3B E0 00 00 */	li r31, 0
/* 80390304 00386084  93 FE 07 E0 */	stw r31, 0x7e0(r30)
/* 80390308 00386088  48 00 06 41 */	bl NHTTPi_exitLockReqList
/* 8039030C 0038608C  2C 1D 00 00 */	cmpwi r29, 0
/* 80390310 00386090  93 FE 07 CC */	stw r31, 0x7cc(r30)
/* 80390314 00386094  41 82 00 10 */	beq lbl_80390324
/* 80390318 00386098  7F AC EB 78 */	mr r12, r29
/* 8039031C 0038609C  7D 89 03 A6 */	mtctr r12
/* 80390320 003860A0  4E 80 04 21 */	bctrl 
lbl_80390324:
/* 80390324 003860A4  48 00 6E 49 */	bl NHTTPi_GetConnectionListLength
/* 80390328 003860A8  2C 03 00 00 */	cmpwi r3, 0
/* 8039032C 003860AC  7C 64 1B 78 */	mr r4, r3
/* 80390330 003860B0  41 82 00 14 */	beq lbl_80390344
/* 80390334 003860B4  3C 60 80 49 */	lis r3, lbl_80491570@ha
/* 80390338 003860B8  38 63 15 70 */	addi r3, r3, lbl_80491570@l
/* 8039033C 003860BC  4C C6 31 82 */	crclr 6
/* 80390340 003860C0  48 06 82 DD */	bl printf
lbl_80390344:
/* 80390344 003860C4  80 7E 07 D0 */	lwz r3, 0x7d0(r30)
/* 80390348 003860C8  2C 03 00 00 */	cmpwi r3, 0
/* 8039034C 003860CC  41 80 00 10 */	blt lbl_8039035C
/* 80390350 003860D0  48 01 6D 09 */	bl SOClose
/* 80390354 003860D4  38 00 FF FF */	li r0, -1
/* 80390358 003860D8  90 1E 07 D0 */	stw r0, 0x7d0(r30)
lbl_8039035C:
/* 8039035C 003860DC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80390360 003860E0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80390364 003860E4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80390368 003860E8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8039036C 003860EC  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80390370 003860F0  7C 08 03 A6 */	mtlr r0
/* 80390374 003860F4  38 21 00 20 */	addi r1, r1, 0x20
/* 80390378 003860F8  4E 80 00 20 */	blr 

