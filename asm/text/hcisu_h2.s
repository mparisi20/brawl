.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global hcisu_h2_usb_cback
hcisu_h2_usb_cback:
/* 802305A4 00226324  2C 03 00 04 */	cmpwi r3, 4
/* 802305A8 00226328  41 82 00 14 */	beq lbl_802305BC
/* 802305AC 0022632C  4C 80 00 20 */	bgelr 
/* 802305B0 00226330  2C 03 00 00 */	cmpwi r3, 0
/* 802305B4 00226334  4D 82 00 20 */	beqlr 
/* 802305B8 00226338  4E 80 00 20 */	blr 
lbl_802305BC:
/* 802305BC 0022633C  7C 83 07 74 */	extsb r3, r4
/* 802305C0 00226340  48 00 15 F4 */	b bta_usb_close_evt
/* 802305C4 00226344  4E 80 00 20 */	blr 

.global hcisu_h2_receive_msg
hcisu_h2_receive_msg:
/* 802305C8 00226348  94 21 FF A0 */	stwu r1, -0x60(r1)
/* 802305CC 0022634C  7C 08 02 A6 */	mflr r0
/* 802305D0 00226350  90 01 00 64 */	stw r0, 0x64(r1)
/* 802305D4 00226354  39 61 00 60 */	addi r11, r1, 0x60
/* 802305D8 00226358  48 1C 0D 15 */	bl _savegpr_14
/* 802305DC 0022635C  88 04 00 1E */	lbz r0, 0x1e(r4)
/* 802305E0 00226360  7C 8F 23 78 */	mr r15, r4
/* 802305E4 00226364  3A 60 00 00 */	li r19, 0
/* 802305E8 00226368  28 00 00 02 */	cmplwi r0, 2
/* 802305EC 0022636C  41 82 00 0C */	beq lbl_802305F8
/* 802305F0 00226370  38 60 00 00 */	li r3, 0
/* 802305F4 00226374  48 00 03 54 */	b lbl_80230948
lbl_802305F8:
/* 802305F8 00226378  3A 83 00 01 */	addi r20, r3, 1
/* 802305FC 0022637C  54 60 0B FC */	rlwinm r0, r3, 1, 0xf, 0x1e
/* 80230600 00226380  3F E0 80 52 */	lis r31, lbl_80525F28@ha
/* 80230604 00226384  7E C4 1A 14 */	add r22, r4, r3
/* 80230608 00226388  56 90 04 3E */	clrlwi r16, r20, 0x10
/* 8023060C 0022638C  54 77 13 BA */	rlwinm r23, r3, 2, 0xe, 0x1d
/* 80230610 00226390  7E A4 02 14 */	add r21, r4, r0
/* 80230614 00226394  3B FF 5F 28 */	addi r31, r31, lbl_80525F28@l
/* 80230618 00226398  3B A0 00 00 */	li r29, 0
/* 8023061C 0022639C  3B C0 00 04 */	li r30, 4
/* 80230620 002263A0  3B 82 A7 30 */	addi r28, r2, lbl_805A3A50-_SDA2_BASE_
/* 80230624 002263A4  3B 20 00 03 */	li r25, 3
/* 80230628 002263A8  3B 00 00 02 */	li r24, 2
/* 8023062C 002263AC  3D C0 80 48 */	lis r14, 0x8048
/* 80230630 002263B0  3B 42 A7 38 */	addi r26, r2, lbl_805A3A58-_SDA2_BASE_
/* 80230634 002263B4  3B 60 00 01 */	li r27, 1
lbl_80230638:
/* 80230638 002263B8  56 03 06 3E */	clrlwi r3, r16, 0x18
/* 8023063C 002263BC  38 81 00 08 */	addi r4, r1, 8
/* 80230640 002263C0  38 A0 00 01 */	li r5, 1
/* 80230644 002263C4  48 00 0E F5 */	bl UUSB_Read
/* 80230648 002263C8  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 8023064C 002263CC  41 82 02 F8 */	beq lbl_80230944
/* 80230650 002263D0  88 16 00 1A */	lbz r0, 0x1a(r22)
/* 80230654 002263D4  3A 20 00 00 */	li r17, 0
/* 80230658 002263D8  3A 73 00 01 */	addi r19, r19, 1
/* 8023065C 002263DC  2C 00 00 02 */	cmpwi r0, 2
/* 80230660 002263E0  41 82 01 C8 */	beq lbl_80230828
/* 80230664 002263E4  40 80 00 14 */	bge lbl_80230678
/* 80230668 002263E8  2C 00 00 00 */	cmpwi r0, 0
/* 8023066C 002263EC  41 82 00 1C */	beq lbl_80230688
/* 80230670 002263F0  40 80 00 C0 */	bge lbl_80230730
/* 80230674 002263F4  48 00 02 B0 */	b lbl_80230924
lbl_80230678:
/* 80230678 002263F8  2C 00 00 04 */	cmpwi r0, 4
/* 8023067C 002263FC  41 82 02 90 */	beq lbl_8023090C
/* 80230680 00226400  40 80 02 A4 */	bge lbl_80230924
/* 80230684 00226404  48 00 01 F0 */	b lbl_80230874
lbl_80230688:
/* 80230688 00226408  28 10 00 01 */	cmplwi r16, 1
/* 8023068C 0022640C  40 82 00 18 */	bne lbl_802306A4
/* 80230690 00226410  38 60 00 02 */	li r3, 2
/* 80230694 00226414  4B FF E9 65 */	bl GKI_getpoolbuf
/* 80230698 00226418  7C 6F B9 2E */	stwx r3, r15, r23
/* 8023069C 0022641C  9B D6 00 14 */	stb r30, 0x14(r22)
/* 802306A0 00226420  48 00 00 38 */	b lbl_802306D8
lbl_802306A4:
/* 802306A4 00226424  28 10 00 02 */	cmplwi r16, 2
/* 802306A8 00226428  40 82 00 18 */	bne lbl_802306C0
/* 802306AC 0022642C  38 60 00 03 */	li r3, 3
/* 802306B0 00226430  4B FF E9 49 */	bl GKI_getpoolbuf
/* 802306B4 00226434  7C 6F B9 2E */	stwx r3, r15, r23
/* 802306B8 00226438  9B 16 00 14 */	stb r24, 0x14(r22)
/* 802306BC 0022643C  48 00 00 1C */	b lbl_802306D8
lbl_802306C0:
/* 802306C0 00226440  28 10 00 03 */	cmplwi r16, 3
/* 802306C4 00226444  40 82 02 60 */	bne lbl_80230924
/* 802306C8 00226448  38 60 00 01 */	li r3, 1
/* 802306CC 0022644C  4B FF E9 2D */	bl GKI_getpoolbuf
/* 802306D0 00226450  7C 6F B9 2E */	stwx r3, r15, r23
/* 802306D4 00226454  9B 36 00 14 */	stb r25, 0x14(r22)
lbl_802306D8:
/* 802306D8 00226458  7C 6F B8 2E */	lwzx r3, r15, r23
/* 802306DC 0022645C  2C 03 00 00 */	cmpwi r3, 0
/* 802306E0 00226460  41 82 00 30 */	beq lbl_80230710
/* 802306E4 00226464  B3 A3 00 02 */	sth r29, 2(r3)
/* 802306E8 00226468  88 16 00 14 */	lbz r0, 0x14(r22)
/* 802306EC 0022646C  7C 6F B8 2E */	lwzx r3, r15, r23
/* 802306F0 00226470  54 00 08 3C */	slwi r0, r0, 1
/* 802306F4 00226474  7C 9A 02 14 */	add r4, r26, r0
/* 802306F8 00226478  A0 04 FF FE */	lhz r0, -2(r4)
/* 802306FC 0022647C  B0 03 00 00 */	sth r0, 0(r3)
/* 80230700 00226480  7C 6F B8 2E */	lwzx r3, r15, r23
/* 80230704 00226484  B3 A3 00 04 */	sth r29, 4(r3)
/* 80230708 00226488  9B 76 00 1A */	stb r27, 0x1a(r22)
/* 8023070C 0022648C  48 00 00 14 */	b lbl_80230720
lbl_80230710:
/* 80230710 00226490  38 8E FB F8 */	addi r4, r14, -1032
/* 80230714 00226494  3C 60 00 07 */	lis r3, 7
/* 80230718 00226498  48 00 12 CD */	bl LogMsg_0
/* 8023071C 0022649C  9B 16 00 1A */	stb r24, 0x1a(r22)
lbl_80230720:
/* 80230720 002264A0  88 16 00 14 */	lbz r0, 0x14(r22)
/* 80230724 002264A4  7C 7C 02 14 */	add r3, r28, r0
/* 80230728 002264A8  88 03 FF FF */	lbz r0, -1(r3)
/* 8023072C 002264AC  B0 15 00 0C */	sth r0, 0xc(r21)
lbl_80230730:
/* 80230730 002264B0  7C CF B8 2E */	lwzx r6, r15, r23
/* 80230734 002264B4  88 A1 00 08 */	lbz r5, 8(r1)
/* 80230738 002264B8  A0 86 00 02 */	lhz r4, 2(r6)
/* 8023073C 002264BC  7C 66 22 14 */	add r3, r6, r4
/* 80230740 002264C0  38 04 00 01 */	addi r0, r4, 1
/* 80230744 002264C4  98 A3 00 08 */	stb r5, 8(r3)
/* 80230748 002264C8  B0 06 00 02 */	sth r0, 2(r6)
/* 8023074C 002264CC  A0 75 00 0C */	lhz r3, 0xc(r21)
/* 80230750 002264D0  38 63 FF FF */	addi r3, r3, -1
/* 80230754 002264D4  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 80230758 002264D8  B0 75 00 0C */	sth r3, 0xc(r21)
/* 8023075C 002264DC  40 82 00 C0 */	bne lbl_8023081C
/* 80230760 002264E0  88 16 00 14 */	lbz r0, 0x14(r22)
/* 80230764 002264E4  8A 41 00 08 */	lbz r18, 8(r1)
/* 80230768 002264E8  28 00 00 02 */	cmplwi r0, 2
/* 8023076C 002264EC  40 82 00 44 */	bne lbl_802307B0
/* 80230770 002264F0  88 16 00 17 */	lbz r0, 0x17(r22)
/* 80230774 002264F4  56 44 42 2E */	rlwinm r4, r18, 8, 8, 0x17
/* 80230778 002264F8  7C 6F B8 2E */	lwzx r3, r15, r23
/* 8023077C 002264FC  7C 04 02 14 */	add r0, r4, r0
/* 80230780 00226500  54 12 04 3E */	clrlwi r18, r0, 0x10
/* 80230784 00226504  48 01 C9 6D */	bl l2cap_link_chk_pkt_start
/* 80230788 00226508  2C 03 00 00 */	cmpwi r3, 0
/* 8023078C 0022650C  7C 6F B9 2E */	stwx r3, r15, r23
/* 80230790 00226510  40 82 00 20 */	bne lbl_802307B0
/* 80230794 00226514  2C 12 00 00 */	cmpwi r18, 0
/* 80230798 00226518  B2 55 00 0C */	sth r18, 0xc(r21)
/* 8023079C 0022651C  40 82 00 0C */	bne lbl_802307A8
/* 802307A0 00226520  9B B6 00 1A */	stb r29, 0x1a(r22)
/* 802307A4 00226524  48 00 01 80 */	b lbl_80230924
lbl_802307A8:
/* 802307A8 00226528  9B D6 00 1A */	stb r30, 0x1a(r22)
/* 802307AC 0022652C  48 00 01 78 */	b lbl_80230924
lbl_802307B0:
/* 802307B0 00226530  B2 55 00 0C */	sth r18, 0xc(r21)
/* 802307B4 00226534  7C 6F B8 2E */	lwzx r3, r15, r23
/* 802307B8 00226538  4B FF EA 99 */	bl GKI_get_buf_size
/* 802307BC 0022653C  88 16 00 14 */	lbz r0, 0x14(r22)
/* 802307C0 00226540  54 64 04 3E */	clrlwi r4, r3, 0x10
/* 802307C4 00226544  7C 7C 02 14 */	add r3, r28, r0
/* 802307C8 00226548  88 03 FF FF */	lbz r0, -1(r3)
/* 802307CC 0022654C  7C 72 02 14 */	add r3, r18, r0
/* 802307D0 00226550  38 03 00 08 */	addi r0, r3, 8
/* 802307D4 00226554  7C 00 20 40 */	cmplw r0, r4
/* 802307D8 00226558  40 81 00 28 */	ble lbl_80230800
/* 802307DC 0022655C  7C 6F B8 2E */	lwzx r3, r15, r23
/* 802307E0 00226560  4B FF E9 01 */	bl GKI_freebuf
/* 802307E4 00226564  7F AF B9 2E */	stwx r29, r15, r23
/* 802307E8 00226568  3C 60 80 48 */	lis r3, lbl_8047FC34@ha
/* 802307EC 0022656C  38 83 FC 34 */	addi r4, r3, lbl_8047FC34@l
/* 802307F0 00226570  9B D6 00 1A */	stb r30, 0x1a(r22)
/* 802307F4 00226574  3C 60 00 07 */	lis r3, 7
/* 802307F8 00226578  48 00 11 ED */	bl LogMsg_0
/* 802307FC 0022657C  48 00 01 28 */	b lbl_80230924
lbl_80230800:
/* 80230800 00226580  2C 12 00 00 */	cmpwi r18, 0
/* 80230804 00226584  41 82 00 0C */	beq lbl_80230810
/* 80230808 00226588  9B 36 00 1A */	stb r25, 0x1a(r22)
/* 8023080C 0022658C  48 00 01 18 */	b lbl_80230924
lbl_80230810:
/* 80230810 00226590  9B B6 00 1A */	stb r29, 0x1a(r22)
/* 80230814 00226594  3A 20 00 01 */	li r17, 1
/* 80230818 00226598  48 00 01 0C */	b lbl_80230924
lbl_8023081C:
/* 8023081C 0022659C  88 01 00 08 */	lbz r0, 8(r1)
/* 80230820 002265A0  98 16 00 17 */	stb r0, 0x17(r22)
/* 80230824 002265A4  48 00 01 00 */	b lbl_80230924
lbl_80230828:
/* 80230828 002265A8  A0 75 00 0C */	lhz r3, 0xc(r21)
/* 8023082C 002265AC  38 63 FF FF */	addi r3, r3, -1
/* 80230830 002265B0  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 80230834 002265B4  B0 75 00 0C */	sth r3, 0xc(r21)
/* 80230838 002265B8  40 82 00 30 */	bne lbl_80230868
/* 8023083C 002265BC  88 16 00 14 */	lbz r0, 0x14(r22)
/* 80230840 002265C0  88 61 00 08 */	lbz r3, 8(r1)
/* 80230844 002265C4  28 00 00 02 */	cmplwi r0, 2
/* 80230848 002265C8  40 82 00 14 */	bne lbl_8023085C
/* 8023084C 002265CC  88 16 00 17 */	lbz r0, 0x17(r22)
/* 80230850 002265D0  54 63 42 2E */	rlwinm r3, r3, 8, 8, 0x17
/* 80230854 002265D4  7C 03 02 14 */	add r0, r3, r0
/* 80230858 002265D8  54 03 04 3E */	clrlwi r3, r0, 0x10
lbl_8023085C:
/* 8023085C 002265DC  B0 75 00 0C */	sth r3, 0xc(r21)
/* 80230860 002265E0  9B D6 00 1A */	stb r30, 0x1a(r22)
/* 80230864 002265E4  48 00 00 C0 */	b lbl_80230924
lbl_80230868:
/* 80230868 002265E8  88 01 00 08 */	lbz r0, 8(r1)
/* 8023086C 002265EC  98 16 00 17 */	stb r0, 0x17(r22)
/* 80230870 002265F0  48 00 00 B4 */	b lbl_80230924
lbl_80230874:
/* 80230874 002265F4  7C EF B8 2E */	lwzx r7, r15, r23
/* 80230878 002265F8  56 83 06 3E */	clrlwi r3, r20, 0x18
/* 8023087C 002265FC  88 C1 00 08 */	lbz r6, 8(r1)
/* 80230880 00226600  A0 A7 00 02 */	lhz r5, 2(r7)
/* 80230884 00226604  7C 87 2A 14 */	add r4, r7, r5
/* 80230888 00226608  38 05 00 01 */	addi r0, r5, 1
/* 8023088C 0022660C  98 C4 00 08 */	stb r6, 8(r4)
/* 80230890 00226610  B0 07 00 02 */	sth r0, 2(r7)
/* 80230894 00226614  A0 95 00 0C */	lhz r4, 0xc(r21)
/* 80230898 00226618  38 04 FF FF */	addi r0, r4, -1
/* 8023089C 0022661C  B0 15 00 0C */	sth r0, 0xc(r21)
/* 802308A0 00226620  54 05 04 3E */	clrlwi r5, r0, 0x10
/* 802308A4 00226624  7C 8F B8 2E */	lwzx r4, r15, r23
/* 802308A8 00226628  A0 04 00 02 */	lhz r0, 2(r4)
/* 802308AC 0022662C  7C 84 02 14 */	add r4, r4, r0
/* 802308B0 00226630  38 84 00 08 */	addi r4, r4, 8
/* 802308B4 00226634  48 00 0C 85 */	bl UUSB_Read
/* 802308B8 00226638  7C 8F B8 2E */	lwzx r4, r15, r23
/* 802308BC 0022663C  7E 73 1A 14 */	add r19, r19, r3
/* 802308C0 00226640  A0 04 00 02 */	lhz r0, 2(r4)
/* 802308C4 00226644  7C 00 1A 14 */	add r0, r0, r3
/* 802308C8 00226648  B0 04 00 02 */	sth r0, 2(r4)
/* 802308CC 0022664C  A0 15 00 0C */	lhz r0, 0xc(r21)
/* 802308D0 00226650  7C 63 00 50 */	subf r3, r3, r0
/* 802308D4 00226654  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 802308D8 00226658  B0 75 00 0C */	sth r3, 0xc(r21)
/* 802308DC 0022665C  40 82 00 48 */	bne lbl_80230924
/* 802308E0 00226660  88 16 00 14 */	lbz r0, 0x14(r22)
/* 802308E4 00226664  28 00 00 02 */	cmplwi r0, 2
/* 802308E8 00226668  40 82 00 18 */	bne lbl_80230900
/* 802308EC 0022666C  48 01 C9 D5 */	bl l2cap_link_chk_pkt_end
/* 802308F0 00226670  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802308F4 00226674  40 82 00 0C */	bne lbl_80230900
/* 802308F8 00226678  9B B6 00 1A */	stb r29, 0x1a(r22)
/* 802308FC 0022667C  48 00 00 28 */	b lbl_80230924
lbl_80230900:
/* 80230900 00226680  9B B6 00 1A */	stb r29, 0x1a(r22)
/* 80230904 00226684  3A 20 00 01 */	li r17, 1
/* 80230908 00226688  48 00 00 1C */	b lbl_80230924
lbl_8023090C:
/* 8023090C 0022668C  A0 75 00 0C */	lhz r3, 0xc(r21)
/* 80230910 00226690  38 63 FF FF */	addi r3, r3, -1
/* 80230914 00226694  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 80230918 00226698  B0 75 00 0C */	sth r3, 0xc(r21)
/* 8023091C 0022669C  40 82 00 08 */	bne lbl_80230924
/* 80230920 002266A0  9B B6 00 1A */	stb r29, 0x1a(r22)
lbl_80230924:
/* 80230924 002266A4  2C 11 00 00 */	cmpwi r17, 0
/* 80230928 002266A8  41 82 FD 10 */	beq lbl_80230638
/* 8023092C 002266AC  88 7F 00 1F */	lbz r3, 0x1f(r31)
/* 80230930 002266B0  38 80 00 00 */	li r4, 0
/* 80230934 002266B4  7C AF B8 2E */	lwzx r5, r15, r23
/* 80230938 002266B8  4B FF E9 5D */	bl GKI_send_msg
/* 8023093C 002266BC  7F AF B9 2E */	stwx r29, r15, r23
/* 80230940 002266C0  4B FF FC F8 */	b lbl_80230638
lbl_80230944:
/* 80230944 002266C4  7E 63 9B 78 */	mr r3, r19
lbl_80230948:
/* 80230948 002266C8  39 61 00 60 */	addi r11, r1, 0x60
/* 8023094C 002266CC  48 1C 09 ED */	bl _restgpr_14
/* 80230950 002266D0  80 01 00 64 */	lwz r0, 0x64(r1)
/* 80230954 002266D4  7C 08 03 A6 */	mtlr r0
/* 80230958 002266D8  38 21 00 60 */	addi r1, r1, 0x60
/* 8023095C 002266DC  4E 80 00 20 */	blr 

.global hcisu_h2_send_msg_now
hcisu_h2_send_msg_now:
/* 80230960 002266E0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80230964 002266E4  7C 08 02 A6 */	mflr r0
/* 80230968 002266E8  90 01 00 24 */	stw r0, 0x24(r1)
/* 8023096C 002266EC  39 61 00 20 */	addi r11, r1, 0x20
/* 80230970 002266F0  48 1C 09 B1 */	bl _savegpr_27
/* 80230974 002266F4  A0 A4 00 00 */	lhz r5, 0(r4)
/* 80230978 002266F8  7C 9B 23 78 */	mr r27, r4
/* 8023097C 002266FC  A0 04 00 04 */	lhz r0, 4(r4)
/* 80230980 00226700  28 05 21 00 */	cmplwi r5, 0x2100
/* 80230984 00226704  7C 64 02 14 */	add r3, r4, r0
/* 80230988 00226708  38 C3 00 08 */	addi r6, r3, 8
/* 8023098C 0022670C  40 82 00 0C */	bne lbl_80230998
/* 80230990 00226710  3B 80 00 02 */	li r28, 2
/* 80230994 00226714  48 00 00 20 */	b lbl_802309B4
lbl_80230998:
/* 80230998 00226718  28 05 22 00 */	cmplwi r5, 0x2200
/* 8023099C 0022671C  40 82 00 0C */	bne lbl_802309A8
/* 802309A0 00226720  3B 80 00 03 */	li r28, 3
/* 802309A4 00226724  48 00 00 10 */	b lbl_802309B4
lbl_802309A8:
/* 802309A8 00226728  28 05 20 00 */	cmplwi r5, 0x2000
/* 802309AC 0022672C  40 82 00 08 */	bne lbl_802309B4
/* 802309B0 00226730  3B 80 00 00 */	li r28, 0
lbl_802309B4:
/* 802309B4 00226734  28 05 21 00 */	cmplwi r5, 0x2100
/* 802309B8 00226738  40 82 01 20 */	bne lbl_80230AD8
/* 802309BC 0022673C  3C 60 80 53 */	lis r3, lbl_805297D0@ha
/* 802309C0 00226740  A0 84 00 02 */	lhz r4, 2(r4)
/* 802309C4 00226744  3B C3 97 D0 */	addi r30, r3, lbl_805297D0@l
/* 802309C8 00226748  A0 1E 00 7E */	lhz r0, 0x7e(r30)
/* 802309CC 0022674C  7C 04 00 40 */	cmplw r4, r0
/* 802309D0 00226750  40 81 01 08 */	ble lbl_80230AD8
/* 802309D4 00226754  88 06 00 01 */	lbz r0, 1(r6)
/* 802309D8 00226758  88 66 00 00 */	lbz r3, 0(r6)
/* 802309DC 0022675C  38 C6 00 02 */	addi r6, r6, 2
/* 802309E0 00226760  54 00 44 2E */	rlwinm r0, r0, 8, 0x10, 0x17
/* 802309E4 00226764  7C 03 02 14 */	add r0, r3, r0
/* 802309E8 00226768  54 00 04 3E */	clrlwi r0, r0, 0x10
/* 802309EC 0022676C  70 00 CF FF */	andi. r0, r0, 0xcfff
/* 802309F0 00226770  60 1F 10 00 */	ori r31, r0, 0x1000
/* 802309F4 00226774  7F FD 46 70 */	srawi r29, r31, 8
/* 802309F8 00226778  48 00 00 D0 */	b lbl_80230AC8
lbl_802309FC:
/* 802309FC 0022677C  7C C4 33 78 */	mr r4, r6
/* 80230A00 00226780  7F 83 E3 78 */	mr r3, r28
/* 80230A04 00226784  7F 66 DB 78 */	mr r6, r27
/* 80230A08 00226788  48 00 0B 39 */	bl UUSB_Write
/* 80230A0C 0022678C  A0 7B 00 04 */	lhz r3, 4(r27)
/* 80230A10 00226790  A0 1E 00 7C */	lhz r0, 0x7c(r30)
/* 80230A14 00226794  A0 9B 00 02 */	lhz r4, 2(r27)
/* 80230A18 00226798  7C 03 02 14 */	add r0, r3, r0
/* 80230A1C 0022679C  B0 1B 00 04 */	sth r0, 4(r27)
/* 80230A20 002267A0  54 00 04 3E */	clrlwi r0, r0, 0x10
/* 80230A24 002267A4  7C 7B 02 14 */	add r3, r27, r0
/* 80230A28 002267A8  A0 1E 00 7C */	lhz r0, 0x7c(r30)
/* 80230A2C 002267AC  38 C3 00 0A */	addi r6, r3, 0xa
/* 80230A30 002267B0  7C 00 20 50 */	subf r0, r0, r4
/* 80230A34 002267B4  B0 1B 00 02 */	sth r0, 2(r27)
/* 80230A38 002267B8  9B E3 00 08 */	stb r31, 8(r3)
/* 80230A3C 002267BC  9B A3 00 09 */	stb r29, 9(r3)
/* 80230A40 002267C0  A0 7B 00 02 */	lhz r3, 2(r27)
/* 80230A44 002267C4  A0 1E 00 7E */	lhz r0, 0x7e(r30)
/* 80230A48 002267C8  7C 03 00 40 */	cmplw r3, r0
/* 80230A4C 002267CC  40 81 00 20 */	ble lbl_80230A6C
/* 80230A50 002267D0  A0 1E 00 7C */	lhz r0, 0x7c(r30)
/* 80230A54 002267D4  98 06 00 00 */	stb r0, 0(r6)
/* 80230A58 002267D8  A0 1E 00 7C */	lhz r0, 0x7c(r30)
/* 80230A5C 002267DC  7C 00 46 70 */	srawi r0, r0, 8
/* 80230A60 002267E0  98 06 00 01 */	stb r0, 1(r6)
/* 80230A64 002267E4  38 C6 00 02 */	addi r6, r6, 2
/* 80230A68 002267E8  48 00 00 20 */	b lbl_80230A88
lbl_80230A6C:
/* 80230A6C 002267EC  38 03 FF FC */	addi r0, r3, -4
/* 80230A70 002267F0  98 06 00 00 */	stb r0, 0(r6)
/* 80230A74 002267F4  A0 7B 00 02 */	lhz r3, 2(r27)
/* 80230A78 002267F8  38 03 FF FC */	addi r0, r3, -4
/* 80230A7C 002267FC  7C 00 46 70 */	srawi r0, r0, 8
/* 80230A80 00226800  98 06 00 01 */	stb r0, 1(r6)
/* 80230A84 00226804  38 C6 00 02 */	addi r6, r6, 2
lbl_80230A88:
/* 80230A88 00226808  A0 7B 00 06 */	lhz r3, 6(r27)
/* 80230A8C 0022680C  2C 03 00 00 */	cmpwi r3, 0
/* 80230A90 00226810  41 82 00 38 */	beq lbl_80230AC8
/* 80230A94 00226814  38 63 FF FF */	addi r3, r3, -1
/* 80230A98 00226818  54 60 04 3F */	clrlwi. r0, r3, 0x10
/* 80230A9C 0022681C  B0 7B 00 06 */	sth r3, 6(r27)
/* 80230AA0 00226820  40 82 00 28 */	bne lbl_80230AC8
/* 80230AA4 00226824  38 00 19 00 */	li r0, 0x1900
/* 80230AA8 00226828  3C 60 80 52 */	lis r3, lbl_80525F28@ha
/* 80230AAC 0022682C  B0 1B 00 00 */	sth r0, 0(r27)
/* 80230AB0 00226830  38 63 5F 28 */	addi r3, r3, lbl_80525F28@l
/* 80230AB4 00226834  7F 65 DB 78 */	mr r5, r27
/* 80230AB8 00226838  38 80 00 00 */	li r4, 0
/* 80230ABC 0022683C  88 63 00 1F */	lbz r3, 0x1f(r3)
/* 80230AC0 00226840  4B FF E7 D5 */	bl GKI_send_msg
/* 80230AC4 00226844  48 00 00 30 */	b lbl_80230AF4
lbl_80230AC8:
/* 80230AC8 00226848  A0 BE 00 7E */	lhz r5, 0x7e(r30)
/* 80230ACC 0022684C  A0 1B 00 02 */	lhz r0, 2(r27)
/* 80230AD0 00226850  7C 00 28 40 */	cmplw r0, r5
/* 80230AD4 00226854  41 81 FF 28 */	bgt lbl_802309FC
lbl_80230AD8:
/* 80230AD8 00226858  A0 BB 00 02 */	lhz r5, 2(r27)
/* 80230ADC 0022685C  7C C4 33 78 */	mr r4, r6
/* 80230AE0 00226860  7F 83 E3 78 */	mr r3, r28
/* 80230AE4 00226864  7F 66 DB 78 */	mr r6, r27
/* 80230AE8 00226868  48 00 0A 59 */	bl UUSB_Write
/* 80230AEC 0022686C  7F 63 DB 78 */	mr r3, r27
/* 80230AF0 00226870  4B FF E5 F1 */	bl GKI_freebuf
lbl_80230AF4:
/* 80230AF4 00226874  39 61 00 20 */	addi r11, r1, 0x20
/* 80230AF8 00226878  48 1C 08 75 */	bl _restgpr_27
/* 80230AFC 0022687C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80230B00 00226880  7C 08 03 A6 */	mtlr r0
/* 80230B04 00226884  38 21 00 20 */	addi r1, r1, 0x20
/* 80230B08 00226888  4E 80 00 20 */	blr 

.global hcisu_h2_init
hcisu_h2_init:
/* 80230B0C 0022688C  3C C0 80 52 */	lis r6, lbl_80525F28@ha
/* 80230B10 00226890  38 00 00 00 */	li r0, 0
/* 80230B14 00226894  38 C6 5F 28 */	addi r6, r6, lbl_80525F28@l
/* 80230B18 00226898  98 06 00 1E */	stb r0, 0x1e(r6)
/* 80230B1C 0022689C  98 06 00 1A */	stb r0, 0x1a(r6)
/* 80230B20 002268A0  98 06 00 1B */	stb r0, 0x1b(r6)
/* 80230B24 002268A4  98 06 00 1C */	stb r0, 0x1c(r6)
/* 80230B28 002268A8  98 66 00 1F */	stb r3, 0x1f(r6)
/* 80230B2C 002268AC  98 86 00 20 */	stb r4, 0x20(r6)
/* 80230B30 002268B0  B0 A6 00 12 */	sth r5, 0x12(r6)
/* 80230B34 002268B4  4E 80 00 20 */	blr 

.global hcisu_h2_open
hcisu_h2_open:
/* 80230B38 002268B8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80230B3C 002268BC  7C 08 02 A6 */	mflr r0
/* 80230B40 002268C0  3C A0 80 52 */	lis r5, lbl_80525F28@ha
/* 80230B44 002268C4  90 01 00 24 */	stw r0, 0x24(r1)
/* 80230B48 002268C8  38 00 00 00 */	li r0, 0
/* 80230B4C 002268CC  38 A5 5F 28 */	addi r5, r5, lbl_80525F28@l
/* 80230B50 002268D0  98 01 00 13 */	stb r0, 0x13(r1)
/* 80230B54 002268D4  38 00 00 02 */	li r0, 2
/* 80230B58 002268D8  88 85 00 1F */	lbz r4, 0x1f(r5)
/* 80230B5C 002268DC  A0 C3 00 00 */	lhz r6, 0(r3)
/* 80230B60 002268E0  B0 C1 00 0C */	sth r6, 0xc(r1)
/* 80230B64 002268E4  A0 C3 00 02 */	lhz r6, 2(r3)
/* 80230B68 002268E8  38 61 00 08 */	addi r3, r1, 8
/* 80230B6C 002268EC  B0 C1 00 0E */	sth r6, 0xe(r1)
/* 80230B70 002268F0  B0 81 00 10 */	sth r4, 0x10(r1)
/* 80230B74 002268F4  98 05 00 1E */	stb r0, 0x1e(r5)
/* 80230B78 002268F8  48 00 06 B1 */	bl UUSB_Register
/* 80230B7C 002268FC  3C 80 80 23 */	lis r4, hcisu_h2_usb_cback@ha
/* 80230B80 00226900  38 61 00 08 */	addi r3, r1, 8
/* 80230B84 00226904  38 84 05 A4 */	addi r4, r4, hcisu_h2_usb_cback@l
/* 80230B88 00226908  48 00 08 A9 */	bl UUSB_Open
/* 80230B8C 0022690C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80230B90 00226910  38 60 00 01 */	li r3, 1
/* 80230B94 00226914  7C 08 03 A6 */	mtlr r0
/* 80230B98 00226918  38 21 00 20 */	addi r1, r1, 0x20
/* 80230B9C 0022691C  4E 80 00 20 */	blr 

.global hcisu_h2_close
hcisu_h2_close:
/* 80230BA0 00226920  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80230BA4 00226924  7C 08 02 A6 */	mflr r0
/* 80230BA8 00226928  3C 60 80 52 */	lis r3, lbl_80525F28@ha
/* 80230BAC 0022692C  90 01 00 14 */	stw r0, 0x14(r1)
/* 80230BB0 00226930  38 00 00 00 */	li r0, 0
/* 80230BB4 00226934  38 63 5F 28 */	addi r3, r3, lbl_80525F28@l
/* 80230BB8 00226938  98 03 00 1E */	stb r0, 0x1e(r3)
/* 80230BBC 0022693C  48 00 0B 99 */	bl UUSB_Close
/* 80230BC0 00226940  48 00 0C 41 */	bl UUSB_Unregister
/* 80230BC4 00226944  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80230BC8 00226948  7C 08 03 A6 */	mtlr r0
/* 80230BCC 0022694C  38 21 00 10 */	addi r1, r1, 0x10
/* 80230BD0 00226950  4E 80 00 20 */	blr 

.global hcisu_h2_send
hcisu_h2_send:
/* 80230BD4 00226954  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80230BD8 00226958  7C 08 02 A6 */	mflr r0
/* 80230BDC 0022695C  3C A0 80 52 */	lis r5, lbl_80525F28@ha
/* 80230BE0 00226960  7C 64 1B 78 */	mr r4, r3
/* 80230BE4 00226964  90 01 00 14 */	stw r0, 0x14(r1)
/* 80230BE8 00226968  38 65 5F 28 */	addi r3, r5, lbl_80525F28@l
/* 80230BEC 0022696C  4B FF FD 75 */	bl hcisu_h2_send_msg_now
/* 80230BF0 00226970  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80230BF4 00226974  38 60 00 01 */	li r3, 1
/* 80230BF8 00226978  7C 08 03 A6 */	mtlr r0
/* 80230BFC 0022697C  38 21 00 10 */	addi r1, r1, 0x10
/* 80230C00 00226980  4E 80 00 20 */	blr 

.global hcisu_h2_handle_event
hcisu_h2_handle_event:
/* 80230C04 00226984  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80230C08 00226988  7C 08 02 A6 */	mflr r0
/* 80230C0C 0022698C  3C 80 80 52 */	lis r4, lbl_80525F28@ha
/* 80230C10 00226990  90 01 00 14 */	stw r0, 0x14(r1)
/* 80230C14 00226994  38 84 5F 28 */	addi r4, r4, lbl_80525F28@l
/* 80230C18 00226998  38 03 FF F8 */	addi r0, r3, -8
/* 80230C1C 0022699C  A0 64 00 12 */	lhz r3, 0x12(r4)
/* 80230C20 002269A0  7C 03 00 50 */	subf r0, r3, r0
/* 80230C24 002269A4  54 03 04 3E */	clrlwi r3, r0, 0x10
/* 80230C28 002269A8  4B FF F9 A1 */	bl hcisu_h2_receive_msg
/* 80230C2C 002269AC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80230C30 002269B0  38 60 00 00 */	li r3, 0
/* 80230C34 002269B4  7C 08 03 A6 */	mtlr r0
/* 80230C38 002269B8  38 21 00 10 */	addi r1, r1, 0x10
/* 80230C3C 002269BC  4E 80 00 20 */	blr 

