.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global modf
modf:
/* 804008E4 003F6664  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 804008E8 003F6668  D8 21 00 08 */	stfd f1, 8(r1)
/* 804008EC 003F666C  80 A1 00 08 */	lwz r5, 8(r1)
/* 804008F0 003F6670  80 C1 00 0C */	lwz r6, 0xc(r1)
/* 804008F4 003F6674  54 A4 65 7E */	rlwinm r4, r5, 0xc, 0x15, 0x1f
/* 804008F8 003F6678  38 E4 FC 01 */	addi r7, r4, -1023
/* 804008FC 003F667C  2C 07 00 14 */	cmpwi r7, 0x14
/* 80400900 003F6680  40 80 00 70 */	bge lbl_80400970
/* 80400904 003F6684  2C 07 00 00 */	cmpwi r7, 0
/* 80400908 003F6688  40 80 00 18 */	bge lbl_80400920
/* 8040090C 003F668C  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 80400910 003F6690  38 00 00 00 */	li r0, 0
/* 80400914 003F6694  90 83 00 00 */	stw r4, 0(r3)
/* 80400918 003F6698  90 03 00 04 */	stw r0, 4(r3)
/* 8040091C 003F669C  48 00 00 BC */	b lbl_804009D8
lbl_80400920:
/* 80400920 003F66A0  3C 80 00 10 */	lis r4, 0x000FFFFF@ha
/* 80400924 003F66A4  38 04 FF FF */	addi r0, r4, 0x000FFFFF@l
/* 80400928 003F66A8  7C 04 3E 30 */	sraw r4, r0, r7
/* 8040092C 003F66AC  7C A0 20 38 */	and r0, r5, r4
/* 80400930 003F66B0  7C C0 03 79 */	or. r0, r6, r0
/* 80400934 003F66B4  40 82 00 20 */	bne lbl_80400954
/* 80400938 003F66B8  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040093C 003F66BC  38 00 00 00 */	li r0, 0
/* 80400940 003F66C0  90 81 00 08 */	stw r4, 8(r1)
/* 80400944 003F66C4  90 01 00 0C */	stw r0, 0xc(r1)
/* 80400948 003F66C8  D8 23 00 00 */	stfd f1, 0(r3)
/* 8040094C 003F66CC  C8 21 00 08 */	lfd f1, 8(r1)
/* 80400950 003F66D0  48 00 00 88 */	b lbl_804009D8
lbl_80400954:
/* 80400954 003F66D4  7C A4 20 78 */	andc r4, r5, r4
/* 80400958 003F66D8  38 00 00 00 */	li r0, 0
/* 8040095C 003F66DC  90 83 00 00 */	stw r4, 0(r3)
/* 80400960 003F66E0  90 03 00 04 */	stw r0, 4(r3)
/* 80400964 003F66E4  C8 03 00 00 */	lfd f0, 0(r3)
/* 80400968 003F66E8  FC 21 00 28 */	fsub f1, f1, f0
/* 8040096C 003F66EC  48 00 00 6C */	b lbl_804009D8
lbl_80400970:
/* 80400970 003F66F0  2C 07 00 33 */	cmpwi r7, 0x33
/* 80400974 003F66F4  40 81 00 20 */	ble lbl_80400994
/* 80400978 003F66F8  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 8040097C 003F66FC  38 00 00 00 */	li r0, 0
/* 80400980 003F6700  90 81 00 08 */	stw r4, 8(r1)
/* 80400984 003F6704  90 01 00 0C */	stw r0, 0xc(r1)
/* 80400988 003F6708  D8 23 00 00 */	stfd f1, 0(r3)
/* 8040098C 003F670C  C8 21 00 08 */	lfd f1, 8(r1)
/* 80400990 003F6710  48 00 00 48 */	b lbl_804009D8
lbl_80400994:
/* 80400994 003F6714  38 07 FF EC */	addi r0, r7, -20
/* 80400998 003F6718  38 80 FF FF */	li r4, -1
/* 8040099C 003F671C  7C 84 04 30 */	srw r4, r4, r0
/* 804009A0 003F6720  7C C0 20 39 */	and. r0, r6, r4
/* 804009A4 003F6724  40 82 00 20 */	bne lbl_804009C4
/* 804009A8 003F6728  54 A4 00 00 */	rlwinm r4, r5, 0, 0, 0
/* 804009AC 003F672C  38 00 00 00 */	li r0, 0
/* 804009B0 003F6730  90 81 00 08 */	stw r4, 8(r1)
/* 804009B4 003F6734  90 01 00 0C */	stw r0, 0xc(r1)
/* 804009B8 003F6738  D8 23 00 00 */	stfd f1, 0(r3)
/* 804009BC 003F673C  C8 21 00 08 */	lfd f1, 8(r1)
/* 804009C0 003F6740  48 00 00 18 */	b lbl_804009D8
lbl_804009C4:
/* 804009C4 003F6744  7C C0 20 78 */	andc r0, r6, r4
/* 804009C8 003F6748  90 A3 00 00 */	stw r5, 0(r3)
/* 804009CC 003F674C  90 03 00 04 */	stw r0, 4(r3)
/* 804009D0 003F6750  C8 03 00 00 */	lfd f0, 0(r3)
/* 804009D4 003F6754  FC 21 00 28 */	fsub f1, f1, f0
lbl_804009D8:
/* 804009D8 003F6758  38 21 00 10 */	addi r1, r1, 0x10
/* 804009DC 003F675C  4E 80 00 20 */	blr 

