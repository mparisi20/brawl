.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global hidd_pm_set_now
hidd_pm_set_now:
/* 802471C8 0023CF48  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802471CC 0023CF4C  7C 08 02 A6 */	mflr r0
/* 802471D0 0023CF50  3C 80 80 53 */	lis r4, lbl_8052C870@ha
/* 802471D4 0023CF54  38 A0 00 00 */	li r5, 0
/* 802471D8 0023CF58  90 01 00 24 */	stw r0, 0x24(r1)
/* 802471DC 0023CF5C  38 84 C8 70 */	addi r4, r4, lbl_8052C870@l
/* 802471E0 0023CF60  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 802471E4 0023CF64  88 04 00 6E */	lbz r0, 0x6e(r4)
/* 802471E8 0023CF68  90 A1 00 0C */	stw r5, 0xc(r1)
/* 802471EC 0023CF6C  2C 00 00 00 */	cmpwi r0, 0
/* 802471F0 0023CF70  90 A1 00 10 */	stw r5, 0x10(r1)
/* 802471F4 0023CF74  B0 A1 00 14 */	sth r5, 0x14(r1)
/* 802471F8 0023CF78  98 A1 00 08 */	stb r5, 8(r1)
/* 802471FC 0023CF7C  40 82 00 38 */	bne lbl_80247234
/* 80247200 0023CF80  88 C4 00 6A */	lbz r6, 0x6a(r4)
/* 80247204 0023CF84  88 A3 00 08 */	lbz r5, 8(r3)
/* 80247208 0023CF88  7C 05 30 40 */	cmplw r5, r6
/* 8024720C 0023CF8C  40 82 00 40 */	bne lbl_8024724C
/* 80247210 0023CF90  2C 05 00 00 */	cmpwi r5, 0
/* 80247214 0023CF94  41 82 00 20 */	beq lbl_80247234
/* 80247218 0023CF98  A0 84 00 6C */	lhz r4, 0x6c(r4)
/* 8024721C 0023CF9C  A0 03 00 02 */	lhz r0, 2(r3)
/* 80247220 0023CFA0  7C 04 00 40 */	cmplw r4, r0
/* 80247224 0023CFA4  41 80 00 28 */	blt lbl_8024724C
/* 80247228 0023CFA8  A0 03 00 00 */	lhz r0, 0(r3)
/* 8024722C 0023CFAC  7C 04 00 40 */	cmplw r4, r0
/* 80247230 0023CFB0  41 81 00 1C */	bgt lbl_8024724C
lbl_80247234:
/* 80247234 0023CFB4  3C 80 80 53 */	lis r4, lbl_8052C870@ha
/* 80247238 0023CFB8  38 00 00 FF */	li r0, 0xff
/* 8024723C 0023CFBC  38 84 C8 70 */	addi r4, r4, lbl_8052C870@l
/* 80247240 0023CFC0  38 60 00 01 */	li r3, 1
/* 80247244 0023CFC4  98 04 00 78 */	stb r0, 0x78(r4)
/* 80247248 0023CFC8  48 00 01 44 */	b lbl_8024738C
lbl_8024724C:
/* 8024724C 0023CFCC  2C 05 00 02 */	cmpwi r5, 2
/* 80247250 0023CFD0  41 82 00 80 */	beq lbl_802472D0
/* 80247254 0023CFD4  40 80 00 10 */	bge lbl_80247264
/* 80247258 0023CFD8  2C 05 00 00 */	cmpwi r5, 0
/* 8024725C 0023CFDC  41 82 00 14 */	beq lbl_80247270
/* 80247260 0023CFE0  48 00 00 E4 */	b lbl_80247344
lbl_80247264:
/* 80247264 0023CFE4  2C 05 00 04 */	cmpwi r5, 4
/* 80247268 0023CFE8  40 80 00 DC */	bge lbl_80247344
/* 8024726C 0023CFEC  48 00 00 A0 */	b lbl_8024730C
lbl_80247270:
/* 80247270 0023CFF0  28 06 00 02 */	cmplwi r6, 2
/* 80247274 0023CFF4  40 82 00 2C */	bne lbl_802472A0
/* 80247278 0023CFF8  3F E0 80 53 */	lis r31, lbl_8052C870@ha
/* 8024727C 0023CFFC  38 A1 00 0C */	addi r5, r1, 0xc
/* 80247280 0023D000  38 9F C8 70 */	addi r4, r31, lbl_8052C870@l
/* 80247284 0023D004  38 60 00 80 */	li r3, 0x80
/* 80247288 0023D008  4B FF 66 F5 */	bl BTM_SetPowerMode
/* 8024728C 0023D00C  38 9F C8 70 */	addi r4, r31, -14224
/* 80247290 0023D010  38 00 00 01 */	li r0, 1
/* 80247294 0023D014  98 61 00 08 */	stb r3, 8(r1)
/* 80247298 0023D018  98 04 00 6E */	stb r0, 0x6e(r4)
/* 8024729C 0023D01C  48 00 00 A8 */	b lbl_80247344
lbl_802472A0:
/* 802472A0 0023D020  28 06 00 03 */	cmplwi r6, 3
/* 802472A4 0023D024  40 82 00 A0 */	bne lbl_80247344
/* 802472A8 0023D028  3F E0 80 53 */	lis r31, lbl_8052C870@ha
/* 802472AC 0023D02C  38 A1 00 0C */	addi r5, r1, 0xc
/* 802472B0 0023D030  38 9F C8 70 */	addi r4, r31, lbl_8052C870@l
/* 802472B4 0023D034  38 60 00 80 */	li r3, 0x80
/* 802472B8 0023D038  4B FF 66 C5 */	bl BTM_SetPowerMode
/* 802472BC 0023D03C  38 9F C8 70 */	addi r4, r31, -14224
/* 802472C0 0023D040  38 00 00 01 */	li r0, 1
/* 802472C4 0023D044  98 61 00 08 */	stb r3, 8(r1)
/* 802472C8 0023D048  98 04 00 6E */	stb r0, 0x6e(r4)
/* 802472CC 0023D04C  48 00 00 78 */	b lbl_80247344
lbl_802472D0:
/* 802472D0 0023D050  2C 06 00 00 */	cmpwi r6, 0
/* 802472D4 0023D054  41 82 00 10 */	beq lbl_802472E4
/* 802472D8 0023D058  38 61 00 0C */	addi r3, r1, 0xc
/* 802472DC 0023D05C  4B FF FE ED */	bl hidd_pm_set_now
/* 802472E0 0023D060  48 00 00 64 */	b lbl_80247344
lbl_802472E4:
/* 802472E4 0023D064  3F E0 80 53 */	lis r31, lbl_8052C870@ha
/* 802472E8 0023D068  7C 65 1B 78 */	mr r5, r3
/* 802472EC 0023D06C  38 9F C8 70 */	addi r4, r31, lbl_8052C870@l
/* 802472F0 0023D070  38 60 00 80 */	li r3, 0x80
/* 802472F4 0023D074  4B FF 66 89 */	bl BTM_SetPowerMode
/* 802472F8 0023D078  38 9F C8 70 */	addi r4, r31, -14224
/* 802472FC 0023D07C  38 00 00 01 */	li r0, 1
/* 80247300 0023D080  98 61 00 08 */	stb r3, 8(r1)
/* 80247304 0023D084  98 04 00 6E */	stb r0, 0x6e(r4)
/* 80247308 0023D088  48 00 00 3C */	b lbl_80247344
lbl_8024730C:
/* 8024730C 0023D08C  2C 06 00 00 */	cmpwi r6, 0
/* 80247310 0023D090  41 82 00 10 */	beq lbl_80247320
/* 80247314 0023D094  38 61 00 0C */	addi r3, r1, 0xc
/* 80247318 0023D098  4B FF FE B1 */	bl hidd_pm_set_now
/* 8024731C 0023D09C  48 00 00 28 */	b lbl_80247344
lbl_80247320:
/* 80247320 0023D0A0  3F E0 80 53 */	lis r31, lbl_8052C870@ha
/* 80247324 0023D0A4  7C 65 1B 78 */	mr r5, r3
/* 80247328 0023D0A8  38 9F C8 70 */	addi r4, r31, lbl_8052C870@l
/* 8024732C 0023D0AC  38 60 00 80 */	li r3, 0x80
/* 80247330 0023D0B0  4B FF 66 4D */	bl BTM_SetPowerMode
/* 80247334 0023D0B4  38 9F C8 70 */	addi r4, r31, -14224
/* 80247338 0023D0B8  38 00 00 01 */	li r0, 1
/* 8024733C 0023D0BC  98 61 00 08 */	stb r3, 8(r1)
/* 80247340 0023D0C0  98 04 00 6E */	stb r0, 0x6e(r4)
lbl_80247344:
/* 80247344 0023D0C4  88 81 00 08 */	lbz r4, 8(r1)
/* 80247348 0023D0C8  28 04 00 01 */	cmplwi r4, 1
/* 8024734C 0023D0CC  41 81 00 0C */	bgt lbl_80247358
/* 80247350 0023D0D0  38 60 00 01 */	li r3, 1
/* 80247354 0023D0D4  48 00 00 38 */	b lbl_8024738C
lbl_80247358:
/* 80247358 0023D0D8  3C 60 80 53 */	lis r3, lbl_8052C870@ha
/* 8024735C 0023D0DC  38 04 00 37 */	addi r0, r4, 0x37
/* 80247360 0023D0E0  38 63 C8 70 */	addi r3, r3, lbl_8052C870@l
/* 80247364 0023D0E4  98 01 00 08 */	stb r0, 8(r1)
/* 80247368 0023D0E8  81 83 00 C4 */	lwz r12, 0xc4(r3)
/* 8024736C 0023D0EC  2C 0C 00 00 */	cmpwi r12, 0
/* 80247370 0023D0F0  41 82 00 18 */	beq lbl_80247388
/* 80247374 0023D0F4  88 83 00 6F */	lbz r4, 0x6f(r3)
/* 80247378 0023D0F8  38 A1 00 08 */	addi r5, r1, 8
/* 8024737C 0023D0FC  38 60 00 04 */	li r3, 4
/* 80247380 0023D100  7D 89 03 A6 */	mtctr r12
/* 80247384 0023D104  4E 80 04 21 */	bctrl 
lbl_80247388:
/* 80247388 0023D108  38 60 00 00 */	li r3, 0
lbl_8024738C:
/* 8024738C 0023D10C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80247390 0023D110  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80247394 0023D114  7C 08 03 A6 */	mtlr r0
/* 80247398 0023D118  38 21 00 20 */	addi r1, r1, 0x20
/* 8024739C 0023D11C  4E 80 00 20 */	blr 

.global hidd_pm_proc_mode_change
hidd_pm_proc_mode_change:
/* 802473A0 0023D120  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802473A4 0023D124  7C 08 02 A6 */	mflr r0
/* 802473A8 0023D128  90 01 00 24 */	stw r0, 0x24(r1)
/* 802473AC 0023D12C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 802473B0 0023D130  93 C1 00 18 */	stw r30, 0x18(r1)
/* 802473B4 0023D134  3F C0 80 53 */	lis r30, lbl_8052C870@ha
/* 802473B8 0023D138  3B DE C8 70 */	addi r30, r30, lbl_8052C870@l
/* 802473BC 0023D13C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 802473C0 0023D140  7C 9D 23 78 */	mr r29, r4
/* 802473C4 0023D144  88 1E 01 40 */	lbz r0, 0x140(r30)
/* 802473C8 0023D148  98 61 00 08 */	stb r3, 8(r1)
/* 802473CC 0023D14C  2C 00 00 00 */	cmpwi r0, 0
/* 802473D0 0023D150  B0 A1 00 0A */	sth r5, 0xa(r1)
/* 802473D4 0023D154  41 82 01 08 */	beq lbl_802474DC
/* 802473D8 0023D158  3B E0 00 00 */	li r31, 0
/* 802473DC 0023D15C  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 802473E0 0023D160  9B FE 00 6E */	stb r31, 0x6e(r30)
/* 802473E4 0023D164  41 82 00 28 */	beq lbl_8024740C
/* 802473E8 0023D168  81 9E 00 C4 */	lwz r12, 0xc4(r30)
/* 802473EC 0023D16C  2C 0C 00 00 */	cmpwi r12, 0
/* 802473F0 0023D170  41 82 00 EC */	beq lbl_802474DC
/* 802473F4 0023D174  38 A1 00 08 */	addi r5, r1, 8
/* 802473F8 0023D178  88 9E 00 6F */	lbz r4, 0x6f(r30)
/* 802473FC 0023D17C  38 60 00 04 */	li r3, 4
/* 80247400 0023D180  7D 89 03 A6 */	mtctr r12
/* 80247404 0023D184  4E 80 04 21 */	bctrl 
/* 80247408 0023D188  48 00 00 D4 */	b lbl_802474DC
lbl_8024740C:
/* 8024740C 0023D18C  88 1E 00 78 */	lbz r0, 0x78(r30)
/* 80247410 0023D190  54 A3 04 3E */	clrlwi r3, r5, 0x10
/* 80247414 0023D194  98 9E 00 6A */	stb r4, 0x6a(r30)
/* 80247418 0023D198  28 00 00 FF */	cmplwi r0, 0xff
/* 8024741C 0023D19C  B0 BE 00 6C */	sth r5, 0x6c(r30)
/* 80247420 0023D1A0  41 82 00 54 */	beq lbl_80247474
/* 80247424 0023D1A4  7C 00 20 40 */	cmplw r0, r4
/* 80247428 0023D1A8  40 82 00 24 */	bne lbl_8024744C
/* 8024742C 0023D1AC  2C 00 00 00 */	cmpwi r0, 0
/* 80247430 0023D1B0  41 82 00 30 */	beq lbl_80247460
/* 80247434 0023D1B4  A0 1E 00 72 */	lhz r0, 0x72(r30)
/* 80247438 0023D1B8  7C 03 00 40 */	cmplw r3, r0
/* 8024743C 0023D1BC  41 80 00 10 */	blt lbl_8024744C
/* 80247440 0023D1C0  A0 1E 00 70 */	lhz r0, 0x70(r30)
/* 80247444 0023D1C4  7C 03 00 40 */	cmplw r3, r0
/* 80247448 0023D1C8  40 81 00 18 */	ble lbl_80247460
lbl_8024744C:
/* 8024744C 0023D1CC  3C 60 80 53 */	lis r3, lbl_8052C870@ha
/* 80247450 0023D1D0  38 63 C8 70 */	addi r3, r3, lbl_8052C870@l
/* 80247454 0023D1D4  38 63 00 70 */	addi r3, r3, 0x70
/* 80247458 0023D1D8  4B FF FD 71 */	bl hidd_pm_set_now
/* 8024745C 0023D1DC  48 00 00 58 */	b lbl_802474B4
lbl_80247460:
/* 80247460 0023D1E0  3C 60 80 53 */	lis r3, lbl_8052C870@ha
/* 80247464 0023D1E4  38 00 00 FF */	li r0, 0xff
/* 80247468 0023D1E8  38 63 C8 70 */	addi r3, r3, lbl_8052C870@l
/* 8024746C 0023D1EC  98 03 00 78 */	stb r0, 0x78(r3)
/* 80247470 0023D1F0  48 00 00 44 */	b lbl_802474B4
lbl_80247474:
/* 80247474 0023D1F4  2C 04 00 00 */	cmpwi r4, 0
/* 80247478 0023D1F8  40 82 00 3C */	bne lbl_802474B4
/* 8024747C 0023D1FC  38 7E 00 70 */	addi r3, r30, 0x70
/* 80247480 0023D200  38 9E 00 4C */	addi r4, r30, 0x4c
/* 80247484 0023D204  38 A0 00 0A */	li r5, 0xa
/* 80247488 0023D208  4B DB CE B1 */	bl func_80004338
/* 8024748C 0023D20C  38 7E 00 4C */	addi r3, r30, 0x4c
/* 80247490 0023D210  4B FF FD 39 */	bl hidd_pm_set_now
/* 80247494 0023D214  3C 60 80 24 */	lis r3, hidd_pm_inact_timeout@ha
/* 80247498 0023D218  9B FE 00 6F */	stb r31, 0x6f(r30)
/* 8024749C 0023D21C  38 63 74 F8 */	addi r3, r3, hidd_pm_inact_timeout@l
/* 802474A0 0023D220  38 80 00 16 */	li r4, 0x16
/* 802474A4 0023D224  90 7E 00 44 */	stw r3, 0x44(r30)
/* 802474A8 0023D228  38 7E 00 34 */	addi r3, r30, 0x34
/* 802474AC 0023D22C  38 A0 00 3C */	li r5, 0x3c
/* 802474B0 0023D230  4B FE AB 01 */	bl btu_start_timer
lbl_802474B4:
/* 802474B4 0023D234  3C 60 80 53 */	lis r3, lbl_8052C870@ha
/* 802474B8 0023D238  38 63 C8 70 */	addi r3, r3, lbl_8052C870@l
/* 802474BC 0023D23C  81 83 00 C4 */	lwz r12, 0xc4(r3)
/* 802474C0 0023D240  2C 0C 00 00 */	cmpwi r12, 0
/* 802474C4 0023D244  41 82 00 18 */	beq lbl_802474DC
/* 802474C8 0023D248  7F A4 EB 78 */	mr r4, r29
/* 802474CC 0023D24C  38 A1 00 0A */	addi r5, r1, 0xa
/* 802474D0 0023D250  38 60 00 03 */	li r3, 3
/* 802474D4 0023D254  7D 89 03 A6 */	mtctr r12
/* 802474D8 0023D258  4E 80 04 21 */	bctrl 
lbl_802474DC:
/* 802474DC 0023D25C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 802474E0 0023D260  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 802474E4 0023D264  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 802474E8 0023D268  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 802474EC 0023D26C  7C 08 03 A6 */	mtlr r0
/* 802474F0 0023D270  38 21 00 20 */	addi r1, r1, 0x20
/* 802474F4 0023D274  4E 80 00 20 */	blr 

.global hidd_pm_inact_timeout
hidd_pm_inact_timeout:
/* 802474F8 0023D278  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802474FC 0023D27C  7C 08 02 A6 */	mflr r0
/* 80247500 0023D280  38 A0 00 0A */	li r5, 0xa
/* 80247504 0023D284  90 01 00 14 */	stw r0, 0x14(r1)
/* 80247508 0023D288  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8024750C 0023D28C  3F E0 80 53 */	lis r31, lbl_8052C870@ha
/* 80247510 0023D290  3B FF C8 70 */	addi r31, r31, lbl_8052C870@l
/* 80247514 0023D294  38 7F 00 70 */	addi r3, r31, 0x70
/* 80247518 0023D298  38 9F 00 56 */	addi r4, r31, 0x56
/* 8024751C 0023D29C  4B DB CE 1D */	bl func_80004338
/* 80247520 0023D2A0  38 7F 00 56 */	addi r3, r31, 0x56
/* 80247524 0023D2A4  4B FF FC A5 */	bl hidd_pm_set_now
/* 80247528 0023D2A8  38 00 00 01 */	li r0, 1
/* 8024752C 0023D2AC  98 1F 00 6F */	stb r0, 0x6f(r31)
/* 80247530 0023D2B0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80247534 0023D2B4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80247538 0023D2B8  7C 08 03 A6 */	mtlr r0
/* 8024753C 0023D2BC  38 21 00 10 */	addi r1, r1, 0x10
/* 80247540 0023D2C0  4E 80 00 20 */	blr 

