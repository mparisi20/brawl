.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global PFSEC_ReadFAT
PFSEC_ReadFAT:
/* 803E8DC0 003DEB40  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803E8DC4 003DEB44  7C 08 02 A6 */	mflr r0
/* 803E8DC8 003DEB48  90 01 00 34 */	stw r0, 0x34(r1)
/* 803E8DCC 003DEB4C  39 61 00 30 */	addi r11, r1, 0x30
/* 803E8DD0 003DEB50  48 00 85 51 */	bl _savegpr_27
/* 803E8DD4 003DEB54  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803E8DD8 003DEB58  7C 7B 1B 78 */	mr r27, r3
/* 803E8DDC 003DEB5C  7C 9C 23 78 */	mr r28, r4
/* 803E8DE0 003DEB60  7C BD 2B 78 */	mr r29, r5
/* 803E8DE4 003DEB64  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803E8DE8 003DEB68  7C DE 33 78 */	mr r30, r6
/* 803E8DEC 003DEB6C  7C FF 3B 78 */	mr r31, r7
/* 803E8DF0 003DEB70  41 82 00 10 */	beq lbl_803E8E00
/* 803E8DF4 003DEB74  4B FE DF 71 */	bl PFDRV_IsInserted
/* 803E8DF8 003DEB78  2C 03 00 00 */	cmpwi r3, 0
/* 803E8DFC 003DEB7C  40 82 00 0C */	bne lbl_803E8E08
lbl_803E8E00:
/* 803E8E00 003DEB80  38 60 00 09 */	li r3, 9
/* 803E8E04 003DEB84  48 00 00 68 */	b lbl_803E8E6C
lbl_803E8E08:
/* 803E8E08 003DEB88  80 1B 00 08 */	lwz r0, 8(r27)
/* 803E8E0C 003DEB8C  7C 1D 00 40 */	cmplw r29, r0
/* 803E8E10 003DEB90  40 80 00 1C */	bge lbl_803E8E2C
/* 803E8E14 003DEB94  A0 7B 00 00 */	lhz r3, 0(r27)
/* 803E8E18 003DEB98  7C 1E 18 40 */	cmplw r30, r3
/* 803E8E1C 003DEB9C  40 80 00 10 */	bge lbl_803E8E2C
/* 803E8E20 003DEBA0  7C 1E FA 14 */	add r0, r30, r31
/* 803E8E24 003DEBA4  7C 00 18 00 */	cmpw r0, r3
/* 803E8E28 003DEBA8  40 81 00 0C */	ble lbl_803E8E34
lbl_803E8E2C:
/* 803E8E2C 003DEBAC  38 60 00 0A */	li r3, 0xa
/* 803E8E30 003DEBB0  48 00 00 3C */	b lbl_803E8E6C
lbl_803E8E34:
/* 803E8E34 003DEBB4  7F 63 DB 78 */	mr r3, r27
/* 803E8E38 003DEBB8  7F A4 EB 78 */	mr r4, r29
/* 803E8E3C 003DEBBC  38 A1 00 08 */	addi r5, r1, 8
/* 803E8E40 003DEBC0  4B FF 17 AD */	bl PFCACHE_ReadFATPage
/* 803E8E44 003DEBC4  2C 03 00 00 */	cmpwi r3, 0
/* 803E8E48 003DEBC8  41 82 00 08 */	beq lbl_803E8E50
/* 803E8E4C 003DEBCC  48 00 00 20 */	b lbl_803E8E6C
lbl_803E8E50:
/* 803E8E50 003DEBD0  80 81 00 08 */	lwz r4, 8(r1)
/* 803E8E54 003DEBD4  7F 83 E3 78 */	mr r3, r28
/* 803E8E58 003DEBD8  7F E5 FB 78 */	mr r5, r31
/* 803E8E5C 003DEBDC  80 04 00 08 */	lwz r0, 8(r4)
/* 803E8E60 003DEBE0  7C 80 F2 14 */	add r4, r0, r30
/* 803E8E64 003DEBE4  4B FE D3 C1 */	bl pf_memcpy
/* 803E8E68 003DEBE8  38 60 00 00 */	li r3, 0
lbl_803E8E6C:
/* 803E8E6C 003DEBEC  39 61 00 30 */	addi r11, r1, 0x30
/* 803E8E70 003DEBF0  48 00 84 FD */	bl _restgpr_27
/* 803E8E74 003DEBF4  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803E8E78 003DEBF8  7C 08 03 A6 */	mtlr r0
/* 803E8E7C 003DEBFC  38 21 00 30 */	addi r1, r1, 0x30
/* 803E8E80 003DEC00  4E 80 00 20 */	blr 

.global PFSEC_ReadData
PFSEC_ReadData:
/* 803E8E84 003DEC04  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803E8E88 003DEC08  7C 08 02 A6 */	mflr r0
/* 803E8E8C 003DEC0C  90 01 00 34 */	stw r0, 0x34(r1)
/* 803E8E90 003DEC10  39 61 00 30 */	addi r11, r1, 0x30
/* 803E8E94 003DEC14  48 00 84 85 */	bl _savegpr_25
/* 803E8E98 003DEC18  38 00 00 00 */	li r0, 0
/* 803E8E9C 003DEC1C  7C 7A 1B 78 */	mr r26, r3
/* 803E8EA0 003DEC20  90 08 00 00 */	stw r0, 0(r8)
/* 803E8EA4 003DEC24  7C 9B 23 78 */	mr r27, r4
/* 803E8EA8 003DEC28  7C BC 2B 78 */	mr r28, r5
/* 803E8EAC 003DEC2C  7C D9 33 78 */	mr r25, r6
/* 803E8EB0 003DEC30  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803E8EB4 003DEC34  7C FF 3B 78 */	mr r31, r7
/* 803E8EB8 003DEC38  7D 1D 43 78 */	mr r29, r8
/* 803E8EBC 003DEC3C  7D 3E 4B 78 */	mr r30, r9
/* 803E8EC0 003DEC40  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803E8EC4 003DEC44  41 82 00 10 */	beq lbl_803E8ED4
/* 803E8EC8 003DEC48  4B FE DE 9D */	bl PFDRV_IsInserted
/* 803E8ECC 003DEC4C  2C 03 00 00 */	cmpwi r3, 0
/* 803E8ED0 003DEC50  40 82 00 0C */	bne lbl_803E8EDC
lbl_803E8ED4:
/* 803E8ED4 003DEC54  38 60 00 09 */	li r3, 9
/* 803E8ED8 003DEC58  48 00 02 88 */	b lbl_803E9160
lbl_803E8EDC:
/* 803E8EDC 003DEC5C  80 1A 00 08 */	lwz r0, 8(r26)
/* 803E8EE0 003DEC60  7C 1C 00 40 */	cmplw r28, r0
/* 803E8EE4 003DEC64  40 80 00 1C */	bge lbl_803E8F00
/* 803E8EE8 003DEC68  A0 7A 00 00 */	lhz r3, 0(r26)
/* 803E8EEC 003DEC6C  7C 19 18 40 */	cmplw r25, r3
/* 803E8EF0 003DEC70  40 80 00 10 */	bge lbl_803E8F00
/* 803E8EF4 003DEC74  7C 19 FA 14 */	add r0, r25, r31
/* 803E8EF8 003DEC78  7C 00 18 40 */	cmplw r0, r3
/* 803E8EFC 003DEC7C  40 81 00 14 */	ble lbl_803E8F10
lbl_803E8F00:
/* 803E8F00 003DEC80  2C 19 00 00 */	cmpwi r25, 0
/* 803E8F04 003DEC84  41 82 00 0C */	beq lbl_803E8F10
/* 803E8F08 003DEC88  38 60 00 0A */	li r3, 0xa
/* 803E8F0C 003DEC8C  48 00 02 54 */	b lbl_803E9160
lbl_803E8F10:
/* 803E8F10 003DEC90  2C 99 00 00 */	cmpwi cr1, r25, 0
/* 803E8F14 003DEC94  40 86 00 10 */	bne cr1, lbl_803E8F24
/* 803E8F18 003DEC98  A0 7A 00 00 */	lhz r3, 0(r26)
/* 803E8F1C 003DEC9C  7C 1F 18 40 */	cmplw r31, r3
/* 803E8F20 003DECA0  40 80 00 44 */	bge lbl_803E8F64
lbl_803E8F24:
/* 803E8F24 003DECA4  7F 43 D3 78 */	mr r3, r26
/* 803E8F28 003DECA8  7F 84 E3 78 */	mr r4, r28
/* 803E8F2C 003DECAC  7F C6 F3 78 */	mr r6, r30
/* 803E8F30 003DECB0  38 A1 00 0C */	addi r5, r1, 0xc
/* 803E8F34 003DECB4  4B FF 16 F9 */	bl PFCACHE_ReadDataPage
/* 803E8F38 003DECB8  2C 03 00 00 */	cmpwi r3, 0
/* 803E8F3C 003DECBC  41 82 00 08 */	beq lbl_803E8F44
/* 803E8F40 003DECC0  48 00 02 20 */	b lbl_803E9160
lbl_803E8F44:
/* 803E8F44 003DECC4  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803E8F48 003DECC8  7F 63 DB 78 */	mr r3, r27
/* 803E8F4C 003DECCC  7F E5 FB 78 */	mr r5, r31
/* 803E8F50 003DECD0  80 04 00 08 */	lwz r0, 8(r4)
/* 803E8F54 003DECD4  7C 80 CA 14 */	add r4, r0, r25
/* 803E8F58 003DECD8  4B FE D2 CD */	bl pf_memcpy
/* 803E8F5C 003DECDC  93 FD 00 00 */	stw r31, 0(r29)
/* 803E8F60 003DECE0  48 00 01 FC */	b lbl_803E915C
lbl_803E8F64:
/* 803E8F64 003DECE4  40 86 00 6C */	bne cr1, lbl_803E8FD0
/* 803E8F68 003DECE8  38 03 FF FF */	addi r0, r3, -1
/* 803E8F6C 003DECEC  7F E0 00 39 */	and. r0, r31, r0
/* 803E8F70 003DECF0  40 82 00 60 */	bne lbl_803E8FD0
/* 803E8F74 003DECF4  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E8F78 003DECF8  7F 43 D3 78 */	mr r3, r26
/* 803E8F7C 003DECFC  7F 64 DB 78 */	mr r4, r27
/* 803E8F80 003DED00  7F 85 E3 78 */	mr r5, r28
/* 803E8F84 003DED04  7F E6 04 30 */	srw r6, r31, r0
/* 803E8F88 003DED08  38 E1 00 08 */	addi r7, r1, 8
/* 803E8F8C 003DED0C  4B FF 17 31 */	bl PFCACHE_ReadDataNumSector
/* 803E8F90 003DED10  2C 03 00 00 */	cmpwi r3, 0
/* 803E8F94 003DED14  41 82 00 08 */	beq lbl_803E8F9C
/* 803E8F98 003DED18  48 00 01 C8 */	b lbl_803E9160
lbl_803E8F9C:
/* 803E8F9C 003DED1C  80 61 00 08 */	lwz r3, 8(r1)
/* 803E8FA0 003DED20  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E8FA4 003DED24  80 9D 00 00 */	lwz r4, 0(r29)
/* 803E8FA8 003DED28  7C 60 00 30 */	slw r0, r3, r0
/* 803E8FAC 003DED2C  7C 04 02 14 */	add r0, r4, r0
/* 803E8FB0 003DED30  90 1D 00 00 */	stw r0, 0(r29)
/* 803E8FB4 003DED34  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E8FB8 003DED38  80 61 00 08 */	lwz r3, 8(r1)
/* 803E8FBC 003DED3C  7F E0 04 30 */	srw r0, r31, r0
/* 803E8FC0 003DED40  7C 03 00 40 */	cmplw r3, r0
/* 803E8FC4 003DED44  41 82 01 98 */	beq lbl_803E915C
/* 803E8FC8 003DED48  38 60 00 11 */	li r3, 0x11
/* 803E8FCC 003DED4C  48 00 01 94 */	b lbl_803E9160
lbl_803E8FD0:
/* 803E8FD0 003DED50  2C 19 00 00 */	cmpwi r25, 0
/* 803E8FD4 003DED54  40 82 01 80 */	bne lbl_803E9154
/* 803E8FD8 003DED58  7F 43 D3 78 */	mr r3, r26
/* 803E8FDC 003DED5C  7F 84 E3 78 */	mr r4, r28
/* 803E8FE0 003DED60  4B FF 18 65 */	bl PFCACHE_SearchDataCache
/* 803E8FE4 003DED64  2C 03 00 00 */	cmpwi r3, 0
/* 803E8FE8 003DED68  90 61 00 0C */	stw r3, 0xc(r1)
/* 803E8FEC 003DED6C  41 82 00 80 */	beq lbl_803E906C
/* 803E8FF0 003DED70  80 83 00 18 */	lwz r4, 0x18(r3)
/* 803E8FF4 003DED74  80 03 00 14 */	lwz r0, 0x14(r3)
/* 803E8FF8 003DED78  88 BA 00 20 */	lbz r5, 0x20(r26)
/* 803E8FFC 003DED7C  7C 04 02 14 */	add r0, r4, r0
/* 803E9000 003DED80  7F 3C 00 50 */	subf r25, r28, r0
/* 803E9004 003DED84  7F E0 2C 30 */	srw r0, r31, r5
/* 803E9008 003DED88  7C 19 00 40 */	cmplw r25, r0
/* 803E900C 003DED8C  41 81 00 3C */	bgt lbl_803E9048
/* 803E9010 003DED90  80 83 00 08 */	lwz r4, 8(r3)
/* 803E9014 003DED94  7F 63 DB 78 */	mr r3, r27
/* 803E9018 003DED98  7F 25 28 30 */	slw r5, r25, r5
/* 803E901C 003DED9C  4B FE D2 09 */	bl pf_memcpy
/* 803E9020 003DEDA0  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E9024 003DEDA4  7F 9C CA 14 */	add r28, r28, r25
/* 803E9028 003DEDA8  80 7D 00 00 */	lwz r3, 0(r29)
/* 803E902C 003DEDAC  7F 20 00 30 */	slw r0, r25, r0
/* 803E9030 003DEDB0  7C 03 02 14 */	add r0, r3, r0
/* 803E9034 003DEDB4  90 1D 00 00 */	stw r0, 0(r29)
/* 803E9038 003DEDB8  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E903C 003DEDBC  7F 20 00 30 */	slw r0, r25, r0
/* 803E9040 003DEDC0  7F E0 F8 50 */	subf r31, r0, r31
/* 803E9044 003DEDC4  48 00 00 28 */	b lbl_803E906C
lbl_803E9048:
/* 803E9048 003DEDC8  40 81 00 24 */	ble lbl_803E906C
/* 803E904C 003DEDCC  80 83 00 08 */	lwz r4, 8(r3)
/* 803E9050 003DEDD0  7F 63 DB 78 */	mr r3, r27
/* 803E9054 003DEDD4  7F E5 FB 78 */	mr r5, r31
/* 803E9058 003DEDD8  4B FE D1 CD */	bl pf_memcpy
/* 803E905C 003DEDDC  80 1D 00 00 */	lwz r0, 0(r29)
/* 803E9060 003DEDE0  7C 00 FA 14 */	add r0, r0, r31
/* 803E9064 003DEDE4  3B E0 00 00 */	li r31, 0
/* 803E9068 003DEDE8  90 1D 00 00 */	stw r0, 0(r29)
lbl_803E906C:
/* 803E906C 003DEDEC  2C 1F 00 00 */	cmpwi r31, 0
/* 803E9070 003DEDF0  41 82 00 EC */	beq lbl_803E915C
/* 803E9074 003DEDF4  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E9078 003DEDF8  80 7A 16 40 */	lwz r3, 0x1640(r26)
/* 803E907C 003DEDFC  7F FF 04 30 */	srw r31, r31, r0
/* 803E9080 003DEE00  7C 9C FA 14 */	add r4, r28, r31
/* 803E9084 003DEE04  7C 04 1B 96 */	divwu r0, r4, r3
/* 803E9088 003DEE08  7C 00 19 D6 */	mullw r0, r0, r3
/* 803E908C 003DEE0C  7C 60 20 50 */	subf r3, r0, r4
/* 803E9090 003DEE10  7C 1F 18 40 */	cmplw r31, r3
/* 803E9094 003DEE14  40 81 00 64 */	ble lbl_803E90F8
/* 803E9098 003DEE18  80 1D 00 00 */	lwz r0, 0(r29)
/* 803E909C 003DEE1C  7F 23 F8 50 */	subf r25, r3, r31
/* 803E90A0 003DEE20  7F 43 D3 78 */	mr r3, r26
/* 803E90A4 003DEE24  7F 85 E3 78 */	mr r5, r28
/* 803E90A8 003DEE28  7F 26 CB 78 */	mr r6, r25
/* 803E90AC 003DEE2C  7C 9B 02 14 */	add r4, r27, r0
/* 803E90B0 003DEE30  38 E1 00 08 */	addi r7, r1, 8
/* 803E90B4 003DEE34  4B FF 16 09 */	bl PFCACHE_ReadDataNumSector
/* 803E90B8 003DEE38  2C 03 00 00 */	cmpwi r3, 0
/* 803E90BC 003DEE3C  41 82 00 08 */	beq lbl_803E90C4
/* 803E90C0 003DEE40  48 00 00 A0 */	b lbl_803E9160
lbl_803E90C4:
/* 803E90C4 003DEE44  80 61 00 08 */	lwz r3, 8(r1)
/* 803E90C8 003DEE48  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E90CC 003DEE4C  80 9D 00 00 */	lwz r4, 0(r29)
/* 803E90D0 003DEE50  7C 60 00 30 */	slw r0, r3, r0
/* 803E90D4 003DEE54  7C 04 02 14 */	add r0, r4, r0
/* 803E90D8 003DEE58  90 1D 00 00 */	stw r0, 0(r29)
/* 803E90DC 003DEE5C  80 01 00 08 */	lwz r0, 8(r1)
/* 803E90E0 003DEE60  7C 00 C8 40 */	cmplw r0, r25
/* 803E90E4 003DEE64  41 82 00 0C */	beq lbl_803E90F0
/* 803E90E8 003DEE68  38 60 00 11 */	li r3, 0x11
/* 803E90EC 003DEE6C  48 00 00 74 */	b lbl_803E9160
lbl_803E90F0:
/* 803E90F0 003DEE70  7F 9C CA 14 */	add r28, r28, r25
/* 803E90F4 003DEE74  7F F9 F8 50 */	subf r31, r25, r31
lbl_803E90F8:
/* 803E90F8 003DEE78  2C 1F 00 00 */	cmpwi r31, 0
/* 803E90FC 003DEE7C  41 82 00 60 */	beq lbl_803E915C
/* 803E9100 003DEE80  7F 43 D3 78 */	mr r3, r26
/* 803E9104 003DEE84  7F 84 E3 78 */	mr r4, r28
/* 803E9108 003DEE88  7F C6 F3 78 */	mr r6, r30
/* 803E910C 003DEE8C  38 A1 00 0C */	addi r5, r1, 0xc
/* 803E9110 003DEE90  4B FF 15 1D */	bl PFCACHE_ReadDataPage
/* 803E9114 003DEE94  2C 03 00 00 */	cmpwi r3, 0
/* 803E9118 003DEE98  41 82 00 08 */	beq lbl_803E9120
/* 803E911C 003DEE9C  48 00 00 44 */	b lbl_803E9160
lbl_803E9120:
/* 803E9120 003DEEA0  80 61 00 0C */	lwz r3, 0xc(r1)
/* 803E9124 003DEEA4  80 BD 00 00 */	lwz r5, 0(r29)
/* 803E9128 003DEEA8  80 83 00 08 */	lwz r4, 8(r3)
/* 803E912C 003DEEAC  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E9130 003DEEB0  7C 7B 2A 14 */	add r3, r27, r5
/* 803E9134 003DEEB4  7F E5 00 30 */	slw r5, r31, r0
/* 803E9138 003DEEB8  4B FE D0 ED */	bl pf_memcpy
/* 803E913C 003DEEBC  88 1A 00 20 */	lbz r0, 0x20(r26)
/* 803E9140 003DEEC0  80 7D 00 00 */	lwz r3, 0(r29)
/* 803E9144 003DEEC4  7F E0 00 30 */	slw r0, r31, r0
/* 803E9148 003DEEC8  7C 03 02 14 */	add r0, r3, r0
/* 803E914C 003DEECC  90 1D 00 00 */	stw r0, 0(r29)
/* 803E9150 003DEED0  48 00 00 0C */	b lbl_803E915C
lbl_803E9154:
/* 803E9154 003DEED4  38 60 00 0A */	li r3, 0xa
/* 803E9158 003DEED8  48 00 00 08 */	b lbl_803E9160
lbl_803E915C:
/* 803E915C 003DEEDC  38 60 00 00 */	li r3, 0
lbl_803E9160:
/* 803E9160 003DEEE0  39 61 00 30 */	addi r11, r1, 0x30
/* 803E9164 003DEEE4  48 00 82 01 */	bl _restgpr_25
/* 803E9168 003DEEE8  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803E916C 003DEEEC  7C 08 03 A6 */	mtlr r0
/* 803E9170 003DEEF0  38 21 00 30 */	addi r1, r1, 0x30
/* 803E9174 003DEEF4  4E 80 00 20 */	blr 

.global PFSEC_WriteFAT
PFSEC_WriteFAT:
/* 803E9178 003DEEF8  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803E917C 003DEEFC  7C 08 02 A6 */	mflr r0
/* 803E9180 003DEF00  90 01 00 34 */	stw r0, 0x34(r1)
/* 803E9184 003DEF04  39 61 00 30 */	addi r11, r1, 0x30
/* 803E9188 003DEF08  48 00 81 99 */	bl _savegpr_27
/* 803E918C 003DEF0C  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803E9190 003DEF10  7C 7B 1B 78 */	mr r27, r3
/* 803E9194 003DEF14  7C 9C 23 78 */	mr r28, r4
/* 803E9198 003DEF18  7C BD 2B 78 */	mr r29, r5
/* 803E919C 003DEF1C  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803E91A0 003DEF20  7C DE 33 78 */	mr r30, r6
/* 803E91A4 003DEF24  7C FF 3B 78 */	mr r31, r7
/* 803E91A8 003DEF28  41 82 00 1C */	beq lbl_803E91C4
/* 803E91AC 003DEF2C  4B FE DB B9 */	bl PFDRV_IsInserted
/* 803E91B0 003DEF30  2C 03 00 00 */	cmpwi r3, 0
/* 803E91B4 003DEF34  41 82 00 10 */	beq lbl_803E91C4
/* 803E91B8 003DEF38  A0 1B 1F 8C */	lhz r0, 0x1f8c(r27)
/* 803E91BC 003DEF3C  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 803E91C0 003DEF40  41 82 00 0C */	beq lbl_803E91CC
lbl_803E91C4:
/* 803E91C4 003DEF44  38 60 00 09 */	li r3, 9
/* 803E91C8 003DEF48  48 00 00 80 */	b lbl_803E9248
lbl_803E91CC:
/* 803E91CC 003DEF4C  80 1B 00 08 */	lwz r0, 8(r27)
/* 803E91D0 003DEF50  7C 1D 00 40 */	cmplw r29, r0
/* 803E91D4 003DEF54  40 80 00 1C */	bge lbl_803E91F0
/* 803E91D8 003DEF58  A0 7B 00 00 */	lhz r3, 0(r27)
/* 803E91DC 003DEF5C  7C 1E 18 40 */	cmplw r30, r3
/* 803E91E0 003DEF60  40 80 00 10 */	bge lbl_803E91F0
/* 803E91E4 003DEF64  7C 1E FA 14 */	add r0, r30, r31
/* 803E91E8 003DEF68  7C 00 18 00 */	cmpw r0, r3
/* 803E91EC 003DEF6C  40 81 00 0C */	ble lbl_803E91F8
lbl_803E91F0:
/* 803E91F0 003DEF70  38 60 00 0A */	li r3, 0xa
/* 803E91F4 003DEF74  48 00 00 54 */	b lbl_803E9248
lbl_803E91F8:
/* 803E91F8 003DEF78  7F 63 DB 78 */	mr r3, r27
/* 803E91FC 003DEF7C  7F A4 EB 78 */	mr r4, r29
/* 803E9200 003DEF80  38 A1 00 08 */	addi r5, r1, 8
/* 803E9204 003DEF84  4B FF 13 E9 */	bl PFCACHE_ReadFATPage
/* 803E9208 003DEF88  2C 03 00 00 */	cmpwi r3, 0
/* 803E920C 003DEF8C  41 82 00 08 */	beq lbl_803E9214
/* 803E9210 003DEF90  48 00 00 38 */	b lbl_803E9248
lbl_803E9214:
/* 803E9214 003DEF94  80 61 00 08 */	lwz r3, 8(r1)
/* 803E9218 003DEF98  7F 84 E3 78 */	mr r4, r28
/* 803E921C 003DEF9C  7F E5 FB 78 */	mr r5, r31
/* 803E9220 003DEFA0  80 03 00 08 */	lwz r0, 8(r3)
/* 803E9224 003DEFA4  7C 60 F2 14 */	add r3, r0, r30
/* 803E9228 003DEFA8  4B FE CF FD */	bl pf_memcpy
/* 803E922C 003DEFAC  80 81 00 08 */	lwz r4, 8(r1)
/* 803E9230 003DEFB0  7F 63 DB 78 */	mr r3, r27
/* 803E9234 003DEFB4  4B FF 14 E9 */	bl PFCACHE_WriteFATPage
/* 803E9238 003DEFB8  7C 03 00 D0 */	neg r0, r3
/* 803E923C 003DEFBC  7C 00 1B 78 */	or r0, r0, r3
/* 803E9240 003DEFC0  7C 00 FE 70 */	srawi r0, r0, 0x1f
/* 803E9244 003DEFC4  7C 63 00 38 */	and r3, r3, r0
lbl_803E9248:
/* 803E9248 003DEFC8  39 61 00 30 */	addi r11, r1, 0x30
/* 803E924C 003DEFCC  48 00 81 21 */	bl _restgpr_27
/* 803E9250 003DEFD0  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803E9254 003DEFD4  7C 08 03 A6 */	mtlr r0
/* 803E9258 003DEFD8  38 21 00 30 */	addi r1, r1, 0x30
/* 803E925C 003DEFDC  4E 80 00 20 */	blr 

.global PFSEC_WriteData
PFSEC_WriteData:
/* 803E9260 003DEFE0  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803E9264 003DEFE4  7C 08 02 A6 */	mflr r0
/* 803E9268 003DEFE8  90 01 00 34 */	stw r0, 0x34(r1)
/* 803E926C 003DEFEC  39 61 00 30 */	addi r11, r1, 0x30
/* 803E9270 003DEFF0  48 00 80 A9 */	bl _savegpr_25
/* 803E9274 003DEFF4  38 00 00 00 */	li r0, 0
/* 803E9278 003DEFF8  7C 79 1B 78 */	mr r25, r3
/* 803E927C 003DEFFC  90 08 00 00 */	stw r0, 0(r8)
/* 803E9280 003DF000  7C 9A 23 78 */	mr r26, r4
/* 803E9284 003DF004  7C BB 2B 78 */	mr r27, r5
/* 803E9288 003DF008  7C DC 33 78 */	mr r28, r6
/* 803E928C 003DF00C  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803E9290 003DF010  7C FF 3B 78 */	mr r31, r7
/* 803E9294 003DF014  7D 1D 43 78 */	mr r29, r8
/* 803E9298 003DF018  7D 3E 4B 78 */	mr r30, r9
/* 803E929C 003DF01C  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803E92A0 003DF020  41 82 00 1C */	beq lbl_803E92BC
/* 803E92A4 003DF024  4B FE DA C1 */	bl PFDRV_IsInserted
/* 803E92A8 003DF028  2C 03 00 00 */	cmpwi r3, 0
/* 803E92AC 003DF02C  41 82 00 10 */	beq lbl_803E92BC
/* 803E92B0 003DF030  A0 19 1F 8C */	lhz r0, 0x1f8c(r25)
/* 803E92B4 003DF034  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 803E92B8 003DF038  41 82 00 0C */	beq lbl_803E92C4
lbl_803E92BC:
/* 803E92BC 003DF03C  38 60 00 09 */	li r3, 9
/* 803E92C0 003DF040  48 00 02 10 */	b lbl_803E94D0
lbl_803E92C4:
/* 803E92C4 003DF044  80 19 00 08 */	lwz r0, 8(r25)
/* 803E92C8 003DF048  7C 1B 00 40 */	cmplw r27, r0
/* 803E92CC 003DF04C  40 80 00 1C */	bge lbl_803E92E8
/* 803E92D0 003DF050  A0 79 00 00 */	lhz r3, 0(r25)
/* 803E92D4 003DF054  7C 1C 18 40 */	cmplw r28, r3
/* 803E92D8 003DF058  40 80 00 10 */	bge lbl_803E92E8
/* 803E92DC 003DF05C  7C 1C FA 14 */	add r0, r28, r31
/* 803E92E0 003DF060  7C 00 18 40 */	cmplw r0, r3
/* 803E92E4 003DF064  40 81 00 14 */	ble lbl_803E92F8
lbl_803E92E8:
/* 803E92E8 003DF068  2C 1C 00 00 */	cmpwi r28, 0
/* 803E92EC 003DF06C  41 82 00 0C */	beq lbl_803E92F8
/* 803E92F0 003DF070  38 60 00 0A */	li r3, 0xa
/* 803E92F4 003DF074  48 00 01 DC */	b lbl_803E94D0
lbl_803E92F8:
/* 803E92F8 003DF078  2C 9C 00 00 */	cmpwi cr1, r28, 0
/* 803E92FC 003DF07C  40 86 00 10 */	bne cr1, lbl_803E930C
/* 803E9300 003DF080  A0 79 00 00 */	lhz r3, 0(r25)
/* 803E9304 003DF084  7C 1F 18 40 */	cmplw r31, r3
/* 803E9308 003DF088  40 80 00 60 */	bge lbl_803E9368
lbl_803E930C:
/* 803E930C 003DF08C  7F 23 CB 78 */	mr r3, r25
/* 803E9310 003DF090  7F 64 DB 78 */	mr r4, r27
/* 803E9314 003DF094  7F C6 F3 78 */	mr r6, r30
/* 803E9318 003DF098  38 A1 00 0C */	addi r5, r1, 0xc
/* 803E931C 003DF09C  4B FF 13 59 */	bl PFCACHE_ReadDataPageAndFlushIfNeeded
/* 803E9320 003DF0A0  2C 03 00 00 */	cmpwi r3, 0
/* 803E9324 003DF0A4  41 82 00 08 */	beq lbl_803E932C
/* 803E9328 003DF0A8  48 00 01 A8 */	b lbl_803E94D0
lbl_803E932C:
/* 803E932C 003DF0AC  80 61 00 0C */	lwz r3, 0xc(r1)
/* 803E9330 003DF0B0  7F 44 D3 78 */	mr r4, r26
/* 803E9334 003DF0B4  7F E5 FB 78 */	mr r5, r31
/* 803E9338 003DF0B8  80 03 00 08 */	lwz r0, 8(r3)
/* 803E933C 003DF0BC  7C 60 E2 14 */	add r3, r0, r28
/* 803E9340 003DF0C0  4B FE CE E5 */	bl pf_memcpy
/* 803E9344 003DF0C4  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803E9348 003DF0C8  7F 23 CB 78 */	mr r3, r25
/* 803E934C 003DF0CC  7F C5 F3 78 */	mr r5, r30
/* 803E9350 003DF0D0  4B FF 14 09 */	bl PFCACHE_WriteDataPage
/* 803E9354 003DF0D4  2C 03 00 00 */	cmpwi r3, 0
/* 803E9358 003DF0D8  41 82 00 08 */	beq lbl_803E9360
/* 803E935C 003DF0DC  48 00 01 74 */	b lbl_803E94D0
lbl_803E9360:
/* 803E9360 003DF0E0  93 FD 00 00 */	stw r31, 0(r29)
/* 803E9364 003DF0E4  48 00 01 68 */	b lbl_803E94CC
lbl_803E9368:
/* 803E9368 003DF0E8  40 86 00 64 */	bne cr1, lbl_803E93CC
/* 803E936C 003DF0EC  38 03 FF FF */	addi r0, r3, -1
/* 803E9370 003DF0F0  7F E0 00 39 */	and. r0, r31, r0
/* 803E9374 003DF0F4  40 82 00 58 */	bne lbl_803E93CC
/* 803E9378 003DF0F8  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E937C 003DF0FC  7F 23 CB 78 */	mr r3, r25
/* 803E9380 003DF100  7F 44 D3 78 */	mr r4, r26
/* 803E9384 003DF104  7F 65 DB 78 */	mr r5, r27
/* 803E9388 003DF108  7F E6 04 30 */	srw r6, r31, r0
/* 803E938C 003DF10C  38 E1 00 08 */	addi r7, r1, 8
/* 803E9390 003DF110  4B FF 14 55 */	bl PFCACHE_WriteDataNumSectorAndFreeIfNeeded
/* 803E9394 003DF114  2C 03 00 00 */	cmpwi r3, 0
/* 803E9398 003DF118  41 82 00 08 */	beq lbl_803E93A0
/* 803E939C 003DF11C  48 00 01 34 */	b lbl_803E94D0
lbl_803E93A0:
/* 803E93A0 003DF120  80 61 00 08 */	lwz r3, 8(r1)
/* 803E93A4 003DF124  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E93A8 003DF128  7C 60 00 30 */	slw r0, r3, r0
/* 803E93AC 003DF12C  90 1D 00 00 */	stw r0, 0(r29)
/* 803E93B0 003DF130  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E93B4 003DF134  80 61 00 08 */	lwz r3, 8(r1)
/* 803E93B8 003DF138  7F E0 04 30 */	srw r0, r31, r0
/* 803E93BC 003DF13C  7C 03 00 40 */	cmplw r3, r0
/* 803E93C0 003DF140  41 82 01 0C */	beq lbl_803E94CC
/* 803E93C4 003DF144  38 60 00 11 */	li r3, 0x11
/* 803E93C8 003DF148  48 00 01 08 */	b lbl_803E94D0
lbl_803E93CC:
/* 803E93CC 003DF14C  2C 1C 00 00 */	cmpwi r28, 0
/* 803E93D0 003DF150  40 82 00 F4 */	bne lbl_803E94C4
/* 803E93D4 003DF154  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E93D8 003DF158  80 79 16 40 */	lwz r3, 0x1640(r25)
/* 803E93DC 003DF15C  7F FF 04 30 */	srw r31, r31, r0
/* 803E93E0 003DF160  7C 9B FA 14 */	add r4, r27, r31
/* 803E93E4 003DF164  7C 04 1B 96 */	divwu r0, r4, r3
/* 803E93E8 003DF168  7C 00 19 D6 */	mullw r0, r0, r3
/* 803E93EC 003DF16C  7C 00 20 50 */	subf r0, r0, r4
/* 803E93F0 003DF170  7C 1F 00 40 */	cmplw r31, r0
/* 803E93F4 003DF174  40 81 00 58 */	ble lbl_803E944C
/* 803E93F8 003DF178  7F 80 F8 50 */	subf r28, r0, r31
/* 803E93FC 003DF17C  7F 23 CB 78 */	mr r3, r25
/* 803E9400 003DF180  7F 44 D3 78 */	mr r4, r26
/* 803E9404 003DF184  7F 65 DB 78 */	mr r5, r27
/* 803E9408 003DF188  7F 86 E3 78 */	mr r6, r28
/* 803E940C 003DF18C  38 E1 00 08 */	addi r7, r1, 8
/* 803E9410 003DF190  4B FF 13 D5 */	bl PFCACHE_WriteDataNumSectorAndFreeIfNeeded
/* 803E9414 003DF194  2C 03 00 00 */	cmpwi r3, 0
/* 803E9418 003DF198  41 82 00 08 */	beq lbl_803E9420
/* 803E941C 003DF19C  48 00 00 B4 */	b lbl_803E94D0
lbl_803E9420:
/* 803E9420 003DF1A0  80 61 00 08 */	lwz r3, 8(r1)
/* 803E9424 003DF1A4  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E9428 003DF1A8  7C 60 00 30 */	slw r0, r3, r0
/* 803E942C 003DF1AC  90 1D 00 00 */	stw r0, 0(r29)
/* 803E9430 003DF1B0  80 01 00 08 */	lwz r0, 8(r1)
/* 803E9434 003DF1B4  7C 00 E0 40 */	cmplw r0, r28
/* 803E9438 003DF1B8  41 82 00 0C */	beq lbl_803E9444
/* 803E943C 003DF1BC  38 60 00 11 */	li r3, 0x11
/* 803E9440 003DF1C0  48 00 00 90 */	b lbl_803E94D0
lbl_803E9444:
/* 803E9444 003DF1C4  7F 7B E2 14 */	add r27, r27, r28
/* 803E9448 003DF1C8  7F FC F8 50 */	subf r31, r28, r31
lbl_803E944C:
/* 803E944C 003DF1CC  2C 1F 00 00 */	cmpwi r31, 0
/* 803E9450 003DF1D0  41 82 00 7C */	beq lbl_803E94CC
/* 803E9454 003DF1D4  7F 23 CB 78 */	mr r3, r25
/* 803E9458 003DF1D8  7F 64 DB 78 */	mr r4, r27
/* 803E945C 003DF1DC  7F C6 F3 78 */	mr r6, r30
/* 803E9460 003DF1E0  38 A1 00 0C */	addi r5, r1, 0xc
/* 803E9464 003DF1E4  4B FF 12 11 */	bl PFCACHE_ReadDataPageAndFlushIfNeeded
/* 803E9468 003DF1E8  2C 03 00 00 */	cmpwi r3, 0
/* 803E946C 003DF1EC  41 82 00 08 */	beq lbl_803E9474
/* 803E9470 003DF1F0  48 00 00 60 */	b lbl_803E94D0
lbl_803E9474:
/* 803E9474 003DF1F4  80 61 00 0C */	lwz r3, 0xc(r1)
/* 803E9478 003DF1F8  80 9D 00 00 */	lwz r4, 0(r29)
/* 803E947C 003DF1FC  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E9480 003DF200  80 63 00 08 */	lwz r3, 8(r3)
/* 803E9484 003DF204  7C 9A 22 14 */	add r4, r26, r4
/* 803E9488 003DF208  7F E5 00 30 */	slw r5, r31, r0
/* 803E948C 003DF20C  4B FE CD 99 */	bl pf_memcpy
/* 803E9490 003DF210  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803E9494 003DF214  7F 23 CB 78 */	mr r3, r25
/* 803E9498 003DF218  7F C5 F3 78 */	mr r5, r30
/* 803E949C 003DF21C  4B FF 12 BD */	bl PFCACHE_WriteDataPage
/* 803E94A0 003DF220  2C 03 00 00 */	cmpwi r3, 0
/* 803E94A4 003DF224  41 82 00 08 */	beq lbl_803E94AC
/* 803E94A8 003DF228  48 00 00 28 */	b lbl_803E94D0
lbl_803E94AC:
/* 803E94AC 003DF22C  88 19 00 20 */	lbz r0, 0x20(r25)
/* 803E94B0 003DF230  80 7D 00 00 */	lwz r3, 0(r29)
/* 803E94B4 003DF234  7F E0 00 30 */	slw r0, r31, r0
/* 803E94B8 003DF238  7C 03 02 14 */	add r0, r3, r0
/* 803E94BC 003DF23C  90 1D 00 00 */	stw r0, 0(r29)
/* 803E94C0 003DF240  48 00 00 0C */	b lbl_803E94CC
lbl_803E94C4:
/* 803E94C4 003DF244  38 60 00 0A */	li r3, 0xa
/* 803E94C8 003DF248  48 00 00 08 */	b lbl_803E94D0
lbl_803E94CC:
/* 803E94CC 003DF24C  38 60 00 00 */	li r3, 0
lbl_803E94D0:
/* 803E94D0 003DF250  39 61 00 30 */	addi r11, r1, 0x30
/* 803E94D4 003DF254  48 00 7E 91 */	bl _restgpr_25
/* 803E94D8 003DF258  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803E94DC 003DF25C  7C 08 03 A6 */	mtlr r0
/* 803E94E0 003DF260  38 21 00 30 */	addi r1, r1, 0x30
/* 803E94E4 003DF264  4E 80 00 20 */	blr 

