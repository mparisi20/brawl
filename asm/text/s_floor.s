.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global floor
floor:
/* 804005AC 003F632C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 804005B0 003F6330  D8 21 00 08 */	stfd f1, 8(r1)
/* 804005B4 003F6334  80 A1 00 08 */	lwz r5, 8(r1)
/* 804005B8 003F6338  80 C1 00 0C */	lwz r6, 0xc(r1)
/* 804005BC 003F633C  54 A3 65 7E */	rlwinm r3, r5, 0xc, 0x15, 0x1f
/* 804005C0 003F6340  38 E3 FC 01 */	addi r7, r3, -1023
/* 804005C4 003F6344  2C 87 00 14 */	cmpwi cr1, r7, 0x14
/* 804005C8 003F6348  40 84 00 98 */	bge cr1, lbl_80400660
/* 804005CC 003F634C  2C 07 00 00 */	cmpwi r7, 0
/* 804005D0 003F6350  40 80 00 44 */	bge lbl_80400614
/* 804005D4 003F6354  C8 42 BD 98 */	lfd f2, lbl_805A50B8-_SDA2_BASE_(r2)
/* 804005D8 003F6358  C8 02 BD A0 */	lfd f0, lbl_805A50C0-_SDA2_BASE_(r2)
/* 804005DC 003F635C  FC 22 08 2A */	fadd f1, f2, f1
/* 804005E0 003F6360  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 804005E4 003F6364  40 81 00 F8 */	ble lbl_804006DC
/* 804005E8 003F6368  2C 05 00 00 */	cmpwi r5, 0
/* 804005EC 003F636C  41 80 00 10 */	blt lbl_804005FC
/* 804005F0 003F6370  38 C0 00 00 */	li r6, 0
/* 804005F4 003F6374  38 A0 00 00 */	li r5, 0
/* 804005F8 003F6378  48 00 00 E4 */	b lbl_804006DC
lbl_804005FC:
/* 804005FC 003F637C  54 A0 00 7E */	clrlwi r0, r5, 1
/* 80400600 003F6380  7C 00 33 79 */	or. r0, r0, r6
/* 80400604 003F6384  41 82 00 D8 */	beq lbl_804006DC
/* 80400608 003F6388  3C A0 BF F0 */	lis r5, 0xbff0
/* 8040060C 003F638C  38 C0 00 00 */	li r6, 0
/* 80400610 003F6390  48 00 00 CC */	b lbl_804006DC
lbl_80400614:
/* 80400614 003F6394  3C 60 00 10 */	lis r3, 0x000FFFFF@ha
/* 80400618 003F6398  38 03 FF FF */	addi r0, r3, 0x000FFFFF@l
/* 8040061C 003F639C  7C 04 3E 30 */	sraw r4, r0, r7
/* 80400620 003F63A0  7C A0 20 38 */	and r0, r5, r4
/* 80400624 003F63A4  7C C0 03 79 */	or. r0, r6, r0
/* 80400628 003F63A8  40 82 00 08 */	bne lbl_80400630
/* 8040062C 003F63AC  48 00 00 BC */	b lbl_804006E8
lbl_80400630:
/* 80400630 003F63B0  C8 42 BD 98 */	lfd f2, lbl_805A50B8-_SDA2_BASE_(r2)
/* 80400634 003F63B4  C8 02 BD A0 */	lfd f0, lbl_805A50C0-_SDA2_BASE_(r2)
/* 80400638 003F63B8  FC 22 08 2A */	fadd f1, f2, f1
/* 8040063C 003F63BC  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 80400640 003F63C0  40 81 00 9C */	ble lbl_804006DC
/* 80400644 003F63C4  2C 05 00 00 */	cmpwi r5, 0
/* 80400648 003F63C8  40 80 00 0C */	bge lbl_80400654
/* 8040064C 003F63CC  7C 60 3E 30 */	sraw r0, r3, r7
/* 80400650 003F63D0  7C A5 02 14 */	add r5, r5, r0
lbl_80400654:
/* 80400654 003F63D4  7C A5 20 78 */	andc r5, r5, r4
/* 80400658 003F63D8  38 C0 00 00 */	li r6, 0
/* 8040065C 003F63DC  48 00 00 80 */	b lbl_804006DC
lbl_80400660:
/* 80400660 003F63E0  2C 07 00 33 */	cmpwi r7, 0x33
/* 80400664 003F63E4  40 81 00 14 */	ble lbl_80400678
/* 80400668 003F63E8  2C 07 04 00 */	cmpwi r7, 0x400
/* 8040066C 003F63EC  40 82 00 7C */	bne lbl_804006E8
/* 80400670 003F63F0  FC 21 08 2A */	fadd f1, f1, f1
/* 80400674 003F63F4  48 00 00 74 */	b lbl_804006E8
lbl_80400678:
/* 80400678 003F63F8  38 07 FF EC */	addi r0, r7, -20
/* 8040067C 003F63FC  38 60 FF FF */	li r3, -1
/* 80400680 003F6400  7C 64 04 30 */	srw r4, r3, r0
/* 80400684 003F6404  7C C0 20 39 */	and. r0, r6, r4
/* 80400688 003F6408  40 82 00 08 */	bne lbl_80400690
/* 8040068C 003F640C  48 00 00 5C */	b lbl_804006E8
lbl_80400690:
/* 80400690 003F6410  C8 42 BD 98 */	lfd f2, lbl_805A50B8-_SDA2_BASE_(r2)
/* 80400694 003F6414  C8 02 BD A0 */	lfd f0, lbl_805A50C0-_SDA2_BASE_(r2)
/* 80400698 003F6418  FC 22 08 2A */	fadd f1, f2, f1
/* 8040069C 003F641C  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 804006A0 003F6420  40 81 00 3C */	ble lbl_804006DC
/* 804006A4 003F6424  2C 05 00 00 */	cmpwi r5, 0
/* 804006A8 003F6428  40 80 00 30 */	bge lbl_804006D8
/* 804006AC 003F642C  40 86 00 0C */	bne cr1, lbl_804006B8
/* 804006B0 003F6430  38 A5 00 01 */	addi r5, r5, 1
/* 804006B4 003F6434  48 00 00 24 */	b lbl_804006D8
lbl_804006B8:
/* 804006B8 003F6438  20 07 00 34 */	subfic r0, r7, 0x34
/* 804006BC 003F643C  38 60 00 01 */	li r3, 1
/* 804006C0 003F6440  7C 60 00 30 */	slw r0, r3, r0
/* 804006C4 003F6444  7C 06 02 14 */	add r0, r6, r0
/* 804006C8 003F6448  7C 00 30 40 */	cmplw r0, r6
/* 804006CC 003F644C  40 80 00 08 */	bge lbl_804006D4
/* 804006D0 003F6450  38 A5 00 01 */	addi r5, r5, 1
lbl_804006D4:
/* 804006D4 003F6454  7C 06 03 78 */	mr r6, r0
lbl_804006D8:
/* 804006D8 003F6458  7C C6 20 78 */	andc r6, r6, r4
lbl_804006DC:
/* 804006DC 003F645C  90 A1 00 08 */	stw r5, 8(r1)
/* 804006E0 003F6460  90 C1 00 0C */	stw r6, 0xc(r1)
/* 804006E4 003F6464  C8 21 00 08 */	lfd f1, 8(r1)
lbl_804006E8:
/* 804006E8 003F6468  38 21 00 10 */	addi r1, r1, 0x10
/* 804006EC 003F646C  4E 80 00 20 */	blr 

