.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global OSUTF8to32
OSUTF8to32:
/* 801E21E8 001D7F68  88 C3 00 00 */	lbz r6, 0(r3)
/* 801E21EC 001D7F6C  2C 06 00 00 */	cmpwi r6, 0
/* 801E21F0 001D7F70  41 82 00 08 */	beq lbl_801E21F8
/* 801E21F4 001D7F74  38 63 00 01 */	addi r3, r3, 1
lbl_801E21F8:
/* 801E21F8 001D7F78  54 C0 06 31 */	rlwinm. r0, r6, 0, 0x18, 0x18
/* 801E21FC 001D7F7C  40 82 00 0C */	bne lbl_801E2208
/* 801E2200 001D7F80  38 E0 00 00 */	li r7, 0
/* 801E2204 001D7F84  48 00 00 54 */	b lbl_801E2258
lbl_801E2208:
/* 801E2208 001D7F88  54 C0 06 34 */	rlwinm r0, r6, 0, 0x18, 0x1a
/* 801E220C 001D7F8C  28 00 00 C0 */	cmplwi r0, 0xc0
/* 801E2210 001D7F90  40 82 00 10 */	bne lbl_801E2220
/* 801E2214 001D7F94  54 C6 06 FE */	clrlwi r6, r6, 0x1b
/* 801E2218 001D7F98  38 E0 00 01 */	li r7, 1
/* 801E221C 001D7F9C  48 00 00 3C */	b lbl_801E2258
lbl_801E2220:
/* 801E2220 001D7FA0  54 C0 06 36 */	rlwinm r0, r6, 0, 0x18, 0x1b
/* 801E2224 001D7FA4  28 00 00 E0 */	cmplwi r0, 0xe0
/* 801E2228 001D7FA8  40 82 00 10 */	bne lbl_801E2238
/* 801E222C 001D7FAC  54 C6 07 3E */	clrlwi r6, r6, 0x1c
/* 801E2230 001D7FB0  38 E0 00 02 */	li r7, 2
/* 801E2234 001D7FB4  48 00 00 24 */	b lbl_801E2258
lbl_801E2238:
/* 801E2238 001D7FB8  54 C0 06 38 */	rlwinm r0, r6, 0, 0x18, 0x1c
/* 801E223C 001D7FBC  28 00 00 F0 */	cmplwi r0, 0xf0
/* 801E2240 001D7FC0  40 82 00 10 */	bne lbl_801E2250
/* 801E2244 001D7FC4  54 C6 07 7E */	clrlwi r6, r6, 0x1d
/* 801E2248 001D7FC8  38 E0 00 03 */	li r7, 3
/* 801E224C 001D7FCC  48 00 00 0C */	b lbl_801E2258
lbl_801E2250:
/* 801E2250 001D7FD0  38 60 00 00 */	li r3, 0
/* 801E2254 001D7FD4  4E 80 00 20 */	blr 
lbl_801E2258:
/* 801E2258 001D7FD8  7C E9 03 A6 */	mtctr r7
/* 801E225C 001D7FDC  28 07 00 00 */	cmplwi r7, 0
/* 801E2260 001D7FE0  40 81 00 30 */	ble lbl_801E2290
lbl_801E2264:
/* 801E2264 001D7FE4  88 A3 00 00 */	lbz r5, 0(r3)
/* 801E2268 001D7FE8  54 C6 30 32 */	slwi r6, r6, 6
/* 801E226C 001D7FEC  38 63 00 01 */	addi r3, r3, 1
/* 801E2270 001D7FF0  54 A0 06 32 */	rlwinm r0, r5, 0, 0x18, 0x19
/* 801E2274 001D7FF4  28 00 00 80 */	cmplwi r0, 0x80
/* 801E2278 001D7FF8  41 82 00 0C */	beq lbl_801E2284
/* 801E227C 001D7FFC  38 60 00 00 */	li r3, 0
/* 801E2280 001D8000  4E 80 00 20 */	blr 
lbl_801E2284:
/* 801E2284 001D8004  54 A0 06 BE */	clrlwi r0, r5, 0x1a
/* 801E2288 001D8008  7C C6 03 78 */	or r6, r6, r0
/* 801E228C 001D800C  42 00 FF D8 */	bdnz lbl_801E2264
lbl_801E2290:
/* 801E2290 001D8010  28 06 00 7F */	cmplwi r6, 0x7f
/* 801E2294 001D8014  41 81 00 14 */	bgt lbl_801E22A8
/* 801E2298 001D8018  2C 07 00 00 */	cmpwi r7, 0
/* 801E229C 001D801C  41 82 00 3C */	beq lbl_801E22D8
/* 801E22A0 001D8020  38 60 00 00 */	li r3, 0
/* 801E22A4 001D8024  4E 80 00 20 */	blr 
lbl_801E22A8:
/* 801E22A8 001D8028  28 06 07 FF */	cmplwi r6, 0x7ff
/* 801E22AC 001D802C  41 81 00 14 */	bgt lbl_801E22C0
/* 801E22B0 001D8030  28 07 00 01 */	cmplwi r7, 1
/* 801E22B4 001D8034  41 82 00 24 */	beq lbl_801E22D8
/* 801E22B8 001D8038  38 60 00 00 */	li r3, 0
/* 801E22BC 001D803C  4E 80 00 20 */	blr 
lbl_801E22C0:
/* 801E22C0 001D8040  28 06 FF FF */	cmplwi r6, 0xffff
/* 801E22C4 001D8044  41 81 00 14 */	bgt lbl_801E22D8
/* 801E22C8 001D8048  28 07 00 02 */	cmplwi r7, 2
/* 801E22CC 001D804C  41 82 00 0C */	beq lbl_801E22D8
/* 801E22D0 001D8050  38 60 00 00 */	li r3, 0
/* 801E22D4 001D8054  4E 80 00 20 */	blr 
lbl_801E22D8:
/* 801E22D8 001D8058  28 06 D8 00 */	cmplwi r6, 0xd800
/* 801E22DC 001D805C  41 80 00 14 */	blt lbl_801E22F0
/* 801E22E0 001D8060  28 06 DF FF */	cmplwi r6, 0xdfff
/* 801E22E4 001D8064  41 81 00 0C */	bgt lbl_801E22F0
/* 801E22E8 001D8068  38 60 00 00 */	li r3, 0
/* 801E22EC 001D806C  4E 80 00 20 */	blr 
lbl_801E22F0:
/* 801E22F0 001D8070  90 C4 00 00 */	stw r6, 0(r4)
/* 801E22F4 001D8074  4E 80 00 20 */	blr 

.global OSUTF16to32
OSUTF16to32:
/* 801E22F8 001D8078  A0 A3 00 00 */	lhz r5, 0(r3)
/* 801E22FC 001D807C  2C 05 00 00 */	cmpwi r5, 0
/* 801E2300 001D8080  41 82 00 08 */	beq lbl_801E2308
/* 801E2304 001D8084  38 63 00 02 */	addi r3, r3, 2
lbl_801E2308:
/* 801E2308 001D8088  28 05 D8 00 */	cmplwi r5, 0xd800
/* 801E230C 001D808C  41 80 00 0C */	blt lbl_801E2318
/* 801E2310 001D8090  28 05 DF FF */	cmplwi r5, 0xdfff
/* 801E2314 001D8094  40 81 00 0C */	ble lbl_801E2320
lbl_801E2318:
/* 801E2318 001D8098  7C A6 2B 78 */	mr r6, r5
/* 801E231C 001D809C  48 00 00 44 */	b lbl_801E2360
lbl_801E2320:
/* 801E2320 001D80A0  28 05 DB FF */	cmplwi r5, 0xdbff
/* 801E2324 001D80A4  41 81 00 34 */	bgt lbl_801E2358
/* 801E2328 001D80A8  A0 03 00 00 */	lhz r0, 0(r3)
/* 801E232C 001D80AC  38 63 00 02 */	addi r3, r3, 2
/* 801E2330 001D80B0  28 00 DC 00 */	cmplwi r0, 0xdc00
/* 801E2334 001D80B4  41 80 00 1C */	blt lbl_801E2350
/* 801E2338 001D80B8  28 00 DF FF */	cmplwi r0, 0xdfff
/* 801E233C 001D80BC  41 81 00 14 */	bgt lbl_801E2350
/* 801E2340 001D80C0  54 06 05 BE */	clrlwi r6, r0, 0x16
/* 801E2344 001D80C4  50 A6 53 2A */	rlwimi r6, r5, 0xa, 0xc, 0x15
/* 801E2348 001D80C8  3C C6 00 01 */	addis r6, r6, 1
/* 801E234C 001D80CC  48 00 00 14 */	b lbl_801E2360
lbl_801E2350:
/* 801E2350 001D80D0  38 60 00 00 */	li r3, 0
/* 801E2354 001D80D4  4E 80 00 20 */	blr 
lbl_801E2358:
/* 801E2358 001D80D8  38 60 00 00 */	li r3, 0
/* 801E235C 001D80DC  4E 80 00 20 */	blr 
lbl_801E2360:
/* 801E2360 001D80E0  90 C4 00 00 */	stw r6, 0(r4)
/* 801E2364 001D80E4  4E 80 00 20 */	blr 

.global OSUTF32toANSI
OSUTF32toANSI:
/* 801E2368 001D80E8  28 03 00 FF */	cmplwi r3, 0xff
/* 801E236C 001D80EC  40 81 00 0C */	ble lbl_801E2378
/* 801E2370 001D80F0  38 60 00 00 */	li r3, 0
/* 801E2374 001D80F4  4E 80 00 20 */	blr 
lbl_801E2378:
/* 801E2378 001D80F8  28 03 00 80 */	cmplwi r3, 0x80
/* 801E237C 001D80FC  41 80 00 0C */	blt lbl_801E2388
/* 801E2380 001D8100  28 03 00 9F */	cmplwi r3, 0x9f
/* 801E2384 001D8104  40 81 00 0C */	ble lbl_801E2390
lbl_801E2388:
/* 801E2388 001D8108  54 63 06 3E */	clrlwi r3, r3, 0x18
/* 801E238C 001D810C  4E 80 00 20 */	blr 
lbl_801E2390:
/* 801E2390 001D8110  28 03 01 52 */	cmplwi r3, 0x152
/* 801E2394 001D8114  41 80 00 44 */	blt lbl_801E23D8
/* 801E2398 001D8118  28 03 21 22 */	cmplwi r3, 0x2122
/* 801E239C 001D811C  41 81 00 3C */	bgt lbl_801E23D8
/* 801E23A0 001D8120  3C 80 80 47 */	lis r4, lbl_80468CC8@ha
/* 801E23A4 001D8124  38 00 00 20 */	li r0, 0x20
/* 801E23A8 001D8128  38 84 8C C8 */	addi r4, r4, lbl_80468CC8@l
/* 801E23AC 001D812C  38 A0 00 00 */	li r5, 0
/* 801E23B0 001D8130  7C 09 03 A6 */	mtctr r0
lbl_801E23B4:
/* 801E23B4 001D8134  A0 04 00 00 */	lhz r0, 0(r4)
/* 801E23B8 001D8138  7C 03 00 40 */	cmplw r3, r0
/* 801E23BC 001D813C  40 82 00 10 */	bne lbl_801E23CC
/* 801E23C0 001D8140  38 05 00 80 */	addi r0, r5, 0x80
/* 801E23C4 001D8144  54 03 06 3E */	clrlwi r3, r0, 0x18
/* 801E23C8 001D8148  4E 80 00 20 */	blr 
lbl_801E23CC:
/* 801E23CC 001D814C  38 84 00 02 */	addi r4, r4, 2
/* 801E23D0 001D8150  38 A5 00 01 */	addi r5, r5, 1
/* 801E23D4 001D8154  42 00 FF E0 */	bdnz lbl_801E23B4
lbl_801E23D8:
/* 801E23D8 001D8158  38 60 00 00 */	li r3, 0
/* 801E23DC 001D815C  4E 80 00 20 */	blr 

.global OSUTF32toSJIS
OSUTF32toSJIS:
/* 801E23E0 001D8160  3C 00 00 01 */	lis r0, 1
/* 801E23E4 001D8164  7C 03 00 40 */	cmplw r3, r0
/* 801E23E8 001D8168  41 80 00 0C */	blt lbl_801E23F4
/* 801E23EC 001D816C  38 60 00 00 */	li r3, 0
/* 801E23F0 001D8170  4E 80 00 20 */	blr 
lbl_801E23F4:
/* 801E23F4 001D8174  3C 80 80 47 */	lis r4, lbl_80474708@ha
/* 801E23F8 001D8178  54 60 D5 BA */	rlwinm r0, r3, 0x1a, 0x16, 0x1d
/* 801E23FC 001D817C  38 84 47 08 */	addi r4, r4, lbl_80474708@l
/* 801E2400 001D8180  7C 84 00 2E */	lwzx r4, r4, r0
/* 801E2404 001D8184  2C 04 00 00 */	cmpwi r4, 0
/* 801E2408 001D8188  41 82 00 10 */	beq lbl_801E2418
/* 801E240C 001D818C  54 60 0D FC */	rlwinm r0, r3, 1, 0x17, 0x1e
/* 801E2410 001D8190  7C 64 02 2E */	lhzx r3, r4, r0
/* 801E2414 001D8194  4E 80 00 20 */	blr 
lbl_801E2418:
/* 801E2418 001D8198  38 60 00 00 */	li r3, 0
/* 801E241C 001D819C  4E 80 00 20 */	blr 

