.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global DLInsert
DLInsert:
/* 801D6E24 001CCBA4  7C 67 1B 78 */	mr r7, r3
/* 801D6E28 001CCBA8  38 C0 00 00 */	li r6, 0
/* 801D6E2C 001CCBAC  48 00 00 14 */	b lbl_801D6E40
lbl_801D6E30:
/* 801D6E30 001CCBB0  7C 04 38 40 */	cmplw r4, r7
/* 801D6E34 001CCBB4  40 81 00 14 */	ble lbl_801D6E48
/* 801D6E38 001CCBB8  7C E6 3B 78 */	mr r6, r7
/* 801D6E3C 001CCBBC  80 E7 00 04 */	lwz r7, 4(r7)
lbl_801D6E40:
/* 801D6E40 001CCBC0  2C 07 00 00 */	cmpwi r7, 0
/* 801D6E44 001CCBC4  40 82 FF EC */	bne lbl_801D6E30
lbl_801D6E48:
/* 801D6E48 001CCBC8  2C 07 00 00 */	cmpwi r7, 0
/* 801D6E4C 001CCBCC  90 E4 00 04 */	stw r7, 4(r4)
/* 801D6E50 001CCBD0  90 C4 00 00 */	stw r6, 0(r4)
/* 801D6E54 001CCBD4  41 82 00 38 */	beq lbl_801D6E8C
/* 801D6E58 001CCBD8  90 87 00 00 */	stw r4, 0(r7)
/* 801D6E5C 001CCBDC  80 A4 00 08 */	lwz r5, 8(r4)
/* 801D6E60 001CCBE0  7C 04 2A 14 */	add r0, r4, r5
/* 801D6E64 001CCBE4  7C 00 38 40 */	cmplw r0, r7
/* 801D6E68 001CCBE8  40 82 00 24 */	bne lbl_801D6E8C
/* 801D6E6C 001CCBEC  80 07 00 08 */	lwz r0, 8(r7)
/* 801D6E70 001CCBF0  7C 05 02 14 */	add r0, r5, r0
/* 801D6E74 001CCBF4  90 04 00 08 */	stw r0, 8(r4)
/* 801D6E78 001CCBF8  80 E7 00 04 */	lwz r7, 4(r7)
/* 801D6E7C 001CCBFC  2C 07 00 00 */	cmpwi r7, 0
/* 801D6E80 001CCC00  90 E4 00 04 */	stw r7, 4(r4)
/* 801D6E84 001CCC04  41 82 00 08 */	beq lbl_801D6E8C
/* 801D6E88 001CCC08  90 87 00 00 */	stw r4, 0(r7)
lbl_801D6E8C:
/* 801D6E8C 001CCC0C  2C 06 00 00 */	cmpwi r6, 0
/* 801D6E90 001CCC10  41 82 00 38 */	beq lbl_801D6EC8
/* 801D6E94 001CCC14  90 86 00 04 */	stw r4, 4(r6)
/* 801D6E98 001CCC18  80 A6 00 08 */	lwz r5, 8(r6)
/* 801D6E9C 001CCC1C  7C 06 2A 14 */	add r0, r6, r5
/* 801D6EA0 001CCC20  7C 00 20 40 */	cmplw r0, r4
/* 801D6EA4 001CCC24  4C 82 00 20 */	bnelr 
/* 801D6EA8 001CCC28  80 04 00 08 */	lwz r0, 8(r4)
/* 801D6EAC 001CCC2C  2C 07 00 00 */	cmpwi r7, 0
/* 801D6EB0 001CCC30  7C 05 02 14 */	add r0, r5, r0
/* 801D6EB4 001CCC34  90 06 00 08 */	stw r0, 8(r6)
/* 801D6EB8 001CCC38  90 E6 00 04 */	stw r7, 4(r6)
/* 801D6EBC 001CCC3C  4D 82 00 20 */	beqlr 
/* 801D6EC0 001CCC40  90 C7 00 00 */	stw r6, 0(r7)
/* 801D6EC4 001CCC44  4E 80 00 20 */	blr 
lbl_801D6EC8:
/* 801D6EC8 001CCC48  7C 83 23 78 */	mr r3, r4
/* 801D6ECC 001CCC4C  4E 80 00 20 */	blr 

.global OSAllocFromHeap
OSAllocFromHeap:
/* 801D6ED0 001CCC50  1C 63 00 0C */	mulli r3, r3, 0xc
/* 801D6ED4 001CCC54  80 AD C2 6C */	lwz r5, lbl_805A068C-_SDA_BASE_(r13)
/* 801D6ED8 001CCC58  38 04 00 3F */	addi r0, r4, 0x3f
/* 801D6EDC 001CCC5C  7C A5 1A 14 */	add r5, r5, r3
/* 801D6EE0 001CCC60  54 04 00 34 */	rlwinm r4, r0, 0, 0, 0x1a
/* 801D6EE4 001CCC64  80 65 00 04 */	lwz r3, 4(r5)
/* 801D6EE8 001CCC68  7C 66 1B 78 */	mr r6, r3
/* 801D6EEC 001CCC6C  48 00 00 14 */	b lbl_801D6F00
lbl_801D6EF0:
/* 801D6EF0 001CCC70  80 06 00 08 */	lwz r0, 8(r6)
/* 801D6EF4 001CCC74  7C 04 00 00 */	cmpw r4, r0
/* 801D6EF8 001CCC78  40 81 00 10 */	ble lbl_801D6F08
/* 801D6EFC 001CCC7C  80 C6 00 04 */	lwz r6, 4(r6)
lbl_801D6F00:
/* 801D6F00 001CCC80  2C 06 00 00 */	cmpwi r6, 0
/* 801D6F04 001CCC84  40 82 FF EC */	bne lbl_801D6EF0
lbl_801D6F08:
/* 801D6F08 001CCC88  2C 06 00 00 */	cmpwi r6, 0
/* 801D6F0C 001CCC8C  40 82 00 0C */	bne lbl_801D6F18
/* 801D6F10 001CCC90  38 60 00 00 */	li r3, 0
/* 801D6F14 001CCC94  4E 80 00 20 */	blr 
lbl_801D6F18:
/* 801D6F18 001CCC98  80 06 00 08 */	lwz r0, 8(r6)
/* 801D6F1C 001CCC9C  7C 04 00 50 */	subf r0, r4, r0
/* 801D6F20 001CCCA0  28 00 00 40 */	cmplwi r0, 0x40
/* 801D6F24 001CCCA4  40 80 00 3C */	bge lbl_801D6F60
/* 801D6F28 001CCCA8  80 86 00 04 */	lwz r4, 4(r6)
/* 801D6F2C 001CCCAC  2C 04 00 00 */	cmpwi r4, 0
/* 801D6F30 001CCCB0  41 82 00 0C */	beq lbl_801D6F3C
/* 801D6F34 001CCCB4  80 06 00 00 */	lwz r0, 0(r6)
/* 801D6F38 001CCCB8  90 04 00 00 */	stw r0, 0(r4)
lbl_801D6F3C:
/* 801D6F3C 001CCCBC  80 86 00 00 */	lwz r4, 0(r6)
/* 801D6F40 001CCCC0  2C 04 00 00 */	cmpwi r4, 0
/* 801D6F44 001CCCC4  40 82 00 0C */	bne lbl_801D6F50
/* 801D6F48 001CCCC8  80 66 00 04 */	lwz r3, 4(r6)
/* 801D6F4C 001CCCCC  48 00 00 0C */	b lbl_801D6F58
lbl_801D6F50:
/* 801D6F50 001CCCD0  80 06 00 04 */	lwz r0, 4(r6)
/* 801D6F54 001CCCD4  90 04 00 04 */	stw r0, 4(r4)
lbl_801D6F58:
/* 801D6F58 001CCCD8  90 65 00 04 */	stw r3, 4(r5)
/* 801D6F5C 001CCCDC  48 00 00 44 */	b lbl_801D6FA0
lbl_801D6F60:
/* 801D6F60 001CCCE0  90 86 00 08 */	stw r4, 8(r6)
/* 801D6F64 001CCCE4  7C 86 22 14 */	add r4, r6, r4
/* 801D6F68 001CCCE8  90 04 00 08 */	stw r0, 8(r4)
/* 801D6F6C 001CCCEC  80 06 00 00 */	lwz r0, 0(r6)
/* 801D6F70 001CCCF0  90 04 00 00 */	stw r0, 0(r4)
/* 801D6F74 001CCCF4  80 66 00 04 */	lwz r3, 4(r6)
/* 801D6F78 001CCCF8  2C 03 00 00 */	cmpwi r3, 0
/* 801D6F7C 001CCCFC  90 64 00 04 */	stw r3, 4(r4)
/* 801D6F80 001CCD00  41 82 00 08 */	beq lbl_801D6F88
/* 801D6F84 001CCD04  90 83 00 00 */	stw r4, 0(r3)
lbl_801D6F88:
/* 801D6F88 001CCD08  80 64 00 00 */	lwz r3, 0(r4)
/* 801D6F8C 001CCD0C  2C 03 00 00 */	cmpwi r3, 0
/* 801D6F90 001CCD10  41 82 00 0C */	beq lbl_801D6F9C
/* 801D6F94 001CCD14  90 83 00 04 */	stw r4, 4(r3)
/* 801D6F98 001CCD18  48 00 00 08 */	b lbl_801D6FA0
lbl_801D6F9C:
/* 801D6F9C 001CCD1C  90 85 00 04 */	stw r4, 4(r5)
lbl_801D6FA0:
/* 801D6FA0 001CCD20  80 65 00 08 */	lwz r3, 8(r5)
/* 801D6FA4 001CCD24  38 00 00 00 */	li r0, 0
/* 801D6FA8 001CCD28  90 66 00 04 */	stw r3, 4(r6)
/* 801D6FAC 001CCD2C  2C 03 00 00 */	cmpwi r3, 0
/* 801D6FB0 001CCD30  90 06 00 00 */	stw r0, 0(r6)
/* 801D6FB4 001CCD34  41 82 00 08 */	beq lbl_801D6FBC
/* 801D6FB8 001CCD38  90 C3 00 00 */	stw r6, 0(r3)
lbl_801D6FBC:
/* 801D6FBC 001CCD3C  90 C5 00 08 */	stw r6, 8(r5)
/* 801D6FC0 001CCD40  38 66 00 20 */	addi r3, r6, 0x20
/* 801D6FC4 001CCD44  4E 80 00 20 */	blr 

.global OSFreeToHeap
OSFreeToHeap:
/* 801D6FC8 001CCD48  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 801D6FCC 001CCD4C  7C 08 02 A6 */	mflr r0
/* 801D6FD0 001CCD50  38 84 FF E0 */	addi r4, r4, -32
/* 801D6FD4 001CCD54  90 01 00 14 */	stw r0, 0x14(r1)
/* 801D6FD8 001CCD58  1C 03 00 0C */	mulli r0, r3, 0xc
/* 801D6FDC 001CCD5C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 801D6FE0 001CCD60  80 AD C2 6C */	lwz r5, lbl_805A068C-_SDA_BASE_(r13)
/* 801D6FE4 001CCD64  80 C4 00 04 */	lwz r6, 4(r4)
/* 801D6FE8 001CCD68  7F E5 02 14 */	add r31, r5, r0
/* 801D6FEC 001CCD6C  2C 06 00 00 */	cmpwi r6, 0
/* 801D6FF0 001CCD70  80 7F 00 08 */	lwz r3, 8(r31)
/* 801D6FF4 001CCD74  41 82 00 0C */	beq lbl_801D7000
/* 801D6FF8 001CCD78  80 04 00 00 */	lwz r0, 0(r4)
/* 801D6FFC 001CCD7C  90 06 00 00 */	stw r0, 0(r6)
lbl_801D7000:
/* 801D7000 001CCD80  80 A4 00 00 */	lwz r5, 0(r4)
/* 801D7004 001CCD84  2C 05 00 00 */	cmpwi r5, 0
/* 801D7008 001CCD88  40 82 00 0C */	bne lbl_801D7014
/* 801D700C 001CCD8C  80 64 00 04 */	lwz r3, 4(r4)
/* 801D7010 001CCD90  48 00 00 0C */	b lbl_801D701C
lbl_801D7014:
/* 801D7014 001CCD94  80 04 00 04 */	lwz r0, 4(r4)
/* 801D7018 001CCD98  90 05 00 04 */	stw r0, 4(r5)
lbl_801D701C:
/* 801D701C 001CCD9C  90 7F 00 08 */	stw r3, 8(r31)
/* 801D7020 001CCDA0  80 7F 00 04 */	lwz r3, 4(r31)
/* 801D7024 001CCDA4  4B FF FE 01 */	bl DLInsert
/* 801D7028 001CCDA8  90 7F 00 04 */	stw r3, 4(r31)
/* 801D702C 001CCDAC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 801D7030 001CCDB0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 801D7034 001CCDB4  7C 08 03 A6 */	mtlr r0
/* 801D7038 001CCDB8  38 21 00 10 */	addi r1, r1, 0x10
/* 801D703C 001CCDBC  4E 80 00 20 */	blr 

.global OSSetCurrentHeap
OSSetCurrentHeap:
/* 801D7040 001CCDC0  80 0D A5 90 */	lwz r0, lbl_8059E9B0-_SDA_BASE_(r13)
/* 801D7044 001CCDC4  90 6D A5 90 */	stw r3, lbl_8059E9B0-_SDA_BASE_(r13)
/* 801D7048 001CCDC8  7C 03 03 78 */	mr r3, r0
/* 801D704C 001CCDCC  4E 80 00 20 */	blr 

.global OSInitAlloc
OSInitAlloc:
/* 801D7050 001CCDD0  1C E5 00 0C */	mulli r7, r5, 0xc
/* 801D7054 001CCDD4  90 6D C2 6C */	stw r3, lbl_805A068C-_SDA_BASE_(r13)
/* 801D7058 001CCDD8  39 00 00 00 */	li r8, 0
/* 801D705C 001CCDDC  90 AD C2 68 */	stw r5, lbl_805A0688-_SDA_BASE_(r13)
/* 801D7060 001CCDE0  38 C0 00 00 */	li r6, 0
/* 801D7064 001CCDE4  38 A0 FF FF */	li r5, -1
/* 801D7068 001CCDE8  38 60 00 00 */	li r3, 0
/* 801D706C 001CCDEC  48 00 00 20 */	b lbl_801D708C
lbl_801D7070:
/* 801D7070 001CCDF0  80 0D C2 6C */	lwz r0, lbl_805A068C-_SDA_BASE_(r13)
/* 801D7074 001CCDF4  39 08 00 01 */	addi r8, r8, 1
/* 801D7078 001CCDF8  7C A6 01 2E */	stwx r5, r6, r0
/* 801D707C 001CCDFC  7D 20 32 14 */	add r9, r0, r6
/* 801D7080 001CCE00  38 C6 00 0C */	addi r6, r6, 0xc
/* 801D7084 001CCE04  90 69 00 08 */	stw r3, 8(r9)
/* 801D7088 001CCE08  90 69 00 04 */	stw r3, 4(r9)
lbl_801D708C:
/* 801D708C 001CCE0C  80 0D C2 68 */	lwz r0, lbl_805A0688-_SDA_BASE_(r13)
/* 801D7090 001CCE10  7C 08 00 00 */	cmpw r8, r0
/* 801D7094 001CCE14  41 80 FF DC */	blt lbl_801D7070
/* 801D7098 001CCE18  80 6D C2 6C */	lwz r3, lbl_805A068C-_SDA_BASE_(r13)
/* 801D709C 001CCE1C  54 80 00 34 */	rlwinm r0, r4, 0, 0, 0x1a
/* 801D70A0 001CCE20  38 80 FF FF */	li r4, -1
/* 801D70A4 001CCE24  90 0D C2 60 */	stw r0, lbl_805A0680-_SDA_BASE_(r13)
/* 801D70A8 001CCE28  7C 63 3A 14 */	add r3, r3, r7
/* 801D70AC 001CCE2C  38 03 00 1F */	addi r0, r3, 0x1f
/* 801D70B0 001CCE30  90 8D A5 90 */	stw r4, lbl_8059E9B0-_SDA_BASE_(r13)
/* 801D70B4 001CCE34  54 03 00 34 */	rlwinm r3, r0, 0, 0, 0x1a
/* 801D70B8 001CCE38  90 6D C2 64 */	stw r3, lbl_805A0684-_SDA_BASE_(r13)
/* 801D70BC 001CCE3C  4E 80 00 20 */	blr 

.global OSCreateHeap
OSCreateHeap:
/* 801D70C0 001CCE40  80 CD C2 68 */	lwz r6, lbl_805A0688-_SDA_BASE_(r13)
/* 801D70C4 001CCE44  38 03 00 1F */	addi r0, r3, 0x1f
/* 801D70C8 001CCE48  54 07 00 34 */	rlwinm r7, r0, 0, 0, 0x1a
/* 801D70CC 001CCE4C  54 84 00 34 */	rlwinm r4, r4, 0, 0, 0x1a
/* 801D70D0 001CCE50  80 AD C2 6C */	lwz r5, lbl_805A068C-_SDA_BASE_(r13)
/* 801D70D4 001CCE54  38 60 00 00 */	li r3, 0
/* 801D70D8 001CCE58  7C C9 03 A6 */	mtctr r6
/* 801D70DC 001CCE5C  2C 06 00 00 */	cmpwi r6, 0
/* 801D70E0 001CCE60  40 81 00 44 */	ble lbl_801D7124
lbl_801D70E4:
/* 801D70E4 001CCE64  80 05 00 00 */	lwz r0, 0(r5)
/* 801D70E8 001CCE68  2C 00 00 00 */	cmpwi r0, 0
/* 801D70EC 001CCE6C  40 80 00 2C */	bge lbl_801D7118
/* 801D70F0 001CCE70  7C 07 20 50 */	subf r0, r7, r4
/* 801D70F4 001CCE74  38 80 00 00 */	li r4, 0
/* 801D70F8 001CCE78  90 05 00 00 */	stw r0, 0(r5)
/* 801D70FC 001CCE7C  90 87 00 00 */	stw r4, 0(r7)
/* 801D7100 001CCE80  90 87 00 04 */	stw r4, 4(r7)
/* 801D7104 001CCE84  80 05 00 00 */	lwz r0, 0(r5)
/* 801D7108 001CCE88  90 07 00 08 */	stw r0, 8(r7)
/* 801D710C 001CCE8C  90 E5 00 04 */	stw r7, 4(r5)
/* 801D7110 001CCE90  90 85 00 08 */	stw r4, 8(r5)
/* 801D7114 001CCE94  4E 80 00 20 */	blr 
lbl_801D7118:
/* 801D7118 001CCE98  38 A5 00 0C */	addi r5, r5, 0xc
/* 801D711C 001CCE9C  38 63 00 01 */	addi r3, r3, 1
/* 801D7120 001CCEA0  42 00 FF C4 */	bdnz lbl_801D70E4
lbl_801D7124:
/* 801D7124 001CCEA4  38 60 FF FF */	li r3, -1
/* 801D7128 001CCEA8  4E 80 00 20 */	blr 

