.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global gfResourceLoader$7loadResource
gfResourceLoader$7loadResource:
/* 8003D864 000335E4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8003D868 000335E8  7C 08 02 A6 */	mflr r0
/* 8003D86C 000335EC  90 01 00 24 */	stw r0, 0x24(r1)
/* 8003D870 000335F0  39 61 00 20 */	addi r11, r1, 0x20
/* 8003D874 000335F4  48 3B 3A AD */	bl _savegpr_27
/* 8003D878 000335F8  7C 9C 23 78 */	mr r28, r4
/* 8003D87C 000335FC  7C 7B 1B 78 */	mr r27, r3
/* 8003D880 00033600  7C BD 2B 78 */	mr r29, r5
/* 8003D884 00033604  7C DE 33 78 */	mr r30, r6
/* 8003D888 00033608  7C FF 3B 78 */	mr r31, r7
/* 8003D88C 0003360C  7F 83 E3 78 */	mr r3, r28
/* 8003D890 00033610  4B FE 71 A5 */	bl gfHeapManager$7getMaxFreeSize
/* 8003D894 00033614  38 03 F8 00 */	addi r0, r3, -2048
/* 8003D898 00033618  7F 83 E3 78 */	mr r3, r28
/* 8003D89C 0003361C  7C 9F 00 50 */	subf r4, r31, r0
/* 8003D8A0 00033620  90 9B 00 08 */	stw r4, 8(r27)
/* 8003D8A4 00033624  4B FE 71 41 */	bl alloc__13gfHeapManagerFUlUl
/* 8003D8A8 00033628  90 7B 00 10 */	stw r3, 0x10(r27)
/* 8003D8AC 0003362C  7F A3 EB 78 */	mr r3, r29
/* 8003D8B0 00033630  4B FE 27 2D */	bl gfFileIO$7getFileSize
/* 8003D8B4 00033634  88 1B 00 1C */	lbz r0, 0x1c(r27)
/* 8003D8B8 00033638  80 BB 00 10 */	lwz r5, 0x10(r27)
/* 8003D8BC 0003363C  80 9B 00 08 */	lwz r4, 8(r27)
/* 8003D8C0 00033640  54 00 D7 FF */	rlwinm. r0, r0, 0x1a, 0x1f, 0x1f
/* 8003D8C4 00033644  7C 05 22 14 */	add r0, r5, r4
/* 8003D8C8 00033648  7C A3 00 50 */	subf r5, r3, r0
/* 8003D8CC 0003364C  90 BB 00 04 */	stw r5, 4(r27)
/* 8003D8D0 00033650  41 82 00 1C */	beq lbl_8003D8EC
/* 8003D8D4 00033654  7F 63 DB 78 */	mr r3, r27
/* 8003D8D8 00033658  7F A4 EB 78 */	mr r4, r29
/* 8003D8DC 0003365C  38 C0 00 00 */	li r6, 0
/* 8003D8E0 00033660  38 E0 00 00 */	li r7, 0
/* 8003D8E4 00033664  4B FE 3F 05 */	bl gfFileIOHandle$7readRequestCached_315
/* 8003D8E8 00033668  48 00 00 18 */	b lbl_8003D900
lbl_8003D8EC:
/* 8003D8EC 0003366C  7F 63 DB 78 */	mr r3, r27
/* 8003D8F0 00033670  7F A4 EB 78 */	mr r4, r29
/* 8003D8F4 00033674  38 C0 00 00 */	li r6, 0
/* 8003D8F8 00033678  38 E0 00 00 */	li r7, 0
/* 8003D8FC 0003367C  4B FE 3C E5 */	bl gfFileIOHandle$7readRequest_312
lbl_8003D900:
/* 8003D900 00033680  88 1B 00 1C */	lbz r0, 0x1c(r27)
/* 8003D904 00033684  39 61 00 20 */	addi r11, r1, 0x20
/* 8003D908 00033688  93 9B 00 14 */	stw r28, 0x14(r27)
/* 8003D90C 0003368C  54 00 06 6E */	rlwinm r0, r0, 0, 0x19, 0x17
/* 8003D910 00033690  80 7B 00 10 */	lwz r3, 0x10(r27)
/* 8003D914 00033694  98 1B 00 1C */	stb r0, 0x1c(r27)
/* 8003D918 00033698  93 DB 00 18 */	stw r30, 0x18(r27)
/* 8003D91C 0003369C  48 3B 3A 51 */	bl _restgpr_27
/* 8003D920 000336A0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8003D924 000336A4  7C 08 03 A6 */	mtlr r0
/* 8003D928 000336A8  38 21 00 20 */	addi r1, r1, 0x20
/* 8003D92C 000336AC  4E 80 00 20 */	blr 

.global gfResourceLoader$7loadResourceMemSizeOrder
gfResourceLoader$7loadResourceMemSizeOrder:
/* 8003D930 000336B0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8003D934 000336B4  7C 08 02 A6 */	mflr r0
/* 8003D938 000336B8  90 01 00 24 */	stw r0, 0x24(r1)
/* 8003D93C 000336BC  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8003D940 000336C0  7C DF 33 78 */	mr r31, r6
/* 8003D944 000336C4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8003D948 000336C8  7C BE 2B 78 */	mr r30, r5
/* 8003D94C 000336CC  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8003D950 000336D0  7C 9D 23 78 */	mr r29, r4
/* 8003D954 000336D4  7C E4 3B 78 */	mr r4, r7
/* 8003D958 000336D8  93 81 00 10 */	stw r28, 0x10(r1)
/* 8003D95C 000336DC  7C 7C 1B 78 */	mr r28, r3
/* 8003D960 000336E0  90 E3 00 08 */	stw r7, 8(r3)
/* 8003D964 000336E4  7F A3 EB 78 */	mr r3, r29
/* 8003D968 000336E8  4B FE 70 7D */	bl alloc__13gfHeapManagerFUlUl
/* 8003D96C 000336EC  90 7C 00 10 */	stw r3, 0x10(r28)
/* 8003D970 000336F0  7F C3 F3 78 */	mr r3, r30
/* 8003D974 000336F4  4B FE 26 69 */	bl gfFileIO$7getFileSize
/* 8003D978 000336F8  88 1C 00 1C */	lbz r0, 0x1c(r28)
/* 8003D97C 000336FC  80 BC 00 10 */	lwz r5, 0x10(r28)
/* 8003D980 00033700  80 9C 00 08 */	lwz r4, 8(r28)
/* 8003D984 00033704  54 00 D7 FF */	rlwinm. r0, r0, 0x1a, 0x1f, 0x1f
/* 8003D988 00033708  7C 05 22 14 */	add r0, r5, r4
/* 8003D98C 0003370C  7C A3 00 50 */	subf r5, r3, r0
/* 8003D990 00033710  90 BC 00 04 */	stw r5, 4(r28)
/* 8003D994 00033714  41 82 00 1C */	beq lbl_8003D9B0
/* 8003D998 00033718  7F 83 E3 78 */	mr r3, r28
/* 8003D99C 0003371C  7F C4 F3 78 */	mr r4, r30
/* 8003D9A0 00033720  38 C0 00 00 */	li r6, 0
/* 8003D9A4 00033724  38 E0 00 00 */	li r7, 0
/* 8003D9A8 00033728  4B FE 3E 41 */	bl gfFileIOHandle$7readRequestCached_315
/* 8003D9AC 0003372C  48 00 00 18 */	b lbl_8003D9C4
lbl_8003D9B0:
/* 8003D9B0 00033730  7F 83 E3 78 */	mr r3, r28
/* 8003D9B4 00033734  7F C4 F3 78 */	mr r4, r30
/* 8003D9B8 00033738  38 C0 00 00 */	li r6, 0
/* 8003D9BC 0003373C  38 E0 00 00 */	li r7, 0
/* 8003D9C0 00033740  4B FE 3C 21 */	bl gfFileIOHandle$7readRequest_312
lbl_8003D9C4:
/* 8003D9C4 00033744  88 1C 00 1C */	lbz r0, 0x1c(r28)
/* 8003D9C8 00033748  93 BC 00 14 */	stw r29, 0x14(r28)
/* 8003D9CC 0003374C  54 00 06 6E */	rlwinm r0, r0, 0, 0x19, 0x17
/* 8003D9D0 00033750  80 7C 00 10 */	lwz r3, 0x10(r28)
/* 8003D9D4 00033754  98 1C 00 1C */	stb r0, 0x1c(r28)
/* 8003D9D8 00033758  93 FC 00 18 */	stw r31, 0x18(r28)
/* 8003D9DC 0003375C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8003D9E0 00033760  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8003D9E4 00033764  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8003D9E8 00033768  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8003D9EC 0003376C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8003D9F0 00033770  7C 08 03 A6 */	mtlr r0
/* 8003D9F4 00033774  38 21 00 20 */	addi r1, r1, 0x20
/* 8003D9F8 00033778  4E 80 00 20 */	blr 

.global gfResourceLoader$7isLoaded
gfResourceLoader$7isLoaded:
/* 8003D9FC 0003377C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8003DA00 00033780  7C 08 02 A6 */	mflr r0
/* 8003DA04 00033784  90 01 00 14 */	stw r0, 0x14(r1)
/* 8003DA08 00033788  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8003DA0C 0003378C  7C 7F 1B 78 */	mr r31, r3
/* 8003DA10 00033790  88 03 00 1C */	lbz r0, 0x1c(r3)
/* 8003DA14 00033794  54 00 CF FE */	rlwinm r0, r0, 0x19, 0x1f, 0x1f
/* 8003DA18 00033798  28 00 00 01 */	cmplwi r0, 1
/* 8003DA1C 0003379C  40 82 00 0C */	bne lbl_8003DA28
/* 8003DA20 000337A0  38 60 00 01 */	li r3, 1
/* 8003DA24 000337A4  48 00 00 68 */	b lbl_8003DA8C
lbl_8003DA28:
/* 8003DA28 000337A8  4B FE 45 11 */	bl gfFileIOHandle$7isReady
/* 8003DA2C 000337AC  2C 03 00 00 */	cmpwi r3, 0
/* 8003DA30 000337B0  40 82 00 0C */	bne lbl_8003DA3C
/* 8003DA34 000337B4  38 60 00 00 */	li r3, 0
/* 8003DA38 000337B8  48 00 00 54 */	b lbl_8003DA8C
lbl_8003DA3C:
/* 8003DA3C 000337BC  80 7F 00 04 */	lwz r3, 4(r31)
/* 8003DA40 000337C0  48 1C 85 99 */	bl CXGetUncompressedSize
/* 8003DA44 000337C4  90 7F 00 0C */	stw r3, 0xc(r31)
/* 8003DA48 000337C8  80 7F 00 04 */	lwz r3, 4(r31)
/* 8003DA4C 000337CC  80 9F 00 10 */	lwz r4, 0x10(r31)
/* 8003DA50 000337D0  48 1C 85 C9 */	bl CXUncompressLZ
/* 8003DA54 000337D4  80 7F 00 10 */	lwz r3, 0x10(r31)
/* 8003DA58 000337D8  80 9F 00 0C */	lwz r4, 0xc(r31)
/* 8003DA5C 000337DC  48 19 9C 8D */	bl DCFlushRange
/* 8003DA60 000337E0  80 7F 00 18 */	lwz r3, 0x18(r31)
/* 8003DA64 000337E4  2C 03 00 00 */	cmpwi r3, 0
/* 8003DA68 000337E8  41 82 00 14 */	beq lbl_8003DA7C
/* 8003DA6C 000337EC  80 9F 00 10 */	lwz r4, 0x10(r31)
/* 8003DA70 000337F0  80 BF 00 0C */	lwz r5, 0xc(r31)
/* 8003DA74 000337F4  80 DF 00 14 */	lwz r6, 0x14(r31)
/* 8003DA78 000337F8  4B FD 6E 19 */	bl gfArchive$7setFileImage
lbl_8003DA7C:
/* 8003DA7C 000337FC  88 1F 00 1C */	lbz r0, 0x1c(r31)
/* 8003DA80 00033800  38 60 00 01 */	li r3, 1
/* 8003DA84 00033804  60 00 00 80 */	ori r0, r0, 0x80
/* 8003DA88 00033808  98 1F 00 1C */	stb r0, 0x1c(r31)
lbl_8003DA8C:
/* 8003DA8C 0003380C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8003DA90 00033810  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8003DA94 00033814  7C 08 03 A6 */	mtlr r0
/* 8003DA98 00033818  38 21 00 10 */	addi r1, r1, 0x10
/* 8003DA9C 0003381C  4E 80 00 20 */	blr 

.global gfResourceLoader$7freeResource
gfResourceLoader$7freeResource:
/* 8003DAA0 00033820  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8003DAA4 00033824  7C 08 02 A6 */	mflr r0
/* 8003DAA8 00033828  90 01 00 14 */	stw r0, 0x14(r1)
/* 8003DAAC 0003382C  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8003DAB0 00033830  7C 7F 1B 78 */	mr r31, r3
/* 8003DAB4 00033834  80 03 00 10 */	lwz r0, 0x10(r3)
/* 8003DAB8 00033838  2C 00 00 00 */	cmpwi r0, 0
/* 8003DABC 0003383C  41 82 00 0C */	beq lbl_8003DAC8
/* 8003DAC0 00033840  7C 03 03 78 */	mr r3, r0
/* 8003DAC4 00033844  4B FE 6F 89 */	bl free__13gfHeapManagerFPv
lbl_8003DAC8:
/* 8003DAC8 00033848  88 7F 00 1C */	lbz r3, 0x1c(r31)
/* 8003DACC 0003384C  38 80 00 00 */	li r4, 0
/* 8003DAD0 00033850  38 00 00 FF */	li r0, 0xff
/* 8003DAD4 00033854  90 9F 00 04 */	stw r4, 4(r31)
/* 8003DAD8 00033858  54 63 06 6E */	rlwinm r3, r3, 0, 0x19, 0x17
/* 8003DADC 0003385C  90 9F 00 08 */	stw r4, 8(r31)
/* 8003DAE0 00033860  90 9F 00 0C */	stw r4, 0xc(r31)
/* 8003DAE4 00033864  90 9F 00 10 */	stw r4, 0x10(r31)
/* 8003DAE8 00033868  98 7F 00 1C */	stb r3, 0x1c(r31)
/* 8003DAEC 0003386C  90 9F 00 18 */	stw r4, 0x18(r31)
/* 8003DAF0 00033870  90 1F 00 14 */	stw r0, 0x14(r31)
/* 8003DAF4 00033874  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8003DAF8 00033878  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8003DAFC 0003387C  7C 08 03 A6 */	mtlr r0
/* 8003DB00 00033880  38 21 00 10 */	addi r1, r1, 0x10
/* 8003DB04 00033884  4E 80 00 20 */	blr 

