.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global VFipdm_init_diskmanager
VFipdm_init_diskmanager:
/* 803AE310 003A4090  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803AE314 003A4094  7C 08 02 A6 */	mflr r0
/* 803AE318 003A4098  38 80 00 00 */	li r4, 0
/* 803AE31C 003A409C  38 A0 0B 64 */	li r5, 0xb64
/* 803AE320 003A40A0  90 01 00 14 */	stw r0, 0x14(r1)
/* 803AE324 003A40A4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803AE328 003A40A8  3F E0 80 54 */	lis r31, lbl_8053A6E0@ha
/* 803AE32C 003A40AC  38 7F A6 E0 */	addi r3, r31, lbl_8053A6E0@l
/* 803AE330 003A40B0  4B FF B4 3D */	bl VFipf_memset
/* 803AE334 003A40B4  38 FF A6 E0 */	addi r7, r31, -22816
/* 803AE338 003A40B8  38 C0 00 00 */	li r6, 0
/* 803AE33C 003A40BC  90 C7 01 B8 */	stw r6, 0x1b8(r7)
/* 803AE340 003A40C0  38 00 00 18 */	li r0, 0x18
/* 803AE344 003A40C4  1C 60 00 34 */	mulli r3, r0, 0x34
/* 803AE348 003A40C8  90 C7 01 EC */	stw r6, 0x1ec(r7)
/* 803AE34C 003A40CC  90 C7 02 20 */	stw r6, 0x220(r7)
/* 803AE350 003A40D0  7C A7 1A 14 */	add r5, r7, r3
/* 803AE354 003A40D4  1C 00 00 2C */	mulli r0, r0, 0x2c
/* 803AE358 003A40D8  38 60 00 00 */	li r3, 0
/* 803AE35C 003A40DC  90 C7 02 54 */	stw r6, 0x254(r7)
/* 803AE360 003A40E0  90 C7 02 88 */	stw r6, 0x288(r7)
/* 803AE364 003A40E4  7C 87 02 14 */	add r4, r7, r0
/* 803AE368 003A40E8  90 C7 02 BC */	stw r6, 0x2bc(r7)
/* 803AE36C 003A40EC  90 C7 02 F0 */	stw r6, 0x2f0(r7)
/* 803AE370 003A40F0  90 C7 03 24 */	stw r6, 0x324(r7)
/* 803AE374 003A40F4  90 C7 03 58 */	stw r6, 0x358(r7)
/* 803AE378 003A40F8  90 C7 03 8C */	stw r6, 0x38c(r7)
/* 803AE37C 003A40FC  90 C7 03 C0 */	stw r6, 0x3c0(r7)
/* 803AE380 003A4100  90 C7 03 F4 */	stw r6, 0x3f4(r7)
/* 803AE384 003A4104  90 C7 04 28 */	stw r6, 0x428(r7)
/* 803AE388 003A4108  90 C7 04 5C */	stw r6, 0x45c(r7)
/* 803AE38C 003A410C  90 C7 04 90 */	stw r6, 0x490(r7)
/* 803AE390 003A4110  90 C7 04 C4 */	stw r6, 0x4c4(r7)
/* 803AE394 003A4114  90 C7 04 F8 */	stw r6, 0x4f8(r7)
/* 803AE398 003A4118  90 C7 05 2C */	stw r6, 0x52c(r7)
/* 803AE39C 003A411C  90 C7 05 60 */	stw r6, 0x560(r7)
/* 803AE3A0 003A4120  90 C7 05 94 */	stw r6, 0x594(r7)
/* 803AE3A4 003A4124  90 C7 05 C8 */	stw r6, 0x5c8(r7)
/* 803AE3A8 003A4128  90 C7 05 FC */	stw r6, 0x5fc(r7)
/* 803AE3AC 003A412C  90 C7 06 30 */	stw r6, 0x630(r7)
/* 803AE3B0 003A4130  90 C7 06 64 */	stw r6, 0x664(r7)
/* 803AE3B4 003A4134  90 C5 01 B8 */	stw r6, 0x1b8(r5)
/* 803AE3B8 003A4138  90 C5 01 EC */	stw r6, 0x1ec(r5)
/* 803AE3BC 003A413C  90 C7 06 FC */	stw r6, 0x6fc(r7)
/* 803AE3C0 003A4140  90 C7 07 28 */	stw r6, 0x728(r7)
/* 803AE3C4 003A4144  90 C7 07 54 */	stw r6, 0x754(r7)
/* 803AE3C8 003A4148  90 C7 07 80 */	stw r6, 0x780(r7)
/* 803AE3CC 003A414C  90 C7 07 AC */	stw r6, 0x7ac(r7)
/* 803AE3D0 003A4150  90 C7 07 D8 */	stw r6, 0x7d8(r7)
/* 803AE3D4 003A4154  90 C7 08 04 */	stw r6, 0x804(r7)
/* 803AE3D8 003A4158  90 C7 08 30 */	stw r6, 0x830(r7)
/* 803AE3DC 003A415C  90 C7 08 5C */	stw r6, 0x85c(r7)
/* 803AE3E0 003A4160  90 C7 08 88 */	stw r6, 0x888(r7)
/* 803AE3E4 003A4164  90 C7 08 B4 */	stw r6, 0x8b4(r7)
/* 803AE3E8 003A4168  90 C7 08 E0 */	stw r6, 0x8e0(r7)
/* 803AE3EC 003A416C  90 C7 09 0C */	stw r6, 0x90c(r7)
/* 803AE3F0 003A4170  90 C7 09 38 */	stw r6, 0x938(r7)
/* 803AE3F4 003A4174  90 C7 09 64 */	stw r6, 0x964(r7)
/* 803AE3F8 003A4178  90 C7 09 90 */	stw r6, 0x990(r7)
/* 803AE3FC 003A417C  90 C7 09 BC */	stw r6, 0x9bc(r7)
/* 803AE400 003A4180  90 C7 09 E8 */	stw r6, 0x9e8(r7)
/* 803AE404 003A4184  90 C7 0A 14 */	stw r6, 0xa14(r7)
/* 803AE408 003A4188  90 C7 0A 40 */	stw r6, 0xa40(r7)
/* 803AE40C 003A418C  90 C7 0A 6C */	stw r6, 0xa6c(r7)
/* 803AE410 003A4190  90 C7 0A 98 */	stw r6, 0xa98(r7)
/* 803AE414 003A4194  90 C7 0A C4 */	stw r6, 0xac4(r7)
/* 803AE418 003A4198  90 C7 0A F0 */	stw r6, 0xaf0(r7)
/* 803AE41C 003A419C  90 C4 06 FC */	stw r6, 0x6fc(r4)
/* 803AE420 003A41A0  90 C4 07 28 */	stw r6, 0x728(r4)
/* 803AE424 003A41A4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803AE428 003A41A8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803AE42C 003A41AC  7C 08 03 A6 */	mtlr r0
/* 803AE430 003A41B0  38 21 00 10 */	addi r1, r1, 0x10
/* 803AE434 003A41B4  4E 80 00 20 */	blr 

.global VFipdm_open_disk
VFipdm_open_disk:
/* 803AE438 003A41B8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803AE43C 003A41BC  7C 08 02 A6 */	mflr r0
/* 803AE440 003A41C0  2C 04 00 00 */	cmpwi r4, 0
/* 803AE444 003A41C4  90 01 00 14 */	stw r0, 0x14(r1)
/* 803AE448 003A41C8  40 82 00 0C */	bne lbl_803AE454
/* 803AE44C 003A41CC  38 60 00 01 */	li r3, 1
/* 803AE450 003A41D0  48 00 00 20 */	b lbl_803AE470
lbl_803AE454:
/* 803AE454 003A41D4  38 00 00 00 */	li r0, 0
/* 803AE458 003A41D8  90 04 00 00 */	stw r0, 0(r4)
/* 803AE45C 003A41DC  4B FF D4 69 */	bl VFipdm_disk_open_disk
/* 803AE460 003A41E0  7C 03 00 D0 */	neg r0, r3
/* 803AE464 003A41E4  7C 00 1B 78 */	or r0, r0, r3
/* 803AE468 003A41E8  7C 00 FE 70 */	srawi r0, r0, 0x1f
/* 803AE46C 003A41EC  7C 63 00 38 */	and r3, r3, r0
lbl_803AE470:
/* 803AE470 003A41F0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803AE474 003A41F4  7C 08 03 A6 */	mtlr r0
/* 803AE478 003A41F8  38 21 00 10 */	addi r1, r1, 0x10
/* 803AE47C 003A41FC  4E 80 00 20 */	blr 

.global VFipdm_close_disk
VFipdm_close_disk:
/* 803AE480 003A4200  2C 03 00 00 */	cmpwi r3, 0
/* 803AE484 003A4204  40 82 00 0C */	bne lbl_803AE490
/* 803AE488 003A4208  38 60 00 01 */	li r3, 1
/* 803AE48C 003A420C  4E 80 00 20 */	blr 
lbl_803AE490:
/* 803AE490 003A4210  4B FF D5 A0 */	b VFipdm_disk_close_disk
/* 803AE494 003A4214  4E 80 00 20 */	blr 

.global VFipdm_open_partition
VFipdm_open_partition:
/* 803AE498 003A4218  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803AE49C 003A421C  7C 08 02 A6 */	mflr r0
/* 803AE4A0 003A4220  2C 03 00 00 */	cmpwi r3, 0
/* 803AE4A4 003A4224  90 01 00 14 */	stw r0, 0x14(r1)
/* 803AE4A8 003A4228  40 82 00 0C */	bne lbl_803AE4B4
/* 803AE4AC 003A422C  38 60 00 01 */	li r3, 1
/* 803AE4B0 003A4230  48 00 00 34 */	b lbl_803AE4E4
lbl_803AE4B4:
/* 803AE4B4 003A4234  2C 05 00 00 */	cmpwi r5, 0
/* 803AE4B8 003A4238  40 82 00 0C */	bne lbl_803AE4C4
/* 803AE4BC 003A423C  38 60 00 01 */	li r3, 1
/* 803AE4C0 003A4240  48 00 00 24 */	b lbl_803AE4E4
lbl_803AE4C4:
/* 803AE4C4 003A4244  38 00 00 00 */	li r0, 0
/* 803AE4C8 003A4248  54 84 04 3E */	clrlwi r4, r4, 0x10
/* 803AE4CC 003A424C  90 05 00 00 */	stw r0, 0(r5)
/* 803AE4D0 003A4250  4B FF E7 F9 */	bl VFipdm_part_open_partition
/* 803AE4D4 003A4254  7C 03 00 D0 */	neg r0, r3
/* 803AE4D8 003A4258  7C 00 1B 78 */	or r0, r0, r3
/* 803AE4DC 003A425C  7C 00 FE 70 */	srawi r0, r0, 0x1f
/* 803AE4E0 003A4260  7C 63 00 38 */	and r3, r3, r0
lbl_803AE4E4:
/* 803AE4E4 003A4264  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803AE4E8 003A4268  7C 08 03 A6 */	mtlr r0
/* 803AE4EC 003A426C  38 21 00 10 */	addi r1, r1, 0x10
/* 803AE4F0 003A4270  4E 80 00 20 */	blr 

.global VFipdm_close_partition
VFipdm_close_partition:
/* 803AE4F4 003A4274  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803AE4F8 003A4278  7C 08 02 A6 */	mflr r0
/* 803AE4FC 003A427C  2C 03 00 00 */	cmpwi r3, 0
/* 803AE500 003A4280  90 01 00 14 */	stw r0, 0x14(r1)
/* 803AE504 003A4284  40 82 00 0C */	bne lbl_803AE510
/* 803AE508 003A4288  38 60 00 01 */	li r3, 1
/* 803AE50C 003A428C  48 00 00 18 */	b lbl_803AE524
lbl_803AE510:
/* 803AE510 003A4290  4B FF E8 D5 */	bl VFipdm_part_close_partition
/* 803AE514 003A4294  7C 03 00 D0 */	neg r0, r3
/* 803AE518 003A4298  7C 00 1B 78 */	or r0, r0, r3
/* 803AE51C 003A429C  7C 00 FE 70 */	srawi r0, r0, 0x1f
/* 803AE520 003A42A0  7C 63 00 38 */	and r3, r3, r0
lbl_803AE524:
/* 803AE524 003A42A4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803AE528 003A42A8  7C 08 03 A6 */	mtlr r0
/* 803AE52C 003A42AC  38 21 00 10 */	addi r1, r1, 0x10
/* 803AE530 003A42B0  4E 80 00 20 */	blr 

