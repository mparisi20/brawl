.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global gti2NewOutgoingConnection
gti2NewOutgoingConnection:
/* 803741A4 00369F24  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803741A8 00369F28  7C 08 02 A6 */	mflr r0
/* 803741AC 00369F2C  90 01 00 14 */	stw r0, 0x14(r1)
/* 803741B0 00369F30  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803741B4 00369F34  7C 9F 23 78 */	mr r31, r4
/* 803741B8 00369F38  48 00 3E CD */	bl gti2NewSocketConnection
/* 803741BC 00369F3C  2C 03 00 00 */	cmpwi r3, 0
/* 803741C0 00369F40  41 82 00 08 */	beq lbl_803741C8
/* 803741C4 00369F44  48 00 00 20 */	b lbl_803741E4
lbl_803741C8:
/* 803741C8 00369F48  80 9F 00 00 */	lwz r4, 0(r31)
/* 803741CC 00369F4C  38 A0 00 00 */	li r5, 0
/* 803741D0 00369F50  38 00 00 01 */	li r0, 1
/* 803741D4 00369F54  38 60 00 00 */	li r3, 0
/* 803741D8 00369F58  90 A4 00 0C */	stw r5, 0xc(r4)
/* 803741DC 00369F5C  80 9F 00 00 */	lwz r4, 0(r31)
/* 803741E0 00369F60  90 04 00 10 */	stw r0, 0x10(r4)
lbl_803741E4:
/* 803741E4 00369F64  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803741E8 00369F68  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803741EC 00369F6C  7C 08 03 A6 */	mtlr r0
/* 803741F0 00369F70  38 21 00 10 */	addi r1, r1, 0x10
/* 803741F4 00369F74  4E 80 00 20 */	blr 

.global gti2NewIncomingConnection
gti2NewIncomingConnection:
/* 803741F8 00369F78  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803741FC 00369F7C  7C 08 02 A6 */	mflr r0
/* 80374200 00369F80  90 01 00 14 */	stw r0, 0x14(r1)
/* 80374204 00369F84  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80374208 00369F88  7C 9F 23 78 */	mr r31, r4
/* 8037420C 00369F8C  48 00 3E 79 */	bl gti2NewSocketConnection
/* 80374210 00369F90  2C 03 00 00 */	cmpwi r3, 0
/* 80374214 00369F94  41 82 00 08 */	beq lbl_8037421C
/* 80374218 00369F98  48 00 00 20 */	b lbl_80374238
lbl_8037421C:
/* 8037421C 00369F9C  80 9F 00 00 */	lwz r4, 0(r31)
/* 80374220 00369FA0  38 A0 00 02 */	li r5, 2
/* 80374224 00369FA4  38 00 00 00 */	li r0, 0
/* 80374228 00369FA8  38 60 00 00 */	li r3, 0
/* 8037422C 00369FAC  90 A4 00 0C */	stw r5, 0xc(r4)
/* 80374230 00369FB0  80 9F 00 00 */	lwz r4, 0(r31)
/* 80374234 00369FB4  90 04 00 10 */	stw r0, 0x10(r4)
lbl_80374238:
/* 80374238 00369FB8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8037423C 00369FBC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80374240 00369FC0  7C 08 03 A6 */	mtlr r0
/* 80374244 00369FC4  38 21 00 10 */	addi r1, r1, 0x10
/* 80374248 00369FC8  4E 80 00 20 */	blr 

.global gti2StartConnectionAttempt
gti2StartConnectionAttempt:
/* 8037424C 00369FCC  94 21 FF C0 */	stwu r1, -0x40(r1)
/* 80374250 00369FD0  7C 08 02 A6 */	mflr r0
/* 80374254 00369FD4  90 01 00 44 */	stw r0, 0x44(r1)
/* 80374258 00369FD8  93 E1 00 3C */	stw r31, 0x3c(r1)
/* 8037425C 00369FDC  7C DF 33 78 */	mr r31, r6
/* 80374260 00369FE0  93 C1 00 38 */	stw r30, 0x38(r1)
/* 80374264 00369FE4  7C 7E 1B 78 */	mr r30, r3
/* 80374268 00369FE8  38 61 00 08 */	addi r3, r1, 8
/* 8037426C 00369FEC  90 81 00 08 */	stw r4, 8(r1)
/* 80374270 00369FF0  38 81 00 0C */	addi r4, r1, 0xc
/* 80374274 00369FF4  90 A1 00 0C */	stw r5, 0xc(r1)
/* 80374278 00369FF8  48 00 48 D9 */	bl gti2MessageCheck
/* 8037427C 00369FFC  80 61 00 0C */	lwz r3, 0xc(r1)
/* 80374280 0036A000  2C 03 00 00 */	cmpwi r3, 0
/* 80374284 0036A004  40 81 00 30 */	ble lbl_803742B4
/* 80374288 0036A008  4B FE 9D 61 */	bl gsimalloc
/* 8037428C 0036A00C  2C 03 00 00 */	cmpwi r3, 0
/* 80374290 0036A010  90 7E 00 38 */	stw r3, 0x38(r30)
/* 80374294 0036A014  40 82 00 0C */	bne lbl_803742A0
/* 80374298 0036A018  38 60 00 01 */	li r3, 1
/* 8037429C 0036A01C  48 00 00 6C */	b lbl_80374308
lbl_803742A0:
/* 803742A0 0036A020  80 81 00 08 */	lwz r4, 8(r1)
/* 803742A4 0036A024  80 A1 00 0C */	lwz r5, 0xc(r1)
/* 803742A8 0036A028  4B C9 00 91 */	bl memcpy
/* 803742AC 0036A02C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 803742B0 0036A030  90 1E 00 3C */	stw r0, 0x3c(r30)
lbl_803742B4:
/* 803742B4 0036A034  2C 1F 00 00 */	cmpwi r31, 0
/* 803742B8 0036A038  41 82 00 24 */	beq lbl_803742DC
/* 803742BC 0036A03C  80 7F 00 00 */	lwz r3, 0(r31)
/* 803742C0 0036A040  80 1F 00 04 */	lwz r0, 4(r31)
/* 803742C4 0036A044  90 7E 00 28 */	stw r3, 0x28(r30)
/* 803742C8 0036A048  90 1E 00 2C */	stw r0, 0x2c(r30)
/* 803742CC 0036A04C  80 7F 00 08 */	lwz r3, 8(r31)
/* 803742D0 0036A050  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803742D4 0036A054  90 7E 00 30 */	stw r3, 0x30(r30)
/* 803742D8 0036A058  90 1E 00 34 */	stw r0, 0x34(r30)
lbl_803742DC:
/* 803742DC 0036A05C  38 61 00 10 */	addi r3, r1, 0x10
/* 803742E0 0036A060  4B FF F0 DD */	bl gti2GetChallenge
/* 803742E4 0036A064  38 7E 00 68 */	addi r3, r30, 0x68
/* 803742E8 0036A068  38 81 00 10 */	addi r4, r1, 0x10
/* 803742EC 0036A06C  4B FF F1 E1 */	bl gti2GetResponse
/* 803742F0 0036A070  7F C3 F3 78 */	mr r3, r30
/* 803742F4 0036A074  38 81 00 10 */	addi r4, r1, 0x10
/* 803742F8 0036A078  48 00 30 C5 */	bl gti2SendClientChallenge
/* 803742FC 0036A07C  38 00 00 00 */	li r0, 0
/* 80374300 0036A080  38 60 00 00 */	li r3, 0
/* 80374304 0036A084  90 1E 00 0C */	stw r0, 0xc(r30)
lbl_80374308:
/* 80374308 0036A088  80 01 00 44 */	lwz r0, 0x44(r1)
/* 8037430C 0036A08C  83 E1 00 3C */	lwz r31, 0x3c(r1)
/* 80374310 0036A090  83 C1 00 38 */	lwz r30, 0x38(r1)
/* 80374314 0036A094  7C 08 03 A6 */	mtlr r0
/* 80374318 0036A098  38 21 00 40 */	addi r1, r1, 0x40
/* 8037431C 0036A09C  4E 80 00 20 */	blr 

.global gti2AcceptConnection
gti2AcceptConnection:
/* 80374320 0036A0A0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80374324 0036A0A4  7C 08 02 A6 */	mflr r0
/* 80374328 0036A0A8  90 01 00 14 */	stw r0, 0x14(r1)
/* 8037432C 0036A0AC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80374330 0036A0B0  7C 9F 23 78 */	mr r31, r4
/* 80374334 0036A0B4  93 C1 00 08 */	stw r30, 8(r1)
/* 80374338 0036A0B8  7C 7E 1B 78 */	mr r30, r3
/* 8037433C 0036A0BC  80 03 00 14 */	lwz r0, 0x14(r3)
/* 80374340 0036A0C0  2C 00 00 00 */	cmpwi r0, 0
/* 80374344 0036A0C4  41 82 00 14 */	beq lbl_80374358
/* 80374348 0036A0C8  38 00 00 00 */	li r0, 0
/* 8037434C 0036A0CC  90 03 00 14 */	stw r0, 0x14(r3)
/* 80374350 0036A0D0  38 60 00 00 */	li r3, 0
/* 80374354 0036A0D4  48 00 00 58 */	b lbl_803743AC
lbl_80374358:
/* 80374358 0036A0D8  80 03 00 0C */	lwz r0, 0xc(r3)
/* 8037435C 0036A0DC  38 80 00 00 */	li r4, 0
/* 80374360 0036A0E0  90 83 00 14 */	stw r4, 0x14(r3)
/* 80374364 0036A0E4  2C 00 00 04 */	cmpwi r0, 4
/* 80374368 0036A0E8  41 82 00 0C */	beq lbl_80374374
/* 8037436C 0036A0EC  38 60 00 00 */	li r3, 0
/* 80374370 0036A0F0  48 00 00 3C */	b lbl_803743AC
lbl_80374374:
/* 80374374 0036A0F4  48 00 31 2D */	bl gti2SendAccept
/* 80374378 0036A0F8  38 00 00 05 */	li r0, 5
/* 8037437C 0036A0FC  2C 1F 00 00 */	cmpwi r31, 0
/* 80374380 0036A100  90 1E 00 0C */	stw r0, 0xc(r30)
/* 80374384 0036A104  41 82 00 24 */	beq lbl_803743A8
/* 80374388 0036A108  80 7F 00 00 */	lwz r3, 0(r31)
/* 8037438C 0036A10C  80 1F 00 04 */	lwz r0, 4(r31)
/* 80374390 0036A110  90 7E 00 28 */	stw r3, 0x28(r30)
/* 80374394 0036A114  90 1E 00 2C */	stw r0, 0x2c(r30)
/* 80374398 0036A118  80 7F 00 08 */	lwz r3, 8(r31)
/* 8037439C 0036A11C  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 803743A0 0036A120  90 7E 00 30 */	stw r3, 0x30(r30)
/* 803743A4 0036A124  90 1E 00 34 */	stw r0, 0x34(r30)
lbl_803743A8:
/* 803743A8 0036A128  38 60 00 01 */	li r3, 1
lbl_803743AC:
/* 803743AC 0036A12C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803743B0 0036A130  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803743B4 0036A134  83 C1 00 08 */	lwz r30, 8(r1)
/* 803743B8 0036A138  7C 08 03 A6 */	mtlr r0
/* 803743BC 0036A13C  38 21 00 10 */	addi r1, r1, 0x10
/* 803743C0 0036A140  4E 80 00 20 */	blr 

.global gti2RejectConnection
gti2RejectConnection:
/* 803743C4 0036A144  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803743C8 0036A148  7C 08 02 A6 */	mflr r0
/* 803743CC 0036A14C  90 01 00 24 */	stw r0, 0x24(r1)
/* 803743D0 0036A150  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803743D4 0036A154  7C 7F 1B 78 */	mr r31, r3
/* 803743D8 0036A158  90 81 00 08 */	stw r4, 8(r1)
/* 803743DC 0036A15C  38 80 00 00 */	li r4, 0
/* 803743E0 0036A160  90 A1 00 0C */	stw r5, 0xc(r1)
/* 803743E4 0036A164  80 03 00 0C */	lwz r0, 0xc(r3)
/* 803743E8 0036A168  90 83 00 14 */	stw r4, 0x14(r3)
/* 803743EC 0036A16C  2C 00 00 04 */	cmpwi r0, 4
/* 803743F0 0036A170  40 82 00 28 */	bne lbl_80374418
/* 803743F4 0036A174  38 61 00 08 */	addi r3, r1, 8
/* 803743F8 0036A178  38 81 00 0C */	addi r4, r1, 0xc
/* 803743FC 0036A17C  48 00 47 55 */	bl gti2MessageCheck
/* 80374400 0036A180  80 81 00 08 */	lwz r4, 8(r1)
/* 80374404 0036A184  7F E3 FB 78 */	mr r3, r31
/* 80374408 0036A188  80 A1 00 0C */	lwz r5, 0xc(r1)
/* 8037440C 0036A18C  48 00 31 5D */	bl gti2SendReject
/* 80374410 0036A190  38 00 00 06 */	li r0, 6
/* 80374414 0036A194  90 1F 00 0C */	stw r0, 0xc(r31)
lbl_80374418:
/* 80374418 0036A198  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8037441C 0036A19C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80374420 0036A1A0  7C 08 03 A6 */	mtlr r0
/* 80374424 0036A1A4  38 21 00 20 */	addi r1, r1, 0x20
/* 80374428 0036A1A8  4E 80 00 20 */	blr 

.global gti2ConnectionSendData
gti2ConnectionSendData:
/* 8037442C 0036A1AC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80374430 0036A1B0  7C 08 02 A6 */	mflr r0
/* 80374434 0036A1B4  7C 86 23 78 */	mr r6, r4
/* 80374438 0036A1B8  7C A7 2B 78 */	mr r7, r5
/* 8037443C 0036A1BC  90 01 00 14 */	stw r0, 0x14(r1)
/* 80374440 0036A1C0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80374444 0036A1C4  7C 7F 1B 78 */	mr r31, r3
/* 80374448 0036A1C8  80 63 00 08 */	lwz r3, 8(r3)
/* 8037444C 0036A1CC  80 9F 00 00 */	lwz r4, 0(r31)
/* 80374450 0036A1D0  A0 BF 00 04 */	lhz r5, 4(r31)
/* 80374454 0036A1D4  48 00 3F 71 */	bl gti2SocketSend
/* 80374458 0036A1D8  2C 03 00 00 */	cmpwi r3, 0
/* 8037445C 0036A1DC  40 82 00 0C */	bne lbl_80374468
/* 80374460 0036A1E0  38 60 00 00 */	li r3, 0
/* 80374464 0036A1E4  48 00 00 10 */	b lbl_80374474
lbl_80374468:
/* 80374468 0036A1E8  4B FE 92 C1 */	bl current_time
/* 8037446C 0036A1EC  90 7F 00 88 */	stw r3, 0x88(r31)
/* 80374470 0036A1F0  38 60 00 01 */	li r3, 1
lbl_80374474:
/* 80374474 0036A1F4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80374478 0036A1F8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8037447C 0036A1FC  7C 08 03 A6 */	mtlr r0
/* 80374480 0036A200  38 21 00 10 */	addi r1, r1, 0x10
/* 80374484 0036A204  4E 80 00 20 */	blr 

.global gti2CheckTimeout
gti2CheckTimeout:
/* 80374488 0036A208  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8037448C 0036A20C  7C 08 02 A6 */	mflr r0
/* 80374490 0036A210  90 01 00 24 */	stw r0, 0x24(r1)
/* 80374494 0036A214  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80374498 0036A218  7C 7F 1B 78 */	mr r31, r3
/* 8037449C 0036A21C  80 A3 00 0C */	lwz r5, 0xc(r3)
/* 803744A0 0036A220  2C 05 00 05 */	cmpwi r5, 5
/* 803744A4 0036A224  40 80 00 C8 */	bge lbl_8037456C
/* 803744A8 0036A228  80 03 00 10 */	lwz r0, 0x10(r3)
/* 803744AC 0036A22C  38 C0 00 00 */	li r6, 0
/* 803744B0 0036A230  2C 00 00 00 */	cmpwi r0, 0
/* 803744B4 0036A234  41 82 00 28 */	beq lbl_803744DC
/* 803744B8 0036A238  80 A3 00 20 */	lwz r5, 0x20(r3)
/* 803744BC 0036A23C  2C 05 00 00 */	cmpwi r5, 0
/* 803744C0 0036A240  41 82 00 38 */	beq lbl_803744F8
/* 803744C4 0036A244  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 803744C8 0036A248  7C 00 20 50 */	subf r0, r0, r4
/* 803744CC 0036A24C  7C 00 28 40 */	cmplw r0, r5
/* 803744D0 0036A250  40 81 00 28 */	ble lbl_803744F8
/* 803744D4 0036A254  38 C0 00 01 */	li r6, 1
/* 803744D8 0036A258  48 00 00 20 */	b lbl_803744F8
lbl_803744DC:
/* 803744DC 0036A25C  2C 05 00 04 */	cmpwi r5, 4
/* 803744E0 0036A260  40 80 00 18 */	bge lbl_803744F8
/* 803744E4 0036A264  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 803744E8 0036A268  7C 00 20 50 */	subf r0, r0, r4
/* 803744EC 0036A26C  28 00 EA 60 */	cmplwi r0, 0xea60
/* 803744F0 0036A270  40 81 00 08 */	ble lbl_803744F8
/* 803744F4 0036A274  38 C0 00 01 */	li r6, 1
lbl_803744F8:
/* 803744F8 0036A278  2C 06 00 00 */	cmpwi r6, 0
/* 803744FC 0036A27C  41 82 00 70 */	beq lbl_8037456C
/* 80374500 0036A280  7F E3 FB 78 */	mr r3, r31
/* 80374504 0036A284  48 00 35 CD */	bl gti2SendClosed
/* 80374508 0036A288  93 E1 00 08 */	stw r31, 8(r1)
/* 8037450C 0036A28C  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 80374510 0036A290  2C 00 00 07 */	cmpwi r0, 7
/* 80374514 0036A294  41 82 00 34 */	beq lbl_80374548
/* 80374518 0036A298  38 00 00 07 */	li r0, 7
/* 8037451C 0036A29C  38 81 00 08 */	addi r4, r1, 8
/* 80374520 0036A2A0  90 1F 00 0C */	stw r0, 0xc(r31)
/* 80374524 0036A2A4  80 61 00 08 */	lwz r3, 8(r1)
/* 80374528 0036A2A8  80 63 00 08 */	lwz r3, 8(r3)
/* 8037452C 0036A2AC  80 63 00 0C */	lwz r3, 0xc(r3)
/* 80374530 0036A2B0  4B FE 6B F1 */	bl TableRemove
/* 80374534 0036A2B4  80 61 00 08 */	lwz r3, 8(r1)
/* 80374538 0036A2B8  38 81 00 08 */	addi r4, r1, 8
/* 8037453C 0036A2BC  80 63 00 08 */	lwz r3, 8(r3)
/* 80374540 0036A2C0  80 63 00 10 */	lwz r3, 0x10(r3)
/* 80374544 0036A2C4  4B FE 60 85 */	bl ArrayAppend
lbl_80374548:
/* 80374548 0036A2C8  7F E3 FB 78 */	mr r3, r31
/* 8037454C 0036A2CC  38 80 00 06 */	li r4, 6
/* 80374550 0036A2D0  38 A0 00 00 */	li r5, 0
/* 80374554 0036A2D4  38 C0 00 00 */	li r6, 0
/* 80374558 0036A2D8  4B FF F5 49 */	bl gti2ConnectedCallback
/* 8037455C 0036A2DC  2C 03 00 00 */	cmpwi r3, 0
/* 80374560 0036A2E0  40 82 00 0C */	bne lbl_8037456C
/* 80374564 0036A2E4  38 60 00 00 */	li r3, 0
/* 80374568 0036A2E8  48 00 00 08 */	b lbl_80374570
lbl_8037456C:
/* 8037456C 0036A2EC  38 60 00 01 */	li r3, 1
lbl_80374570:
/* 80374570 0036A2F0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80374574 0036A2F4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80374578 0036A2F8  7C 08 03 A6 */	mtlr r0
/* 8037457C 0036A2FC  38 21 00 20 */	addi r1, r1, 0x20
/* 80374580 0036A300  4E 80 00 20 */	blr 

.global gti2ConnectionThink
gti2ConnectionThink:
/* 80374584 0036A304  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80374588 0036A308  7C 08 02 A6 */	mflr r0
/* 8037458C 0036A30C  90 01 00 24 */	stw r0, 0x24(r1)
/* 80374590 0036A310  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80374594 0036A314  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80374598 0036A318  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8037459C 0036A31C  7C 9D 23 78 */	mr r29, r4
/* 803745A0 0036A320  93 81 00 10 */	stw r28, 0x10(r1)
/* 803745A4 0036A324  7C 7C 1B 78 */	mr r28, r3
/* 803745A8 0036A328  4B FF FE E1 */	bl gti2CheckTimeout
/* 803745AC 0036A32C  2C 03 00 00 */	cmpwi r3, 0
/* 803745B0 0036A330  40 82 00 0C */	bne lbl_803745BC
/* 803745B4 0036A334  38 60 00 00 */	li r3, 0
/* 803745B8 0036A338  48 00 00 F8 */	b lbl_803746B0
lbl_803745BC:
/* 803745BC 0036A33C  80 1C 00 88 */	lwz r0, 0x88(r28)
/* 803745C0 0036A340  7C 00 E8 50 */	subf r0, r0, r29
/* 803745C4 0036A344  28 00 75 30 */	cmplwi r0, 0x7530
/* 803745C8 0036A348  40 81 00 1C */	ble lbl_803745E4
/* 803745CC 0036A34C  7F 83 E3 78 */	mr r3, r28
/* 803745D0 0036A350  48 00 31 55 */	bl gti2SendKeepAlive
/* 803745D4 0036A354  2C 03 00 00 */	cmpwi r3, 0
/* 803745D8 0036A358  40 82 00 0C */	bne lbl_803745E4
/* 803745DC 0036A35C  38 00 00 00 */	li r0, 0
/* 803745E0 0036A360  48 00 00 08 */	b lbl_803745E8
lbl_803745E4:
/* 803745E4 0036A364  38 00 00 01 */	li r0, 1
lbl_803745E8:
/* 803745E8 0036A368  2C 00 00 00 */	cmpwi r0, 0
/* 803745EC 0036A36C  40 82 00 0C */	bne lbl_803745F8
/* 803745F0 0036A370  38 60 00 00 */	li r3, 0
/* 803745F4 0036A374  48 00 00 BC */	b lbl_803746B0
lbl_803745F8:
/* 803745F8 0036A378  80 7C 00 60 */	lwz r3, 0x60(r28)
/* 803745FC 0036A37C  4B FE 5F 95 */	bl ArrayLength
/* 80374600 0036A380  7C 7F 1B 78 */	mr r31, r3
/* 80374604 0036A384  3B C0 00 00 */	li r30, 0
/* 80374608 0036A388  48 00 00 40 */	b lbl_80374648
lbl_8037460C:
/* 8037460C 0036A38C  80 7C 00 60 */	lwz r3, 0x60(r28)
/* 80374610 0036A390  7F C4 F3 78 */	mr r4, r30
/* 80374614 0036A394  4B FE 5F 85 */	bl ArrayNth
/* 80374618 0036A398  80 03 00 0C */	lwz r0, 0xc(r3)
/* 8037461C 0036A39C  7C 64 1B 78 */	mr r4, r3
/* 80374620 0036A3A0  7C 00 E8 50 */	subf r0, r0, r29
/* 80374624 0036A3A4  28 00 03 E8 */	cmplwi r0, 0x3e8
/* 80374628 0036A3A8  40 81 00 1C */	ble lbl_80374644
/* 8037462C 0036A3AC  7F 83 E3 78 */	mr r3, r28
/* 80374630 0036A3B0  48 00 35 59 */	bl gti2ResendMessage
/* 80374634 0036A3B4  2C 03 00 00 */	cmpwi r3, 0
/* 80374638 0036A3B8  40 82 00 0C */	bne lbl_80374644
/* 8037463C 0036A3BC  38 00 00 00 */	li r0, 0
/* 80374640 0036A3C0  48 00 00 14 */	b lbl_80374654
lbl_80374644:
/* 80374644 0036A3C4  3B DE 00 01 */	addi r30, r30, 1
lbl_80374648:
/* 80374648 0036A3C8  7C 1E F8 00 */	cmpw r30, r31
/* 8037464C 0036A3CC  41 80 FF C0 */	blt lbl_8037460C
/* 80374650 0036A3D0  38 00 00 01 */	li r0, 1
lbl_80374654:
/* 80374654 0036A3D4  2C 00 00 00 */	cmpwi r0, 0
/* 80374658 0036A3D8  40 82 00 0C */	bne lbl_80374664
/* 8037465C 0036A3DC  38 60 00 00 */	li r3, 0
/* 80374660 0036A3E0  48 00 00 50 */	b lbl_803746B0
lbl_80374664:
/* 80374664 0036A3E4  80 1C 00 90 */	lwz r0, 0x90(r28)
/* 80374668 0036A3E8  2C 00 00 00 */	cmpwi r0, 0
/* 8037466C 0036A3EC  40 82 00 0C */	bne lbl_80374678
/* 80374670 0036A3F0  38 60 00 01 */	li r3, 1
/* 80374674 0036A3F4  48 00 00 30 */	b lbl_803746A4
lbl_80374678:
/* 80374678 0036A3F8  80 1C 00 94 */	lwz r0, 0x94(r28)
/* 8037467C 0036A3FC  7C 00 E8 50 */	subf r0, r0, r29
/* 80374680 0036A400  28 00 00 64 */	cmplwi r0, 0x64
/* 80374684 0036A404  40 81 00 1C */	ble lbl_803746A0
/* 80374688 0036A408  7F 83 E3 78 */	mr r3, r28
/* 8037468C 0036A40C  48 00 32 8D */	bl gti2SendAck
/* 80374690 0036A410  2C 03 00 00 */	cmpwi r3, 0
/* 80374694 0036A414  40 82 00 0C */	bne lbl_803746A0
/* 80374698 0036A418  38 60 00 00 */	li r3, 0
/* 8037469C 0036A41C  48 00 00 08 */	b lbl_803746A4
lbl_803746A0:
/* 803746A0 0036A420  38 60 00 01 */	li r3, 1
lbl_803746A4:
/* 803746A4 0036A424  7C 03 00 D0 */	neg r0, r3
/* 803746A8 0036A428  7C 00 1B 78 */	or r0, r0, r3
/* 803746AC 0036A42C  54 03 0F FE */	srwi r3, r0, 0x1f
lbl_803746B0:
/* 803746B0 0036A430  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803746B4 0036A434  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803746B8 0036A438  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803746BC 0036A43C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803746C0 0036A440  83 81 00 10 */	lwz r28, 0x10(r1)
/* 803746C4 0036A444  7C 08 03 A6 */	mtlr r0
/* 803746C8 0036A448  38 21 00 20 */	addi r1, r1, 0x20
/* 803746CC 0036A44C  4E 80 00 20 */	blr 

.global gti2CloseConnection
gti2CloseConnection:
/* 803746D0 0036A450  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803746D4 0036A454  7C 08 02 A6 */	mflr r0
/* 803746D8 0036A458  2C 04 00 00 */	cmpwi r4, 0
/* 803746DC 0036A45C  90 01 00 24 */	stw r0, 0x24(r1)
/* 803746E0 0036A460  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803746E4 0036A464  7C 7F 1B 78 */	mr r31, r3
/* 803746E8 0036A468  41 82 00 70 */	beq lbl_80374758
/* 803746EC 0036A46C  80 03 00 0C */	lwz r0, 0xc(r3)
/* 803746F0 0036A470  2C 00 00 07 */	cmpwi r0, 7
/* 803746F4 0036A474  40 80 00 70 */	bge lbl_80374764
/* 803746F8 0036A478  90 61 00 08 */	stw r3, 8(r1)
/* 803746FC 0036A47C  80 03 00 0C */	lwz r0, 0xc(r3)
/* 80374700 0036A480  2C 00 00 07 */	cmpwi r0, 7
/* 80374704 0036A484  41 82 00 34 */	beq lbl_80374738
/* 80374708 0036A488  38 00 00 07 */	li r0, 7
/* 8037470C 0036A48C  38 81 00 08 */	addi r4, r1, 8
/* 80374710 0036A490  90 03 00 0C */	stw r0, 0xc(r3)
/* 80374714 0036A494  80 61 00 08 */	lwz r3, 8(r1)
/* 80374718 0036A498  80 63 00 08 */	lwz r3, 8(r3)
/* 8037471C 0036A49C  80 63 00 0C */	lwz r3, 0xc(r3)
/* 80374720 0036A4A0  4B FE 6A 01 */	bl TableRemove
/* 80374724 0036A4A4  80 61 00 08 */	lwz r3, 8(r1)
/* 80374728 0036A4A8  38 81 00 08 */	addi r4, r1, 8
/* 8037472C 0036A4AC  80 63 00 08 */	lwz r3, 8(r3)
/* 80374730 0036A4B0  80 63 00 10 */	lwz r3, 0x10(r3)
/* 80374734 0036A4B4  4B FE 5E 95 */	bl ArrayAppend
lbl_80374738:
/* 80374738 0036A4B8  7F E3 FB 78 */	mr r3, r31
/* 8037473C 0036A4BC  48 00 33 95 */	bl gti2SendClosed
/* 80374740 0036A4C0  7F E3 FB 78 */	mr r3, r31
/* 80374744 0036A4C4  38 80 00 00 */	li r4, 0
/* 80374748 0036A4C8  4B FF F5 0D */	bl gti2ClosedCallback
/* 8037474C 0036A4CC  7F E3 FB 78 */	mr r3, r31
/* 80374750 0036A4D0  48 00 3B A9 */	bl gti2FreeSocketConnection
/* 80374754 0036A4D4  48 00 00 10 */	b lbl_80374764
lbl_80374758:
/* 80374758 0036A4D8  38 00 00 06 */	li r0, 6
/* 8037475C 0036A4DC  90 03 00 0C */	stw r0, 0xc(r3)
/* 80374760 0036A4E0  48 00 2E FD */	bl gti2SendClose
lbl_80374764:
/* 80374764 0036A4E4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80374768 0036A4E8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8037476C 0036A4EC  7C 08 03 A6 */	mtlr r0
/* 80374770 0036A4F0  38 21 00 20 */	addi r1, r1, 0x20
/* 80374774 0036A4F4  4E 80 00 20 */	blr 

.global gti2ConnectionClosed
gti2ConnectionClosed:
/* 80374778 0036A4F8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8037477C 0036A4FC  7C 08 02 A6 */	mflr r0
/* 80374780 0036A500  90 01 00 14 */	stw r0, 0x14(r1)
/* 80374784 0036A504  90 61 00 08 */	stw r3, 8(r1)
/* 80374788 0036A508  80 03 00 0C */	lwz r0, 0xc(r3)
/* 8037478C 0036A50C  2C 00 00 07 */	cmpwi r0, 7
/* 80374790 0036A510  41 82 00 34 */	beq lbl_803747C4
/* 80374794 0036A514  38 00 00 07 */	li r0, 7
/* 80374798 0036A518  38 81 00 08 */	addi r4, r1, 8
/* 8037479C 0036A51C  90 03 00 0C */	stw r0, 0xc(r3)
/* 803747A0 0036A520  80 61 00 08 */	lwz r3, 8(r1)
/* 803747A4 0036A524  80 63 00 08 */	lwz r3, 8(r3)
/* 803747A8 0036A528  80 63 00 0C */	lwz r3, 0xc(r3)
/* 803747AC 0036A52C  4B FE 69 75 */	bl TableRemove
/* 803747B0 0036A530  80 61 00 08 */	lwz r3, 8(r1)
/* 803747B4 0036A534  38 81 00 08 */	addi r4, r1, 8
/* 803747B8 0036A538  80 63 00 08 */	lwz r3, 8(r3)
/* 803747BC 0036A53C  80 63 00 10 */	lwz r3, 0x10(r3)
/* 803747C0 0036A540  4B FE 5E 09 */	bl ArrayAppend
lbl_803747C4:
/* 803747C4 0036A544  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803747C8 0036A548  7C 08 03 A6 */	mtlr r0
/* 803747CC 0036A54C  38 21 00 10 */	addi r1, r1, 0x10
/* 803747D0 0036A550  4E 80 00 20 */	blr 

.global gti2ConnectionCleanup
gti2ConnectionCleanup:
/* 803747D4 0036A554  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803747D8 0036A558  7C 08 02 A6 */	mflr r0
/* 803747DC 0036A55C  90 01 00 14 */	stw r0, 0x14(r1)
/* 803747E0 0036A560  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803747E4 0036A564  7C 7F 1B 78 */	mr r31, r3
/* 803747E8 0036A568  80 03 00 38 */	lwz r0, 0x38(r3)
/* 803747EC 0036A56C  2C 00 00 00 */	cmpwi r0, 0
/* 803747F0 0036A570  41 82 00 0C */	beq lbl_803747FC
/* 803747F4 0036A574  7C 03 03 78 */	mr r3, r0
/* 803747F8 0036A578  4B FE 98 15 */	bl gsifree
lbl_803747FC:
/* 803747FC 0036A57C  80 7F 00 44 */	lwz r3, 0x44(r31)
/* 80374800 0036A580  2C 03 00 00 */	cmpwi r3, 0
/* 80374804 0036A584  41 82 00 08 */	beq lbl_8037480C
/* 80374808 0036A588  4B FE 98 05 */	bl gsifree
lbl_8037480C:
/* 8037480C 0036A58C  80 7F 00 50 */	lwz r3, 0x50(r31)
/* 80374810 0036A590  2C 03 00 00 */	cmpwi r3, 0
/* 80374814 0036A594  41 82 00 08 */	beq lbl_8037481C
/* 80374818 0036A598  4B FE 97 F5 */	bl gsifree
lbl_8037481C:
/* 8037481C 0036A59C  80 7F 00 5C */	lwz r3, 0x5c(r31)
/* 80374820 0036A5A0  2C 03 00 00 */	cmpwi r3, 0
/* 80374824 0036A5A4  41 82 00 08 */	beq lbl_8037482C
/* 80374828 0036A5A8  4B FE 5C D5 */	bl ArrayFree
lbl_8037482C:
/* 8037482C 0036A5AC  80 7F 00 60 */	lwz r3, 0x60(r31)
/* 80374830 0036A5B0  2C 03 00 00 */	cmpwi r3, 0
/* 80374834 0036A5B4  41 82 00 08 */	beq lbl_8037483C
/* 80374838 0036A5B8  4B FE 5C C5 */	bl ArrayFree
lbl_8037483C:
/* 8037483C 0036A5BC  80 7F 00 98 */	lwz r3, 0x98(r31)
/* 80374840 0036A5C0  2C 03 00 00 */	cmpwi r3, 0
/* 80374844 0036A5C4  41 82 00 08 */	beq lbl_8037484C
/* 80374848 0036A5C8  4B FE 5C B5 */	bl ArrayFree
lbl_8037484C:
/* 8037484C 0036A5CC  80 7F 00 9C */	lwz r3, 0x9c(r31)
/* 80374850 0036A5D0  2C 03 00 00 */	cmpwi r3, 0
/* 80374854 0036A5D4  41 82 00 08 */	beq lbl_8037485C
/* 80374858 0036A5D8  4B FE 5C A5 */	bl ArrayFree
lbl_8037485C:
/* 8037485C 0036A5DC  7F E3 FB 78 */	mr r3, r31
/* 80374860 0036A5E0  4B FE 97 AD */	bl gsifree
/* 80374864 0036A5E4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80374868 0036A5E8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8037486C 0036A5EC  7C 08 03 A6 */	mtlr r0
/* 80374870 0036A5F0  38 21 00 10 */	addi r1, r1, 0x10
/* 80374874 0036A5F4  4E 80 00 20 */	blr 

