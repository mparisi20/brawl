.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global TMCC_JPEGDEC_decode_iquant
TMCC_JPEGDEC_decode_iquant:
/* 80261E34 00257BB4  94 21 FF B0 */	stwu r1, -0x50(r1)
/* 80261E38 00257BB8  7C 08 02 A6 */	mflr r0
/* 80261E3C 00257BBC  90 01 00 54 */	stw r0, 0x54(r1)
/* 80261E40 00257BC0  BE A1 00 24 */	stmw r21, 0x24(r1)
/* 80261E44 00257BC4  7C 75 1B 78 */	mr r21, r3
/* 80261E48 00257BC8  7C 96 23 78 */	mr r22, r4
/* 80261E4C 00257BCC  7C B8 2B 78 */	mr r24, r5
/* 80261E50 00257BD0  7C D7 33 78 */	mr r23, r6
/* 80261E54 00257BD4  80 06 00 04 */	lwz r0, 4(r6)
/* 80261E58 00257BD8  83 26 04 84 */	lwz r25, 0x484(r6)
/* 80261E5C 00257BDC  2C 00 00 08 */	cmpwi r0, 8
/* 80261E60 00257BE0  41 81 00 0C */	bgt lbl_80261E6C
/* 80261E64 00257BE4  7E E3 BB 78 */	mr r3, r23
/* 80261E68 00257BE8  4B FF F3 11 */	bl TMCC_JPEGDEC_load_buff
lbl_80261E6C:
/* 80261E6C 00257BEC  80 97 00 04 */	lwz r4, 4(r23)
/* 80261E70 00257BF0  80 77 00 00 */	lwz r3, 0(r23)
/* 80261E74 00257BF4  38 04 FF F8 */	addi r0, r4, -8
/* 80261E78 00257BF8  7C 60 04 30 */	srw r0, r3, r0
/* 80261E7C 00257BFC  54 00 15 BA */	rlwinm r0, r0, 2, 0x16, 0x1d
/* 80261E80 00257C00  7C 79 02 14 */	add r3, r25, r0
/* 80261E84 00257C04  7C 19 02 2E */	lhzx r0, r25, r0
/* 80261E88 00257C08  A3 23 00 02 */	lhz r25, 2(r3)
/* 80261E8C 00257C0C  2C 00 00 00 */	cmpwi r0, 0
/* 80261E90 00257C10  B0 01 00 1C */	sth r0, 0x1c(r1)
/* 80261E94 00257C14  B3 21 00 1E */	sth r25, 0x1e(r1)
/* 80261E98 00257C18  41 82 00 10 */	beq lbl_80261EA8
/* 80261E9C 00257C1C  7C 00 20 50 */	subf r0, r0, r4
/* 80261EA0 00257C20  90 17 00 04 */	stw r0, 4(r23)
/* 80261EA4 00257C24  48 00 00 B8 */	b lbl_80261F5C
lbl_80261EA8:
/* 80261EA8 00257C28  2C 04 00 11 */	cmpwi r4, 0x11
/* 80261EAC 00257C2C  83 B7 04 8C */	lwz r29, 0x48c(r23)
/* 80261EB0 00257C30  83 37 04 88 */	lwz r25, 0x488(r23)
/* 80261EB4 00257C34  41 81 00 0C */	bgt lbl_80261EC0
/* 80261EB8 00257C38  7E E3 BB 78 */	mr r3, r23
/* 80261EBC 00257C3C  4B FF F2 BD */	bl TMCC_JPEGDEC_load_buff
lbl_80261EC0:
/* 80261EC0 00257C40  80 77 00 04 */	lwz r3, 4(r23)
/* 80261EC4 00257C44  38 F9 00 24 */	addi r7, r25, 0x24
/* 80261EC8 00257C48  80 17 00 00 */	lwz r0, 0(r23)
/* 80261ECC 00257C4C  38 A0 00 09 */	li r5, 9
/* 80261ED0 00257C50  38 63 FF F7 */	addi r3, r3, -9
/* 80261ED4 00257C54  7C 00 1C 30 */	srw r0, r0, r3
/* 80261ED8 00257C58  90 77 00 04 */	stw r3, 4(r23)
/* 80261EDC 00257C5C  54 06 05 FE */	clrlwi r6, r0, 0x17
/* 80261EE0 00257C60  48 00 00 3C */	b lbl_80261F1C
lbl_80261EE4:
/* 80261EE4 00257C64  38 A5 00 01 */	addi r5, r5, 1
/* 80261EE8 00257C68  38 E7 00 04 */	addi r7, r7, 4
/* 80261EEC 00257C6C  28 05 00 10 */	cmplwi r5, 0x10
/* 80261EF0 00257C70  40 81 00 0C */	ble lbl_80261EFC
/* 80261EF4 00257C74  3B 20 FF 9C */	li r25, -100
/* 80261EF8 00257C78  48 00 00 54 */	b lbl_80261F4C
lbl_80261EFC:
/* 80261EFC 00257C7C  80 77 00 04 */	lwz r3, 4(r23)
/* 80261F00 00257C80  54 C6 08 3C */	slwi r6, r6, 1
/* 80261F04 00257C84  80 17 00 00 */	lwz r0, 0(r23)
/* 80261F08 00257C88  38 63 FF FF */	addi r3, r3, -1
/* 80261F0C 00257C8C  7C 00 1C 30 */	srw r0, r0, r3
/* 80261F10 00257C90  90 77 00 04 */	stw r3, 4(r23)
/* 80261F14 00257C94  54 00 07 FE */	clrlwi r0, r0, 0x1f
/* 80261F18 00257C98  7C C6 03 78 */	or r6, r6, r0
lbl_80261F1C:
/* 80261F1C 00257C9C  A0 87 00 00 */	lhz r4, 0(r7)
/* 80261F20 00257CA0  A0 67 00 02 */	lhz r3, 2(r7)
/* 80261F24 00257CA4  B0 81 00 14 */	sth r4, 0x14(r1)
/* 80261F28 00257CA8  B0 61 00 16 */	sth r3, 0x16(r1)
/* 80261F2C 00257CAC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80261F30 00257CB0  90 01 00 18 */	stw r0, 0x18(r1)
/* 80261F34 00257CB4  A0 01 00 18 */	lhz r0, 0x18(r1)
/* 80261F38 00257CB8  7C 06 00 40 */	cmplw r6, r0
/* 80261F3C 00257CBC  41 81 FF A8 */	bgt lbl_80261EE4
/* 80261F40 00257CC0  7C 04 30 50 */	subf r0, r4, r6
/* 80261F44 00257CC4  7C 00 1A 14 */	add r0, r0, r3
/* 80261F48 00257CC8  7F 3D 00 AE */	lbzx r25, r29, r0
lbl_80261F4C:
/* 80261F4C 00257CCC  2C 19 00 00 */	cmpwi r25, 0
/* 80261F50 00257CD0  40 80 00 0C */	bge lbl_80261F5C
/* 80261F54 00257CD4  7F 23 CB 78 */	mr r3, r25
/* 80261F58 00257CD8  48 00 02 AC */	b lbl_80262204
lbl_80261F5C:
/* 80261F5C 00257CDC  2C 19 00 00 */	cmpwi r25, 0
/* 80261F60 00257CE0  83 76 00 00 */	lwz r27, 0(r22)
/* 80261F64 00257CE4  41 82 00 58 */	beq lbl_80261FBC
/* 80261F68 00257CE8  80 17 00 04 */	lwz r0, 4(r23)
/* 80261F6C 00257CEC  7C 00 C8 00 */	cmpw r0, r25
/* 80261F70 00257CF0  41 81 00 0C */	bgt lbl_80261F7C
/* 80261F74 00257CF4  7E E3 BB 78 */	mr r3, r23
/* 80261F78 00257CF8  4B FF F2 01 */	bl TMCC_JPEGDEC_load_buff
lbl_80261F7C:
/* 80261F7C 00257CFC  80 17 00 04 */	lwz r0, 4(r23)
/* 80261F80 00257D00  38 80 00 01 */	li r4, 1
/* 80261F84 00257D04  80 77 00 00 */	lwz r3, 0(r23)
/* 80261F88 00257D08  7C 86 C8 30 */	slw r6, r4, r25
/* 80261F8C 00257D0C  7C 99 00 50 */	subf r4, r25, r0
/* 80261F90 00257D10  38 A6 FF FF */	addi r5, r6, -1
/* 80261F94 00257D14  7C C0 0E 70 */	srawi r0, r6, 1
/* 80261F98 00257D18  7C 63 24 30 */	srw r3, r3, r4
/* 80261F9C 00257D1C  90 97 00 04 */	stw r4, 4(r23)
/* 80261FA0 00257D20  7C A3 18 38 */	and r3, r5, r3
/* 80261FA4 00257D24  7C 00 18 00 */	cmpw r0, r3
/* 80261FA8 00257D28  40 81 00 08 */	ble lbl_80261FB0
/* 80261FAC 00257D2C  7C 65 18 50 */	subf r3, r5, r3
lbl_80261FB0:
/* 80261FB0 00257D30  80 18 00 00 */	lwz r0, 0(r24)
/* 80261FB4 00257D34  7C 00 1A 14 */	add r0, r0, r3
/* 80261FB8 00257D38  90 18 00 00 */	stw r0, 0(r24)
lbl_80261FBC:
/* 80261FBC 00257D3C  80 18 00 00 */	lwz r0, 0(r24)
/* 80261FC0 00257D40  38 75 00 04 */	addi r3, r21, 4
/* 80261FC4 00257D44  38 80 00 00 */	li r4, 0
/* 80261FC8 00257D48  38 A0 00 FC */	li r5, 0xfc
/* 80261FCC 00257D4C  7C 00 D9 D6 */	mullw r0, r0, r27
/* 80261FD0 00257D50  90 15 00 00 */	stw r0, 0(r21)
/* 80261FD4 00257D54  83 97 04 94 */	lwz r28, 0x494(r23)
/* 80261FD8 00257D58  83 37 04 98 */	lwz r25, 0x498(r23)
/* 80261FDC 00257D5C  83 17 04 9C */	lwz r24, 0x49c(r23)
/* 80261FE0 00257D60  4B DA 24 5D */	bl func_8000443C
/* 80261FE4 00257D64  80 17 00 04 */	lwz r0, 4(r23)
/* 80261FE8 00257D68  3B 60 00 01 */	li r27, 1
/* 80261FEC 00257D6C  2C 00 00 08 */	cmpwi r0, 8
/* 80261FF0 00257D70  41 81 00 0C */	bgt lbl_80261FFC
/* 80261FF4 00257D74  7E E3 BB 78 */	mr r3, r23
/* 80261FF8 00257D78  4B FF F1 81 */	bl TMCC_JPEGDEC_load_buff
lbl_80261FFC:
/* 80261FFC 00257D7C  80 77 00 04 */	lwz r3, 4(r23)
/* 80262000 00257D80  3F A0 80 41 */	lis r29, lbl_8040DD10@ha
/* 80262004 00257D84  80 97 00 00 */	lwz r4, 0(r23)
/* 80262008 00257D88  3B BD DD 10 */	addi r29, r29, lbl_8040DD10@l
/* 8026200C 00257D8C  38 03 FF F8 */	addi r0, r3, -8
/* 80262010 00257D90  3B E0 00 01 */	li r31, 1
/* 80262014 00257D94  7C 80 04 30 */	srw r0, r4, r0
/* 80262018 00257D98  54 00 15 BA */	rlwinm r0, r0, 2, 0x16, 0x1d
/* 8026201C 00257D9C  7C 9C 02 14 */	add r4, r28, r0
/* 80262020 00257DA0  7C 7C 02 2E */	lhzx r3, r28, r0
/* 80262024 00257DA4  A0 04 00 02 */	lhz r0, 2(r4)
/* 80262028 00257DA8  B0 61 00 08 */	sth r3, 8(r1)
/* 8026202C 00257DAC  B0 01 00 0A */	sth r0, 0xa(r1)
lbl_80262030:
/* 80262030 00257DB0  A0 81 00 08 */	lhz r4, 8(r1)
/* 80262034 00257DB4  2C 04 00 00 */	cmpwi r4, 0
/* 80262038 00257DB8  41 82 00 18 */	beq lbl_80262050
/* 8026203C 00257DBC  80 17 00 04 */	lwz r0, 4(r23)
/* 80262040 00257DC0  A0 61 00 0A */	lhz r3, 0xa(r1)
/* 80262044 00257DC4  7C 04 00 50 */	subf r0, r4, r0
/* 80262048 00257DC8  90 17 00 04 */	stw r0, 4(r23)
/* 8026204C 00257DCC  48 00 00 B0 */	b lbl_802620FC
lbl_80262050:
/* 80262050 00257DD0  80 17 00 04 */	lwz r0, 4(r23)
/* 80262054 00257DD4  2C 00 00 11 */	cmpwi r0, 0x11
/* 80262058 00257DD8  41 81 00 0C */	bgt lbl_80262064
/* 8026205C 00257DDC  7E E3 BB 78 */	mr r3, r23
/* 80262060 00257DE0  4B FF F1 19 */	bl TMCC_JPEGDEC_load_buff
lbl_80262064:
/* 80262064 00257DE4  80 77 00 04 */	lwz r3, 4(r23)
/* 80262068 00257DE8  38 F9 00 24 */	addi r7, r25, 0x24
/* 8026206C 00257DEC  80 17 00 00 */	lwz r0, 0(r23)
/* 80262070 00257DF0  38 A0 00 09 */	li r5, 9
/* 80262074 00257DF4  38 63 FF F7 */	addi r3, r3, -9
/* 80262078 00257DF8  7C 00 1C 30 */	srw r0, r0, r3
/* 8026207C 00257DFC  90 77 00 04 */	stw r3, 4(r23)
/* 80262080 00257E00  54 06 05 FE */	clrlwi r6, r0, 0x17
/* 80262084 00257E04  48 00 00 3C */	b lbl_802620C0
lbl_80262088:
/* 80262088 00257E08  38 A5 00 01 */	addi r5, r5, 1
/* 8026208C 00257E0C  38 E7 00 04 */	addi r7, r7, 4
/* 80262090 00257E10  28 05 00 10 */	cmplwi r5, 0x10
/* 80262094 00257E14  40 81 00 0C */	ble lbl_802620A0
/* 80262098 00257E18  38 60 FF 9C */	li r3, -100
/* 8026209C 00257E1C  48 00 00 54 */	b lbl_802620F0
lbl_802620A0:
/* 802620A0 00257E20  80 77 00 04 */	lwz r3, 4(r23)
/* 802620A4 00257E24  54 C6 08 3C */	slwi r6, r6, 1
/* 802620A8 00257E28  80 17 00 00 */	lwz r0, 0(r23)
/* 802620AC 00257E2C  38 63 FF FF */	addi r3, r3, -1
/* 802620B0 00257E30  7C 00 1C 30 */	srw r0, r0, r3
/* 802620B4 00257E34  90 77 00 04 */	stw r3, 4(r23)
/* 802620B8 00257E38  54 00 07 FE */	clrlwi r0, r0, 0x1f
/* 802620BC 00257E3C  7C C6 03 78 */	or r6, r6, r0
lbl_802620C0:
/* 802620C0 00257E40  A0 87 00 00 */	lhz r4, 0(r7)
/* 802620C4 00257E44  A0 67 00 02 */	lhz r3, 2(r7)
/* 802620C8 00257E48  B0 81 00 0C */	sth r4, 0xc(r1)
/* 802620CC 00257E4C  B0 61 00 0E */	sth r3, 0xe(r1)
/* 802620D0 00257E50  80 01 00 0C */	lwz r0, 0xc(r1)
/* 802620D4 00257E54  90 01 00 10 */	stw r0, 0x10(r1)
/* 802620D8 00257E58  A0 01 00 10 */	lhz r0, 0x10(r1)
/* 802620DC 00257E5C  7C 06 00 40 */	cmplw r6, r0
/* 802620E0 00257E60  41 81 FF A8 */	bgt lbl_80262088
/* 802620E4 00257E64  7C 04 30 50 */	subf r0, r4, r6
/* 802620E8 00257E68  7C 00 1A 14 */	add r0, r0, r3
/* 802620EC 00257E6C  7C 78 00 AE */	lbzx r3, r24, r0
lbl_802620F0:
/* 802620F0 00257E70  2C 03 00 00 */	cmpwi r3, 0
/* 802620F4 00257E74  40 80 00 08 */	bge lbl_802620FC
/* 802620F8 00257E78  48 00 01 0C */	b lbl_80262204
lbl_802620FC:
/* 802620FC 00257E7C  54 7A 07 3F */	clrlwi. r26, r3, 0x1c
/* 80262100 00257E80  41 82 00 A0 */	beq lbl_802621A0
/* 80262104 00257E84  7C 60 26 70 */	srawi r0, r3, 4
/* 80262108 00257E88  7F 7B 02 14 */	add r27, r27, r0
/* 8026210C 00257E8C  2C 1B 00 40 */	cmpwi r27, 0x40
/* 80262110 00257E90  41 80 00 0C */	blt lbl_8026211C
/* 80262114 00257E94  38 60 FF 9C */	li r3, -100
/* 80262118 00257E98  48 00 00 EC */	b lbl_80262204
lbl_8026211C:
/* 8026211C 00257E9C  80 77 00 04 */	lwz r3, 4(r23)
/* 80262120 00257EA0  38 1A 00 08 */	addi r0, r26, 8
/* 80262124 00257EA4  7F DD D8 AE */	lbzx r30, r29, r27
/* 80262128 00257EA8  7C 03 00 00 */	cmpw r3, r0
/* 8026212C 00257EAC  41 81 00 0C */	bgt lbl_80262138
/* 80262130 00257EB0  7E E3 BB 78 */	mr r3, r23
/* 80262134 00257EB4  4B FF F0 45 */	bl TMCC_JPEGDEC_load_buff
lbl_80262138:
/* 80262138 00257EB8  80 17 00 04 */	lwz r0, 4(r23)
/* 8026213C 00257EBC  7F E3 D0 30 */	slw r3, r31, r26
/* 80262140 00257EC0  80 B7 00 00 */	lwz r5, 0(r23)
/* 80262144 00257EC4  38 C3 FF FF */	addi r6, r3, -1
/* 80262148 00257EC8  7C 9A 00 50 */	subf r4, r26, r0
/* 8026214C 00257ECC  7C 60 0E 70 */	srawi r0, r3, 1
/* 80262150 00257ED0  38 64 FF F8 */	addi r3, r4, -8
/* 80262154 00257ED4  90 97 00 04 */	stw r4, 4(r23)
/* 80262158 00257ED8  7C A3 1C 30 */	srw r3, r5, r3
/* 8026215C 00257EDC  7C A5 24 30 */	srw r5, r5, r4
/* 80262160 00257EE0  54 63 15 BA */	rlwinm r3, r3, 2, 0x16, 0x1d
/* 80262164 00257EE4  57 C7 15 BA */	rlwinm r7, r30, 2, 0x16, 0x1d
/* 80262168 00257EE8  7C 9C 1A 14 */	add r4, r28, r3
/* 8026216C 00257EEC  7C C5 28 38 */	and r5, r6, r5
/* 80262170 00257EF0  7C 7C 1A 2E */	lhzx r3, r28, r3
/* 80262174 00257EF4  7C 00 28 00 */	cmpw r0, r5
/* 80262178 00257EF8  A0 04 00 02 */	lhz r0, 2(r4)
/* 8026217C 00257EFC  B0 61 00 08 */	sth r3, 8(r1)
/* 80262180 00257F00  7C 76 38 2E */	lwzx r3, r22, r7
/* 80262184 00257F04  B0 01 00 0A */	sth r0, 0xa(r1)
/* 80262188 00257F08  40 81 00 08 */	ble lbl_80262190
/* 8026218C 00257F0C  7C A6 28 50 */	subf r5, r6, r5
lbl_80262190:
/* 80262190 00257F10  7C 05 19 D6 */	mullw r0, r5, r3
/* 80262194 00257F14  3B 7B 00 01 */	addi r27, r27, 1
/* 80262198 00257F18  7C 15 39 2E */	stwx r0, r21, r7
/* 8026219C 00257F1C  48 00 00 4C */	b lbl_802621E8
lbl_802621A0:
/* 802621A0 00257F20  2C 03 00 00 */	cmpwi r3, 0
/* 802621A4 00257F24  41 82 00 4C */	beq lbl_802621F0
/* 802621A8 00257F28  80 17 00 04 */	lwz r0, 4(r23)
/* 802621AC 00257F2C  2C 00 00 08 */	cmpwi r0, 8
/* 802621B0 00257F30  41 81 00 0C */	bgt lbl_802621BC
/* 802621B4 00257F34  7E E3 BB 78 */	mr r3, r23
/* 802621B8 00257F38  4B FF EF C1 */	bl TMCC_JPEGDEC_load_buff
lbl_802621BC:
/* 802621BC 00257F3C  80 77 00 04 */	lwz r3, 4(r23)
/* 802621C0 00257F40  3B 7B 00 10 */	addi r27, r27, 0x10
/* 802621C4 00257F44  80 97 00 00 */	lwz r4, 0(r23)
/* 802621C8 00257F48  38 03 FF F8 */	addi r0, r3, -8
/* 802621CC 00257F4C  7C 80 04 30 */	srw r0, r4, r0
/* 802621D0 00257F50  54 00 15 BA */	rlwinm r0, r0, 2, 0x16, 0x1d
/* 802621D4 00257F54  7C 9C 02 14 */	add r4, r28, r0
/* 802621D8 00257F58  7C 7C 02 2E */	lhzx r3, r28, r0
/* 802621DC 00257F5C  A0 04 00 02 */	lhz r0, 2(r4)
/* 802621E0 00257F60  B0 61 00 08 */	sth r3, 8(r1)
/* 802621E4 00257F64  B0 01 00 0A */	sth r0, 0xa(r1)
lbl_802621E8:
/* 802621E8 00257F68  2C 1B 00 40 */	cmpwi r27, 0x40
/* 802621EC 00257F6C  41 80 FE 44 */	blt lbl_80262030
lbl_802621F0:
/* 802621F0 00257F70  38 1B FF FF */	addi r0, r27, -1
/* 802621F4 00257F74  3C 60 80 41 */	lis r3, lbl_8040DD50@ha
/* 802621F8 00257F78  54 00 10 3A */	slwi r0, r0, 2
/* 802621FC 00257F7C  38 63 DD 50 */	addi r3, r3, lbl_8040DD50@l
/* 80262200 00257F80  7C 63 00 2E */	lwzx r3, r3, r0
lbl_80262204:
/* 80262204 00257F84  BA A1 00 24 */	lmw r21, 0x24(r1)
/* 80262208 00257F88  80 01 00 54 */	lwz r0, 0x54(r1)
/* 8026220C 00257F8C  7C 08 03 A6 */	mtlr r0
/* 80262210 00257F90  38 21 00 50 */	addi r1, r1, 0x50
/* 80262214 00257F94  4E 80 00 20 */	blr 

