.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global ptim_init
ptim_init:
/* 802325A0 00228320  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802325A4 00228324  7C 08 02 A6 */	mflr r0
/* 802325A8 00228328  90 01 00 24 */	stw r0, 0x24(r1)
/* 802325AC 0022832C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 802325B0 00228330  7C BF 2B 78 */	mr r31, r5
/* 802325B4 00228334  93 C1 00 18 */	stw r30, 0x18(r1)
/* 802325B8 00228338  7C 9E 23 78 */	mr r30, r4
/* 802325BC 0022833C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 802325C0 00228340  7C 7D 1B 78 */	mr r29, r3
/* 802325C4 00228344  4B FF DA A1 */	bl GKI_init_timer_list
/* 802325C8 00228348  93 DD 00 0C */	stw r30, 0xc(r29)
/* 802325CC 0022834C  9B FD 00 10 */	stb r31, 0x10(r29)
/* 802325D0 00228350  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 802325D4 00228354  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 802325D8 00228358  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 802325DC 0022835C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 802325E0 00228360  7C 08 03 A6 */	mtlr r0
/* 802325E4 00228364  38 21 00 20 */	addi r1, r1, 0x20
/* 802325E8 00228368  4E 80 00 20 */	blr 

.global ptim_timer_update
ptim_timer_update:
/* 802325EC 0022836C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802325F0 00228370  7C 08 02 A6 */	mflr r0
/* 802325F4 00228374  90 01 00 14 */	stw r0, 0x14(r1)
/* 802325F8 00228378  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802325FC 0022837C  93 C1 00 08 */	stw r30, 8(r1)
/* 80232600 00228380  7C 7E 1B 78 */	mr r30, r3
/* 80232604 00228384  80 83 00 0C */	lwz r4, 0xc(r3)
/* 80232608 00228388  4B FF DA 71 */	bl GKI_update_timer_list
/* 8023260C 0022838C  48 00 00 54 */	b lbl_80232660
lbl_80232610:
/* 80232610 00228390  7F C3 F3 78 */	mr r3, r30
/* 80232614 00228394  7F E4 FB 78 */	mr r4, r31
/* 80232618 00228398  4B FF DB D9 */	bl GKI_remove_from_timer_list
/* 8023261C 0022839C  81 9F 00 08 */	lwz r12, 8(r31)
/* 80232620 002283A0  2C 0C 00 00 */	cmpwi r12, 0
/* 80232624 002283A4  41 82 00 14 */	beq lbl_80232638
/* 80232628 002283A8  7F E3 FB 78 */	mr r3, r31
/* 8023262C 002283AC  7D 89 03 A6 */	mtctr r12
/* 80232630 002283B0  4E 80 04 21 */	bctrl 
/* 80232634 002283B4  48 00 00 2C */	b lbl_80232660
lbl_80232638:
/* 80232638 002283B8  A0 1F 00 14 */	lhz r0, 0x14(r31)
/* 8023263C 002283BC  2C 00 00 00 */	cmpwi r0, 0
/* 80232640 002283C0  41 82 00 20 */	beq lbl_80232660
/* 80232644 002283C4  38 60 00 08 */	li r3, 8
/* 80232648 002283C8  4B FF C8 11 */	bl GKI_getbuf
/* 8023264C 002283CC  2C 03 00 00 */	cmpwi r3, 0
/* 80232650 002283D0  41 82 00 10 */	beq lbl_80232660
/* 80232654 002283D4  A0 1F 00 14 */	lhz r0, 0x14(r31)
/* 80232658 002283D8  B0 03 00 00 */	sth r0, 0(r3)
/* 8023265C 002283DC  4B FF FE 85 */	bl bta_sys_sendmsg
lbl_80232660:
/* 80232660 002283E0  83 FE 00 00 */	lwz r31, 0(r30)
/* 80232664 002283E4  2C 1F 00 00 */	cmpwi r31, 0
/* 80232668 002283E8  41 82 00 10 */	beq lbl_80232678
/* 8023266C 002283EC  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 80232670 002283F0  2C 00 00 00 */	cmpwi r0, 0
/* 80232674 002283F4  40 81 FF 9C */	ble lbl_80232610
lbl_80232678:
/* 80232678 002283F8  2C 1F 00 00 */	cmpwi r31, 0
/* 8023267C 002283FC  40 82 00 0C */	bne lbl_80232688
/* 80232680 00228400  88 7E 00 10 */	lbz r3, 0x10(r30)
/* 80232684 00228404  4B FF D9 59 */	bl GKI_stop_timer
lbl_80232688:
/* 80232688 00228408  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8023268C 0022840C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80232690 00228410  83 C1 00 08 */	lwz r30, 8(r1)
/* 80232694 00228414  7C 08 03 A6 */	mtlr r0
/* 80232698 00228418  38 21 00 10 */	addi r1, r1, 0x10
/* 8023269C 0022841C  4E 80 00 20 */	blr 

.global ptim_start_timer
ptim_start_timer:
/* 802326A0 00228420  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 802326A4 00228424  7C 08 02 A6 */	mflr r0
/* 802326A8 00228428  90 01 00 24 */	stw r0, 0x24(r1)
/* 802326AC 0022842C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 802326B0 00228430  7C DF 33 78 */	mr r31, r6
/* 802326B4 00228434  93 C1 00 18 */	stw r30, 0x18(r1)
/* 802326B8 00228438  7C BE 2B 78 */	mr r30, r5
/* 802326BC 0022843C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 802326C0 00228440  7C 9D 23 78 */	mr r29, r4
/* 802326C4 00228444  93 81 00 10 */	stw r28, 0x10(r1)
/* 802326C8 00228448  7C 7C 1B 78 */	mr r28, r3
/* 802326CC 0022844C  80 03 00 00 */	lwz r0, 0(r3)
/* 802326D0 00228450  2C 00 00 00 */	cmpwi r0, 0
/* 802326D4 00228454  40 82 00 2C */	bne lbl_80232700
/* 802326D8 00228458  3C 80 66 66 */	lis r4, 0x66666667@ha
/* 802326DC 0022845C  80 1C 00 0C */	lwz r0, 0xc(r28)
/* 802326E0 00228460  38 84 66 67 */	addi r4, r4, 0x66666667@l
/* 802326E4 00228464  88 63 00 10 */	lbz r3, 0x10(r3)
/* 802326E8 00228468  7C 04 00 96 */	mulhw r0, r4, r0
/* 802326EC 0022846C  38 A0 00 01 */	li r5, 1
/* 802326F0 00228470  7C 00 16 70 */	srawi r0, r0, 2
/* 802326F4 00228474  54 04 0F FE */	srwi r4, r0, 0x1f
/* 802326F8 00228478  7C 80 22 14 */	add r4, r0, r4
/* 802326FC 0022847C  4B FF D7 91 */	bl GKI_start_timer
lbl_80232700:
/* 80232700 00228480  7F 83 E3 78 */	mr r3, r28
/* 80232704 00228484  7F A4 EB 78 */	mr r4, r29
/* 80232708 00228488  4B FF DA E9 */	bl GKI_remove_from_timer_list
/* 8023270C 0022848C  B3 DD 00 14 */	sth r30, 0x14(r29)
/* 80232710 00228490  7F 83 E3 78 */	mr r3, r28
/* 80232714 00228494  7F A4 EB 78 */	mr r4, r29
/* 80232718 00228498  93 FD 00 0C */	stw r31, 0xc(r29)
/* 8023271C 0022849C  4B FF D9 E9 */	bl GKI_add_to_timer_list
/* 80232720 002284A0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80232724 002284A4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80232728 002284A8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8023272C 002284AC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80232730 002284B0  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80232734 002284B4  7C 08 03 A6 */	mtlr r0
/* 80232738 002284B8  38 21 00 20 */	addi r1, r1, 0x20
/* 8023273C 002284BC  4E 80 00 20 */	blr 

.global ptim_stop_timer
ptim_stop_timer:
/* 80232740 002284C0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80232744 002284C4  7C 08 02 A6 */	mflr r0
/* 80232748 002284C8  90 01 00 14 */	stw r0, 0x14(r1)
/* 8023274C 002284CC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80232750 002284D0  7C 7F 1B 78 */	mr r31, r3
/* 80232754 002284D4  4B FF DA 9D */	bl GKI_remove_from_timer_list
/* 80232758 002284D8  80 1F 00 00 */	lwz r0, 0(r31)
/* 8023275C 002284DC  2C 00 00 00 */	cmpwi r0, 0
/* 80232760 002284E0  40 82 00 0C */	bne lbl_8023276C
/* 80232764 002284E4  88 7F 00 10 */	lbz r3, 0x10(r31)
/* 80232768 002284E8  4B FF D8 75 */	bl GKI_stop_timer
lbl_8023276C:
/* 8023276C 002284EC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80232770 002284F0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80232774 002284F4  7C 08 03 A6 */	mtlr r0
/* 80232778 002284F8  38 21 00 10 */	addi r1, r1, 0x10
/* 8023277C 002284FC  4E 80 00 20 */	blr 

