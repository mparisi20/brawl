.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global convBlockRGBA8
convBlockRGBA8:
/* 8002F188 00024F08  94 21 FF 90 */	stwu r1, -0x70(r1)
/* 8002F18C 00024F0C  7C 08 02 A6 */	mflr r0
/* 8002F190 00024F10  90 01 00 74 */	stw r0, 0x74(r1)
/* 8002F194 00024F14  DB E1 00 60 */	stfd f31, 0x60(r1)
/* 8002F198 00024F18  F3 E1 00 68 */	psq_st f31, 104(r1), 0, qr0
/* 8002F19C 00024F1C  39 61 00 60 */	addi r11, r1, 0x60
/* 8002F1A0 00024F20  48 3C 21 81 */	bl _savegpr_27
/* 8002F1A4 00024F24  3C 00 43 30 */	lis r0, 0x4330
/* 8002F1A8 00024F28  C8 E2 82 70 */	lfd f7, lbl_805A1590-_SDA2_BASE_(r2)
/* 8002F1AC 00024F2C  90 01 00 08 */	stw r0, 8(r1)
/* 8002F1B0 00024F30  38 C5 00 20 */	addi r6, r5, 0x20
/* 8002F1B4 00024F34  C0 C2 82 54 */	lfs f6, lbl_805A1574-_SDA2_BASE_(r2)
/* 8002F1B8 00024F38  38 E0 00 00 */	li r7, 0
/* 8002F1BC 00024F3C  90 01 00 10 */	stw r0, 0x10(r1)
/* 8002F1C0 00024F40  38 00 00 00 */	li r0, 0
/* 8002F1C4 00024F44  C0 A2 82 50 */	lfs f5, lbl_805A1570-_SDA2_BASE_(r2)
/* 8002F1C8 00024F48  39 80 00 FF */	li r12, 0xff
/* 8002F1CC 00024F4C  C0 82 82 5C */	lfs f4, lbl_805A157C-_SDA2_BASE_(r2)
/* 8002F1D0 00024F50  39 20 00 02 */	li r9, 2
/* 8002F1D4 00024F54  C0 62 82 58 */	lfs f3, lbl_805A1578-_SDA2_BASE_(r2)
/* 8002F1D8 00024F58  C0 42 82 60 */	lfs f2, lbl_805A1580-_SDA2_BASE_(r2)
/* 8002F1DC 00024F5C  C0 22 82 64 */	lfs f1, lbl_805A1584-_SDA2_BASE_(r2)
/* 8002F1E0 00024F60  C0 02 82 68 */	lfs f0, lbl_805A1588-_SDA2_BASE_(r2)
lbl_8002F1E4:
/* 8002F1E4 00024F64  7D 04 02 14 */	add r8, r4, r0
/* 8002F1E8 00024F68  7D 29 03 A6 */	mtctr r9
lbl_8002F1EC:
/* 8002F1EC 00024F6C  89 48 00 00 */	lbz r10, 0(r8)
/* 8002F1F0 00024F70  39 60 00 FF */	li r11, 0xff
/* 8002F1F4 00024F74  8B C8 00 03 */	lbz r30, 3(r8)
/* 8002F1F8 00024F78  91 41 00 0C */	stw r10, 0xc(r1)
/* 8002F1FC 00024F7C  8B E8 00 01 */	lbz r31, 1(r8)
/* 8002F200 00024F80  C9 01 00 08 */	lfd f8, 8(r1)
/* 8002F204 00024F84  93 C1 00 14 */	stw r30, 0x14(r1)
/* 8002F208 00024F88  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F20C 00024F8C  C9 21 00 10 */	lfd f9, 0x10(r1)
/* 8002F210 00024F90  91 41 00 0C */	stw r10, 0xc(r1)
/* 8002F214 00024F94  ED 6A 30 28 */	fsubs f11, f10, f6
/* 8002F218 00024F98  C9 01 00 08 */	lfd f8, 8(r1)
/* 8002F21C 00024F9C  ED 29 38 28 */	fsubs f9, f9, f7
/* 8002F220 00024FA0  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8002F224 00024FA4  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F228 00024FA8  C9 01 00 10 */	lfd f8, 0x10(r1)
/* 8002F22C 00024FAC  EF E5 02 F2 */	fmuls f31, f5, f11
/* 8002F230 00024FB0  ED 69 20 28 */	fsubs f11, f9, f4
/* 8002F234 00024FB4  93 C1 00 0C */	stw r30, 0xc(r1)
/* 8002F238 00024FB8  ED 28 38 28 */	fsubs f9, f8, f7
/* 8002F23C 00024FBC  C9 01 00 08 */	lfd f8, 8(r1)
/* 8002F240 00024FC0  ED 8A 30 28 */	fsubs f12, f10, f6
/* 8002F244 00024FC4  ED A3 02 F2 */	fmuls f13, f3, f11
/* 8002F248 00024FC8  ED 69 20 28 */	fsubs f11, f9, f4
/* 8002F24C 00024FCC  91 41 00 14 */	stw r10, 0x14(r1)
/* 8002F250 00024FD0  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F254 00024FD4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8002F258 00024FD8  ED BF 68 2A */	fadds f13, f31, f13
/* 8002F25C 00024FDC  C9 21 00 10 */	lfd f9, 0x10(r1)
/* 8002F260 00024FE0  C9 01 00 08 */	lfd f8, 8(r1)
/* 8002F264 00024FE4  ED 4A 20 28 */	fsubs f10, f10, f4
/* 8002F268 00024FE8  ED 29 38 28 */	fsubs f9, f9, f7
/* 8002F26C 00024FEC  ED 08 38 28 */	fsubs f8, f8, f7
/* 8002F270 00024FF0  FD A0 68 1E */	fctiwz f13, f13
/* 8002F274 00024FF4  ED 29 30 28 */	fsubs f9, f9, f6
/* 8002F278 00024FF8  ED 08 20 28 */	fsubs f8, f8, f4
/* 8002F27C 00024FFC  D9 A1 00 18 */	stfd f13, 0x18(r1)
/* 8002F280 00025000  ED 85 03 32 */	fmuls f12, f5, f12
/* 8002F284 00025004  ED 62 02 F2 */	fmuls f11, f2, f11
/* 8002F288 00025008  83 C1 00 1C */	lwz r30, 0x1c(r1)
/* 8002F28C 0002500C  ED 41 02 B2 */	fmuls f10, f1, f10
/* 8002F290 00025010  ED 25 02 72 */	fmuls f9, f5, f9
/* 8002F294 00025014  ED 6C 58 28 */	fsubs f11, f12, f11
/* 8002F298 00025018  7D 5E 00 D0 */	neg r10, r30
/* 8002F29C 0002501C  ED 00 02 32 */	fmuls f8, f0, f8
/* 8002F2A0 00025020  7D 4A F0 78 */	andc r10, r10, r30
/* 8002F2A4 00025024  7D 4A FE 70 */	srawi r10, r10, 0x1f
/* 8002F2A8 00025028  7F CA 50 38 */	and r10, r30, r10
/* 8002F2AC 0002502C  ED 09 40 2A */	fadds f8, f9, f8
/* 8002F2B0 00025030  2C 0A 00 FF */	cmpwi r10, 0xff
/* 8002F2B4 00025034  ED 4B 50 28 */	fsubs f10, f11, f10
/* 8002F2B8 00025038  FD 00 40 1E */	fctiwz f8, f8
/* 8002F2BC 0002503C  FD 20 50 1E */	fctiwz f9, f10
/* 8002F2C0 00025040  D9 01 00 28 */	stfd f8, 0x28(r1)
/* 8002F2C4 00025044  D9 21 00 20 */	stfd f9, 0x20(r1)
/* 8002F2C8 00025048  83 C1 00 2C */	lwz r30, 0x2c(r1)
/* 8002F2CC 0002504C  83 E1 00 24 */	lwz r31, 0x24(r1)
/* 8002F2D0 00025050  40 80 00 08 */	bge lbl_8002F2D8
/* 8002F2D4 00025054  7D 4B 53 78 */	mr r11, r10
lbl_8002F2D8:
/* 8002F2D8 00025058  7D 5F 00 D0 */	neg r10, r31
/* 8002F2DC 0002505C  55 7C 06 3E */	clrlwi r28, r11, 0x18
/* 8002F2E0 00025060  7D 4A F8 78 */	andc r10, r10, r31
/* 8002F2E4 00025064  39 60 00 FF */	li r11, 0xff
/* 8002F2E8 00025068  7D 4A FE 70 */	srawi r10, r10, 0x1f
/* 8002F2EC 0002506C  7F EA 50 38 */	and r10, r31, r10
/* 8002F2F0 00025070  2C 0A 00 FF */	cmpwi r10, 0xff
/* 8002F2F4 00025074  40 80 00 08 */	bge lbl_8002F2FC
/* 8002F2F8 00025078  7D 4B 53 78 */	mr r11, r10
lbl_8002F2FC:
/* 8002F2FC 0002507C  7D 5E 00 D0 */	neg r10, r30
/* 8002F300 00025080  55 7B 06 3E */	clrlwi r27, r11, 0x18
/* 8002F304 00025084  7D 4B F0 78 */	andc r11, r10, r30
/* 8002F308 00025088  7D 6B FE 70 */	srawi r11, r11, 0x1f
/* 8002F30C 0002508C  39 40 00 FF */	li r10, 0xff
/* 8002F310 00025090  7F CB 58 38 */	and r11, r30, r11
/* 8002F314 00025094  2C 0B 00 FF */	cmpwi r11, 0xff
/* 8002F318 00025098  40 80 00 08 */	bge lbl_8002F320
/* 8002F31C 0002509C  7D 6A 5B 78 */	mr r10, r11
lbl_8002F320:
/* 8002F320 000250A0  8B C8 00 02 */	lbz r30, 2(r8)
/* 8002F324 000250A4  39 60 00 FF */	li r11, 0xff
/* 8002F328 000250A8  8B A8 00 03 */	lbz r29, 3(r8)
/* 8002F32C 000250AC  93 C1 00 14 */	stw r30, 0x14(r1)
/* 8002F330 000250B0  8B E8 00 01 */	lbz r31, 1(r8)
/* 8002F334 000250B4  C9 01 00 10 */	lfd f8, 0x10(r1)
/* 8002F338 000250B8  93 A1 00 0C */	stw r29, 0xc(r1)
/* 8002F33C 000250BC  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F340 000250C0  C9 21 00 08 */	lfd f9, 8(r1)
/* 8002F344 000250C4  93 C1 00 14 */	stw r30, 0x14(r1)
/* 8002F348 000250C8  ED 6A 30 28 */	fsubs f11, f10, f6
/* 8002F34C 000250CC  C9 01 00 10 */	lfd f8, 0x10(r1)
/* 8002F350 000250D0  ED 29 38 28 */	fsubs f9, f9, f7
/* 8002F354 000250D4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8002F358 000250D8  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F35C 000250DC  C9 01 00 08 */	lfd f8, 8(r1)
/* 8002F360 000250E0  EF E5 02 F2 */	fmuls f31, f5, f11
/* 8002F364 000250E4  ED 69 20 28 */	fsubs f11, f9, f4
/* 8002F368 000250E8  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8002F36C 000250EC  ED 28 38 28 */	fsubs f9, f8, f7
/* 8002F370 000250F0  C9 01 00 10 */	lfd f8, 0x10(r1)
/* 8002F374 000250F4  ED 8A 30 28 */	fsubs f12, f10, f6
/* 8002F378 000250F8  ED A3 02 F2 */	fmuls f13, f3, f11
/* 8002F37C 000250FC  ED 69 20 28 */	fsubs f11, f9, f4
/* 8002F380 00025100  93 C1 00 0C */	stw r30, 0xc(r1)
/* 8002F384 00025104  ED 48 38 28 */	fsubs f10, f8, f7
/* 8002F388 00025108  93 E1 00 14 */	stw r31, 0x14(r1)
/* 8002F38C 0002510C  ED BF 68 2A */	fadds f13, f31, f13
/* 8002F390 00025110  C9 21 00 08 */	lfd f9, 8(r1)
/* 8002F394 00025114  C9 01 00 10 */	lfd f8, 0x10(r1)
/* 8002F398 00025118  ED 4A 20 28 */	fsubs f10, f10, f4
/* 8002F39C 0002511C  ED 29 38 28 */	fsubs f9, f9, f7
/* 8002F3A0 00025120  99 85 00 00 */	stb r12, 0(r5)
/* 8002F3A4 00025124  ED 08 38 28 */	fsubs f8, f8, f7
/* 8002F3A8 00025128  FD A0 68 1E */	fctiwz f13, f13
/* 8002F3AC 0002512C  9B 85 00 01 */	stb r28, 1(r5)
/* 8002F3B0 00025130  ED 29 30 28 */	fsubs f9, f9, f6
/* 8002F3B4 00025134  ED 08 20 28 */	fsubs f8, f8, f4
/* 8002F3B8 00025138  9B 66 00 00 */	stb r27, 0(r6)
/* 8002F3BC 0002513C  ED 85 03 32 */	fmuls f12, f5, f12
/* 8002F3C0 00025140  ED 62 02 F2 */	fmuls f11, f2, f11
/* 8002F3C4 00025144  D9 A1 00 30 */	stfd f13, 0x30(r1)
/* 8002F3C8 00025148  ED 41 02 B2 */	fmuls f10, f1, f10
/* 8002F3CC 0002514C  ED 25 02 72 */	fmuls f9, f5, f9
/* 8002F3D0 00025150  83 A1 00 34 */	lwz r29, 0x34(r1)
/* 8002F3D4 00025154  ED 6C 58 28 */	fsubs f11, f12, f11
/* 8002F3D8 00025158  ED 00 02 32 */	fmuls f8, f0, f8
/* 8002F3DC 0002515C  99 46 00 01 */	stb r10, 1(r6)
/* 8002F3E0 00025160  7D 5D 00 D0 */	neg r10, r29
/* 8002F3E4 00025164  7D 4A E8 78 */	andc r10, r10, r29
/* 8002F3E8 00025168  ED 4B 50 28 */	fsubs f10, f11, f10
/* 8002F3EC 0002516C  ED 09 40 2A */	fadds f8, f9, f8
/* 8002F3F0 00025170  7D 4A FE 70 */	srawi r10, r10, 0x1f
/* 8002F3F4 00025174  FD 20 50 1E */	fctiwz f9, f10
/* 8002F3F8 00025178  7F AA 50 38 */	and r10, r29, r10
/* 8002F3FC 0002517C  FD 00 40 1E */	fctiwz f8, f8
/* 8002F400 00025180  2C 0A 00 FF */	cmpwi r10, 0xff
/* 8002F404 00025184  D9 21 00 38 */	stfd f9, 0x38(r1)
/* 8002F408 00025188  D9 01 00 40 */	stfd f8, 0x40(r1)
/* 8002F40C 0002518C  83 C1 00 3C */	lwz r30, 0x3c(r1)
/* 8002F410 00025190  83 A1 00 44 */	lwz r29, 0x44(r1)
/* 8002F414 00025194  40 80 00 08 */	bge lbl_8002F41C
/* 8002F418 00025198  7D 4B 53 78 */	mr r11, r10
lbl_8002F41C:
/* 8002F41C 0002519C  7D 5E 00 D0 */	neg r10, r30
/* 8002F420 000251A0  55 7F 06 3E */	clrlwi r31, r11, 0x18
/* 8002F424 000251A4  7D 4A F0 78 */	andc r10, r10, r30
/* 8002F428 000251A8  39 60 00 FF */	li r11, 0xff
/* 8002F42C 000251AC  7D 4A FE 70 */	srawi r10, r10, 0x1f
/* 8002F430 000251B0  7F CA 50 38 */	and r10, r30, r10
/* 8002F434 000251B4  2C 0A 00 FF */	cmpwi r10, 0xff
/* 8002F438 000251B8  40 80 00 08 */	bge lbl_8002F440
/* 8002F43C 000251BC  7D 4B 53 78 */	mr r11, r10
lbl_8002F440:
/* 8002F440 000251C0  7D 5D 00 D0 */	neg r10, r29
/* 8002F444 000251C4  55 7E 06 3E */	clrlwi r30, r11, 0x18
/* 8002F448 000251C8  7D 4B E8 78 */	andc r11, r10, r29
/* 8002F44C 000251CC  7D 6B FE 70 */	srawi r11, r11, 0x1f
/* 8002F450 000251D0  39 40 00 FF */	li r10, 0xff
/* 8002F454 000251D4  7F AB 58 38 */	and r11, r29, r11
/* 8002F458 000251D8  2C 0B 00 FF */	cmpwi r11, 0xff
/* 8002F45C 000251DC  40 80 00 08 */	bge lbl_8002F464
/* 8002F460 000251E0  7D 6A 5B 78 */	mr r10, r11
lbl_8002F464:
/* 8002F464 000251E4  99 85 00 02 */	stb r12, 2(r5)
/* 8002F468 000251E8  39 08 00 04 */	addi r8, r8, 4
/* 8002F46C 000251EC  9B E5 00 03 */	stb r31, 3(r5)
/* 8002F470 000251F0  38 A5 00 04 */	addi r5, r5, 4
/* 8002F474 000251F4  9B C6 00 02 */	stb r30, 2(r6)
/* 8002F478 000251F8  99 46 00 03 */	stb r10, 3(r6)
/* 8002F47C 000251FC  38 C6 00 04 */	addi r6, r6, 4
/* 8002F480 00025200  42 00 FD 6C */	bdnz lbl_8002F1EC
/* 8002F484 00025204  38 E7 00 01 */	addi r7, r7, 1
/* 8002F488 00025208  7C 00 1A 14 */	add r0, r0, r3
/* 8002F48C 0002520C  28 07 00 04 */	cmplwi r7, 4
/* 8002F490 00025210  41 80 FD 54 */	blt lbl_8002F1E4
/* 8002F494 00025214  E3 E1 00 68 */	psq_l f31, 104(r1), 0, qr0
/* 8002F498 00025218  39 61 00 60 */	addi r11, r1, 0x60
/* 8002F49C 0002521C  CB E1 00 60 */	lfd f31, 0x60(r1)
/* 8002F4A0 00025220  48 3C 1E CD */	bl _restgpr_27
/* 8002F4A4 00025224  80 01 00 74 */	lwz r0, 0x74(r1)
/* 8002F4A8 00025228  7C 08 03 A6 */	mtlr r0
/* 8002F4AC 0002522C  38 21 00 70 */	addi r1, r1, 0x70
/* 8002F4B0 00025230  4E 80 00 20 */	blr 

.global srHeapType$7gfVfbToTex
srHeapType$7gfVfbToTex:
/* 8002F4B4 00025234  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8002F4B8 00025238  7C 08 02 A6 */	mflr r0
/* 8002F4BC 0002523C  90 01 00 34 */	stw r0, 0x34(r1)
/* 8002F4C0 00025240  39 61 00 30 */	addi r11, r1, 0x30
/* 8002F4C4 00025244  48 3C 1E 4D */	bl _savegpr_23
/* 8002F4C8 00025248  7C 79 1B 78 */	mr r25, r3
/* 8002F4CC 0002524C  7C 97 23 78 */	mr r23, r4
/* 8002F4D0 00025250  7C B8 2B 78 */	mr r24, r5
/* 8002F4D4 00025254  4B FF 45 F5 */	bl gfFrameBuffer$7getInstance
/* 8002F4D8 00025258  4B FF 44 3D */	bl gfXFBManager$7getCurrentDispBuffer
/* 8002F4DC 0002525C  3C 80 00 13 */	lis r4, 0x0012C000@ha
/* 8002F4E0 00025260  7C 7D 1B 78 */	mr r29, r3
/* 8002F4E4 00025264  7F 23 CB 78 */	mr r3, r25
/* 8002F4E8 00025268  38 84 C0 00 */	addi r4, r4, 0x0012C000@l
/* 8002F4EC 0002526C  4B FF 54 F9 */	bl alloc__13gfHeapManagerFUlUl
/* 8002F4F0 00025270  7C 7A 1B 78 */	mr r26, r3
/* 8002F4F4 00025274  90 78 00 00 */	stw r3, 0(r24)
/* 8002F4F8 00025278  7F 5B D3 78 */	mr r27, r26
/* 8002F4FC 0002527C  3B 20 00 00 */	li r25, 0
/* 8002F500 00025280  3B E0 00 00 */	li r31, 0
lbl_8002F504:
/* 8002F504 00025284  7F 9D FA 14 */	add r28, r29, r31
/* 8002F508 00025288  3B 00 00 00 */	li r24, 0
/* 8002F50C 0002528C  3B C0 00 00 */	li r30, 0
lbl_8002F510:
/* 8002F510 00025290  7F 65 DB 78 */	mr r5, r27
/* 8002F514 00025294  7C 9C F2 14 */	add r4, r28, r30
/* 8002F518 00025298  38 60 05 00 */	li r3, 0x500
/* 8002F51C 0002529C  4B FF FC 6D */	bl convBlockRGBA8
/* 8002F520 000252A0  3B 18 00 01 */	addi r24, r24, 1
/* 8002F524 000252A4  3B DE 00 08 */	addi r30, r30, 8
/* 8002F528 000252A8  28 18 00 A0 */	cmplwi r24, 0xa0
/* 8002F52C 000252AC  3B 7B 00 40 */	addi r27, r27, 0x40
/* 8002F530 000252B0  41 80 FF E0 */	blt lbl_8002F510
/* 8002F534 000252B4  3B 39 00 01 */	addi r25, r25, 1
/* 8002F538 000252B8  3B FF 14 00 */	addi r31, r31, 0x1400
/* 8002F53C 000252BC  28 19 00 78 */	cmplwi r25, 0x78
/* 8002F540 000252C0  41 80 FF C4 */	blt lbl_8002F504
/* 8002F544 000252C4  3C 80 00 13 */	lis r4, 0x0012C000@ha
/* 8002F548 000252C8  7F 43 D3 78 */	mr r3, r26
/* 8002F54C 000252CC  38 84 C0 00 */	addi r4, r4, 0x0012C000@l
/* 8002F550 000252D0  48 1A 81 C9 */	bl DCStoreRange
/* 8002F554 000252D4  7E E3 BB 78 */	mr r3, r23
/* 8002F558 000252D8  7F 44 D3 78 */	mr r4, r26
/* 8002F55C 000252DC  38 A0 02 80 */	li r5, 0x280
/* 8002F560 000252E0  38 C0 01 E0 */	li r6, 0x1e0
/* 8002F564 000252E4  38 E0 00 06 */	li r7, 6
/* 8002F568 000252E8  39 00 00 00 */	li r8, 0
/* 8002F56C 000252EC  39 20 00 00 */	li r9, 0
/* 8002F570 000252F0  39 40 00 00 */	li r10, 0
/* 8002F574 000252F4  48 1C 33 7D */	bl GXInitTexObj
/* 8002F578 000252F8  C0 22 82 78 */	lfs f1, lbl_805A1598-_SDA2_BASE_(r2)
/* 8002F57C 000252FC  7E E3 BB 78 */	mr r3, r23
/* 8002F580 00025300  38 80 00 01 */	li r4, 1
/* 8002F584 00025304  38 A0 00 01 */	li r5, 1
/* 8002F588 00025308  FC 40 08 90 */	fmr f2, f1
/* 8002F58C 0002530C  38 C0 00 00 */	li r6, 0
/* 8002F590 00025310  FC 60 08 90 */	fmr f3, f1
/* 8002F594 00025314  38 E0 00 00 */	li r7, 0
/* 8002F598 00025318  39 00 00 00 */	li r8, 0
/* 8002F59C 0002531C  48 1C 35 A9 */	bl GXInitTexObjLOD
/* 8002F5A0 00025320  39 61 00 30 */	addi r11, r1, 0x30
/* 8002F5A4 00025324  48 3C 1D B9 */	bl _restgpr_23
/* 8002F5A8 00025328  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8002F5AC 0002532C  7C 08 03 A6 */	mtlr r0
/* 8002F5B0 00025330  38 21 00 30 */	addi r1, r1, 0x30
/* 8002F5B4 00025334  4E 80 00 20 */	blr 

