.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global nw4r3g3dFQ34nw4r3g3d6Res$7CalcMaterialDirectly
nw4r3g3dFQ34nw4r3g3d6Res$7CalcMaterialDirectly:
/* 801B55C4 001AB344  94 21 FD F0 */	stwu r1, -0x210(r1)
/* 801B55C8 001AB348  7C 08 02 A6 */	mflr r0
/* 801B55CC 001AB34C  90 01 02 14 */	stw r0, 0x214(r1)
/* 801B55D0 001AB350  39 61 02 10 */	addi r11, r1, 0x210
/* 801B55D4 001AB354  48 23 BD 19 */	bl _savegpr_14
/* 801B55D8 001AB358  7C 6F 1B 78 */	mr r15, r3
/* 801B55DC 001AB35C  7C 90 23 78 */	mr r16, r4
/* 801B55E0 001AB360  7C B1 2B 78 */	mr r17, r5
/* 801B55E4 001AB364  7C D2 33 78 */	mr r18, r6
/* 801B55E8 001AB368  4B FD 9D AD */	bl nw4r3g3d6ResMdlCFv$7GetResMatNumEntries
/* 801B55EC 001AB36C  3B 61 00 A8 */	addi r27, r1, 0xa8
/* 801B55F0 001AB370  38 01 00 8C */	addi r0, r1, 0x8c
/* 801B55F4 001AB374  7C 80 D8 50 */	subf r4, r0, r27
/* 801B55F8 001AB378  3B 81 00 C8 */	addi r28, r1, 0xc8
/* 801B55FC 001AB37C  38 01 00 AC */	addi r0, r1, 0xac
/* 801B5600 001AB380  90 61 01 B8 */	stw r3, 0x1b8(r1)
/* 801B5604 001AB384  7C C0 E0 50 */	subf r6, r0, r28
/* 801B5608 001AB388  38 A4 00 03 */	addi r5, r4, 3
/* 801B560C 001AB38C  54 80 00 00 */	rlwinm r0, r4, 0, 0, 0
/* 801B5610 001AB390  3A 60 00 00 */	li r19, 0
/* 801B5614 001AB394  7C A3 16 70 */	srawi r3, r5, 2
/* 801B5618 001AB398  38 E6 00 03 */	addi r7, r6, 3
/* 801B561C 001AB39C  7C 83 01 94 */	addze r4, r3
/* 801B5620 001AB3A0  90 01 01 B4 */	stw r0, 0x1b4(r1)
/* 801B5624 001AB3A4  7C E3 16 70 */	srawi r3, r7, 2
/* 801B5628 001AB3A8  54 A0 00 00 */	rlwinm r0, r5, 0, 0, 0
/* 801B562C 001AB3AC  7C 63 01 94 */	addze r3, r3
/* 801B5630 001AB3B0  3B 44 00 01 */	addi r26, r4, 1
/* 801B5634 001AB3B4  3B 03 00 01 */	addi r24, r3, 1
/* 801B5638 001AB3B8  90 01 01 B0 */	stw r0, 0x1b0(r1)
/* 801B563C 001AB3BC  54 99 00 00 */	rlwinm r25, r4, 0, 0, 0
/* 801B5640 001AB3C0  57 4E 00 00 */	rlwinm r14, r26, 0, 0, 0
/* 801B5644 001AB3C4  54 D7 00 00 */	rlwinm r23, r6, 0, 0, 0
/* 801B5648 001AB3C8  54 F6 00 00 */	rlwinm r22, r7, 0, 0, 0
/* 801B564C 001AB3CC  54 75 00 00 */	rlwinm r21, r3, 0, 0, 0
/* 801B5650 001AB3D0  57 14 00 00 */	rlwinm r20, r24, 0, 0, 0
/* 801B5654 001AB3D4  3B A0 00 00 */	li r29, 0
/* 801B5658 001AB3D8  48 00 03 58 */	b lbl_801B59B0
lbl_801B565C:
/* 801B565C 001AB3DC  7D E3 7B 78 */	mr r3, r15
/* 801B5660 001AB3E0  7E 64 9B 78 */	mr r4, r19
/* 801B5664 001AB3E4  4B FD 9C DD */	bl nw4r3g3d6ResMdlCFUl$7GetResMat
/* 801B5668 001AB3E8  2C 10 00 00 */	cmpwi r16, 0
/* 801B566C 001AB3EC  7C 7F 1B 78 */	mr r31, r3
/* 801B5670 001AB3F0  41 82 02 34 */	beq lbl_801B58A4
/* 801B5674 001AB3F4  7E 03 83 78 */	mr r3, r16
/* 801B5678 001AB3F8  7E 64 9B 78 */	mr r4, r19
/* 801B567C 001AB3FC  4B FE 33 49 */	bl nw4r3g3d12AnmObjTexPatCFUl$7TestExistence
/* 801B5680 001AB400  2C 03 00 00 */	cmpwi r3, 0
/* 801B5684 001AB404  41 82 02 20 */	beq lbl_801B58A4
/* 801B5688 001AB408  38 81 00 8C */	addi r4, r1, 0x8c
/* 801B568C 001AB40C  93 A1 00 88 */	stw r29, 0x88(r1)
/* 801B5690 001AB410  7C 04 D8 40 */	cmplw r4, r27
/* 801B5694 001AB414  40 80 00 EC */	bge lbl_801B5780
/* 801B5698 001AB418  2C 1A 00 08 */	cmpwi r26, 8
/* 801B569C 001AB41C  40 81 00 C0 */	ble lbl_801B575C
/* 801B56A0 001AB420  7C 80 23 78 */	mr r0, r4
/* 801B56A4 001AB424  38 60 00 00 */	li r3, 0
/* 801B56A8 001AB428  7C 00 D8 40 */	cmplw r0, r27
/* 801B56AC 001AB42C  38 A0 00 00 */	li r5, 0
/* 801B56B0 001AB430  41 81 00 30 */	bgt lbl_801B56E0
/* 801B56B4 001AB434  80 01 01 B4 */	lwz r0, 0x1b4(r1)
/* 801B56B8 001AB438  38 C0 00 01 */	li r6, 1
/* 801B56BC 001AB43C  2C 00 00 00 */	cmpwi r0, 0
/* 801B56C0 001AB440  40 82 00 14 */	bne lbl_801B56D4
/* 801B56C4 001AB444  80 01 01 B0 */	lwz r0, 0x1b0(r1)
/* 801B56C8 001AB448  2C 00 00 00 */	cmpwi r0, 0
/* 801B56CC 001AB44C  41 82 00 08 */	beq lbl_801B56D4
/* 801B56D0 001AB450  38 C0 00 00 */	li r6, 0
lbl_801B56D4:
/* 801B56D4 001AB454  2C 06 00 00 */	cmpwi r6, 0
/* 801B56D8 001AB458  41 82 00 08 */	beq lbl_801B56E0
/* 801B56DC 001AB45C  38 A0 00 01 */	li r5, 1
lbl_801B56E0:
/* 801B56E0 001AB460  2C 05 00 00 */	cmpwi r5, 0
/* 801B56E4 001AB464  41 82 00 28 */	beq lbl_801B570C
/* 801B56E8 001AB468  2C 19 00 00 */	cmpwi r25, 0
/* 801B56EC 001AB46C  38 00 00 01 */	li r0, 1
/* 801B56F0 001AB470  40 82 00 10 */	bne lbl_801B5700
/* 801B56F4 001AB474  7C 19 70 00 */	cmpw r25, r14
/* 801B56F8 001AB478  41 82 00 08 */	beq lbl_801B5700
/* 801B56FC 001AB47C  38 00 00 00 */	li r0, 0
lbl_801B5700:
/* 801B5700 001AB480  2C 00 00 00 */	cmpwi r0, 0
/* 801B5704 001AB484  41 82 00 08 */	beq lbl_801B570C
/* 801B5708 001AB488  38 60 00 01 */	li r3, 1
lbl_801B570C:
/* 801B570C 001AB48C  2C 03 00 00 */	cmpwi r3, 0
/* 801B5710 001AB490  41 82 00 4C */	beq lbl_801B575C
/* 801B5714 001AB494  38 61 00 88 */	addi r3, r1, 0x88
/* 801B5718 001AB498  38 03 00 1F */	addi r0, r3, 0x1f
/* 801B571C 001AB49C  7C 04 00 50 */	subf r0, r4, r0
/* 801B5720 001AB4A0  54 00 D9 7E */	srwi r0, r0, 5
/* 801B5724 001AB4A4  7C 09 03 A6 */	mtctr r0
/* 801B5728 001AB4A8  7C 60 1B 78 */	mr r0, r3
/* 801B572C 001AB4AC  7C 04 00 40 */	cmplw r4, r0
/* 801B5730 001AB4B0  40 80 00 2C */	bge lbl_801B575C
lbl_801B5734:
/* 801B5734 001AB4B4  93 A4 00 00 */	stw r29, 0(r4)
/* 801B5738 001AB4B8  93 A4 00 04 */	stw r29, 4(r4)
/* 801B573C 001AB4BC  93 A4 00 08 */	stw r29, 8(r4)
/* 801B5740 001AB4C0  93 A4 00 0C */	stw r29, 0xc(r4)
/* 801B5744 001AB4C4  93 A4 00 10 */	stw r29, 0x10(r4)
/* 801B5748 001AB4C8  93 A4 00 14 */	stw r29, 0x14(r4)
/* 801B574C 001AB4CC  93 A4 00 18 */	stw r29, 0x18(r4)
/* 801B5750 001AB4D0  93 A4 00 1C */	stw r29, 0x1c(r4)
/* 801B5754 001AB4D4  38 84 00 20 */	addi r4, r4, 0x20
/* 801B5758 001AB4D8  42 00 FF DC */	bdnz lbl_801B5734
lbl_801B575C:
/* 801B575C 001AB4DC  38 1B 00 03 */	addi r0, r27, 3
/* 801B5760 001AB4E0  7C 04 00 50 */	subf r0, r4, r0
/* 801B5764 001AB4E4  54 00 F0 BE */	srwi r0, r0, 2
/* 801B5768 001AB4E8  7C 09 03 A6 */	mtctr r0
/* 801B576C 001AB4EC  7C 04 D8 40 */	cmplw r4, r27
/* 801B5770 001AB4F0  40 80 00 10 */	bge lbl_801B5780
lbl_801B5774:
/* 801B5774 001AB4F4  93 A4 00 00 */	stw r29, 0(r4)
/* 801B5778 001AB4F8  38 84 00 04 */	addi r4, r4, 4
/* 801B577C 001AB4FC  42 00 FF F8 */	bdnz lbl_801B5774
lbl_801B5780:
/* 801B5780 001AB500  38 61 00 AC */	addi r3, r1, 0xac
/* 801B5784 001AB504  93 A1 00 A8 */	stw r29, 0xa8(r1)
/* 801B5788 001AB508  7C 03 E0 40 */	cmplw r3, r28
/* 801B578C 001AB50C  40 80 00 DC */	bge lbl_801B5868
/* 801B5790 001AB510  2C 18 00 08 */	cmpwi r24, 8
/* 801B5794 001AB514  40 81 00 B0 */	ble lbl_801B5844
/* 801B5798 001AB518  7C 60 1B 78 */	mr r0, r3
/* 801B579C 001AB51C  38 80 00 00 */	li r4, 0
/* 801B57A0 001AB520  7C 00 E0 40 */	cmplw r0, r28
/* 801B57A4 001AB524  38 00 00 00 */	li r0, 0
/* 801B57A8 001AB528  41 81 00 28 */	bgt lbl_801B57D0
/* 801B57AC 001AB52C  2C 17 00 00 */	cmpwi r23, 0
/* 801B57B0 001AB530  38 A0 00 01 */	li r5, 1
/* 801B57B4 001AB534  40 82 00 10 */	bne lbl_801B57C4
/* 801B57B8 001AB538  2C 16 00 00 */	cmpwi r22, 0
/* 801B57BC 001AB53C  41 82 00 08 */	beq lbl_801B57C4
/* 801B57C0 001AB540  38 A0 00 00 */	li r5, 0
lbl_801B57C4:
/* 801B57C4 001AB544  2C 05 00 00 */	cmpwi r5, 0
/* 801B57C8 001AB548  41 82 00 08 */	beq lbl_801B57D0
/* 801B57CC 001AB54C  38 80 00 01 */	li r4, 1
lbl_801B57D0:
/* 801B57D0 001AB550  2C 04 00 00 */	cmpwi r4, 0
/* 801B57D4 001AB554  41 82 00 28 */	beq lbl_801B57FC
/* 801B57D8 001AB558  2C 15 00 00 */	cmpwi r21, 0
/* 801B57DC 001AB55C  38 80 00 01 */	li r4, 1
/* 801B57E0 001AB560  40 82 00 10 */	bne lbl_801B57F0
/* 801B57E4 001AB564  7C 15 A0 00 */	cmpw r21, r20
/* 801B57E8 001AB568  41 82 00 08 */	beq lbl_801B57F0
/* 801B57EC 001AB56C  38 80 00 00 */	li r4, 0
lbl_801B57F0:
/* 801B57F0 001AB570  2C 04 00 00 */	cmpwi r4, 0
/* 801B57F4 001AB574  41 82 00 08 */	beq lbl_801B57FC
/* 801B57F8 001AB578  38 00 00 01 */	li r0, 1
lbl_801B57FC:
/* 801B57FC 001AB57C  2C 00 00 00 */	cmpwi r0, 0
/* 801B5800 001AB580  41 82 00 44 */	beq lbl_801B5844
/* 801B5804 001AB584  38 1B 00 1F */	addi r0, r27, 0x1f
/* 801B5808 001AB588  7C 03 00 50 */	subf r0, r3, r0
/* 801B580C 001AB58C  54 00 D9 7E */	srwi r0, r0, 5
/* 801B5810 001AB590  7C 09 03 A6 */	mtctr r0
/* 801B5814 001AB594  7C 03 D8 40 */	cmplw r3, r27
/* 801B5818 001AB598  40 80 00 2C */	bge lbl_801B5844
lbl_801B581C:
/* 801B581C 001AB59C  93 A3 00 00 */	stw r29, 0(r3)
/* 801B5820 001AB5A0  93 A3 00 04 */	stw r29, 4(r3)
/* 801B5824 001AB5A4  93 A3 00 08 */	stw r29, 8(r3)
/* 801B5828 001AB5A8  93 A3 00 0C */	stw r29, 0xc(r3)
/* 801B582C 001AB5AC  93 A3 00 10 */	stw r29, 0x10(r3)
/* 801B5830 001AB5B0  93 A3 00 14 */	stw r29, 0x14(r3)
/* 801B5834 001AB5B4  93 A3 00 18 */	stw r29, 0x18(r3)
/* 801B5838 001AB5B8  93 A3 00 1C */	stw r29, 0x1c(r3)
/* 801B583C 001AB5BC  38 63 00 20 */	addi r3, r3, 0x20
/* 801B5840 001AB5C0  42 00 FF DC */	bdnz lbl_801B581C
lbl_801B5844:
/* 801B5844 001AB5C4  38 1C 00 03 */	addi r0, r28, 3
/* 801B5848 001AB5C8  7C 03 00 50 */	subf r0, r3, r0
/* 801B584C 001AB5CC  54 00 F0 BE */	srwi r0, r0, 2
/* 801B5850 001AB5D0  7C 09 03 A6 */	mtctr r0
/* 801B5854 001AB5D4  7C 03 E0 40 */	cmplw r3, r28
/* 801B5858 001AB5D8  40 80 00 10 */	bge lbl_801B5868
lbl_801B585C:
/* 801B585C 001AB5DC  93 A3 00 00 */	stw r29, 0(r3)
/* 801B5860 001AB5E0  38 63 00 04 */	addi r3, r3, 4
/* 801B5864 001AB5E4  42 00 FF F8 */	bdnz lbl_801B585C
lbl_801B5868:
/* 801B5868 001AB5E8  81 90 00 00 */	lwz r12, 0(r16)
/* 801B586C 001AB5EC  7E 03 83 78 */	mr r3, r16
/* 801B5870 001AB5F0  7E 65 9B 78 */	mr r5, r19
/* 801B5874 001AB5F4  38 81 00 84 */	addi r4, r1, 0x84
/* 801B5878 001AB5F8  81 8C 00 38 */	lwz r12, 0x38(r12)
/* 801B587C 001AB5FC  7D 89 03 A6 */	mtctr r12
/* 801B5880 001AB600  4E 80 04 21 */	bctrl 
/* 801B5884 001AB604  38 9F 01 40 */	addi r4, r31, 0x140
/* 801B5888 001AB608  38 1F 00 3C */	addi r0, r31, 0x3c
/* 801B588C 001AB60C  90 81 00 18 */	stw r4, 0x18(r1)
/* 801B5890 001AB610  7C 65 1B 78 */	mr r5, r3
/* 801B5894 001AB614  38 61 00 1C */	addi r3, r1, 0x1c
/* 801B5898 001AB618  38 81 00 18 */	addi r4, r1, 0x18
/* 801B589C 001AB61C  90 01 00 1C */	stw r0, 0x1c(r1)
/* 801B58A0 001AB620  4B FE 37 2D */	bl nw4r3g3dFQ34nw4r3g3d9Res$7ApplyTexPatAnmResult
lbl_801B58A4:
/* 801B58A4 001AB624  2C 11 00 00 */	cmpwi r17, 0
/* 801B58A8 001AB628  41 82 00 80 */	beq lbl_801B5928
/* 801B58AC 001AB62C  7E 23 8B 78 */	mr r3, r17
/* 801B58B0 001AB630  7E 64 9B 78 */	mr r4, r19
/* 801B58B4 001AB634  4B FE 3A 81 */	bl nw4r3g3d12AnmObjTexSrtCFUl$7TestExistence
/* 801B58B8 001AB638  2C 03 00 00 */	cmpwi r3, 0
/* 801B58BC 001AB63C  41 82 00 6C */	beq lbl_801B5928
/* 801B58C0 001AB640  80 1F 00 38 */	lwz r0, 0x38(r31)
/* 801B58C4 001AB644  3B DF 01 A4 */	addi r30, r31, 0x1a4
/* 801B58C8 001AB648  2C 00 00 00 */	cmpwi r0, 0
/* 801B58CC 001AB64C  41 82 00 0C */	beq lbl_801B58D8
/* 801B58D0 001AB650  7C 7F 02 14 */	add r3, r31, r0
/* 801B58D4 001AB654  48 00 00 08 */	b lbl_801B58DC
lbl_801B58D8:
/* 801B58D8 001AB658  38 60 00 00 */	li r3, 0
lbl_801B58DC:
/* 801B58DC 001AB65C  38 03 00 A0 */	addi r0, r3, 0xa0
/* 801B58E0 001AB660  7E 23 8B 78 */	mr r3, r17
/* 801B58E4 001AB664  90 01 00 24 */	stw r0, 0x24(r1)
/* 801B58E8 001AB668  7E 65 9B 78 */	mr r5, r19
/* 801B58EC 001AB66C  38 81 00 C8 */	addi r4, r1, 0xc8
/* 801B58F0 001AB670  81 91 00 00 */	lwz r12, 0(r17)
/* 801B58F4 001AB674  81 8C 00 38 */	lwz r12, 0x38(r12)
/* 801B58F8 001AB678  7D 89 03 A6 */	mtctr r12
/* 801B58FC 001AB67C  4E 80 04 21 */	bctrl 
/* 801B5900 001AB680  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801B5904 001AB684  7C 65 1B 78 */	mr r5, r3
/* 801B5908 001AB688  93 C1 00 14 */	stw r30, 0x14(r1)
/* 801B590C 001AB68C  38 61 00 14 */	addi r3, r1, 0x14
/* 801B5910 001AB690  38 81 00 10 */	addi r4, r1, 0x10
/* 801B5914 001AB694  90 01 00 10 */	stw r0, 0x10(r1)
/* 801B5918 001AB698  4B FE 40 BD */	bl nw4r3g3dFQ34nw4r3g3d9Res$7ApplyTexSrtAnmResult_5408
/* 801B591C 001AB69C  38 61 00 24 */	addi r3, r1, 0x24
/* 801B5920 001AB6A0  38 80 00 00 */	li r4, 0
/* 801B5924 001AB6A4  4B FD B1 35 */	bl nw4r3g3d20ResMatIndMtxAndScaleFb$7DCStore
lbl_801B5928:
/* 801B5928 001AB6A8  2C 12 00 00 */	cmpwi r18, 0
/* 801B592C 001AB6AC  41 82 00 80 */	beq lbl_801B59AC
/* 801B5930 001AB6B0  7E 43 93 78 */	mr r3, r18
/* 801B5934 001AB6B4  7E 64 9B 78 */	mr r4, r19
/* 801B5938 001AB6B8  4B FE 23 C5 */	bl nw4r3g3d12AnmObjMatClrCFUl$7TestExistence
/* 801B593C 001AB6BC  2C 03 00 00 */	cmpwi r3, 0
/* 801B5940 001AB6C0  41 82 00 6C */	beq lbl_801B59AC
/* 801B5944 001AB6C4  80 1F 00 38 */	lwz r0, 0x38(r31)
/* 801B5948 001AB6C8  2C 00 00 00 */	cmpwi r0, 0
/* 801B594C 001AB6CC  41 82 00 0C */	beq lbl_801B5958
/* 801B5950 001AB6D0  7C 7F 02 14 */	add r3, r31, r0
/* 801B5954 001AB6D4  48 00 00 08 */	b lbl_801B595C
lbl_801B5958:
/* 801B5958 001AB6D8  38 60 00 00 */	li r3, 0
lbl_801B595C:
/* 801B595C 001AB6DC  38 03 00 20 */	addi r0, r3, 0x20
/* 801B5960 001AB6E0  7E 43 93 78 */	mr r3, r18
/* 801B5964 001AB6E4  90 01 00 20 */	stw r0, 0x20(r1)
/* 801B5968 001AB6E8  7E 65 9B 78 */	mr r5, r19
/* 801B596C 001AB6EC  3B DF 03 EC */	addi r30, r31, 0x3ec
/* 801B5970 001AB6F0  38 81 00 28 */	addi r4, r1, 0x28
/* 801B5974 001AB6F4  81 92 00 00 */	lwz r12, 0(r18)
/* 801B5978 001AB6F8  81 8C 00 38 */	lwz r12, 0x38(r12)
/* 801B597C 001AB6FC  7D 89 03 A6 */	mtctr r12
/* 801B5980 001AB700  4E 80 04 21 */	bctrl 
/* 801B5984 001AB704  80 01 00 20 */	lwz r0, 0x20(r1)
/* 801B5988 001AB708  7C 65 1B 78 */	mr r5, r3
/* 801B598C 001AB70C  93 C1 00 0C */	stw r30, 0xc(r1)
/* 801B5990 001AB710  38 61 00 0C */	addi r3, r1, 0xc
/* 801B5994 001AB714  38 81 00 08 */	addi r4, r1, 8
/* 801B5998 001AB718  90 01 00 08 */	stw r0, 8(r1)
/* 801B599C 001AB71C  4B FE 29 65 */	bl nw4r3g3dFQ34nw4r3g3d10Re$7ApplyClrAnmResult
/* 801B59A0 001AB720  38 61 00 20 */	addi r3, r1, 0x20
/* 801B59A4 001AB724  38 80 00 00 */	li r4, 0
/* 801B59A8 001AB728  4B FD B0 95 */	bl nw4r3g3d14ResMatTevColorFb$7DCStore
lbl_801B59AC:
/* 801B59AC 001AB72C  3A 73 00 01 */	addi r19, r19, 1
lbl_801B59B0:
/* 801B59B0 001AB730  80 01 01 B8 */	lwz r0, 0x1b8(r1)
/* 801B59B4 001AB734  7C 13 00 40 */	cmplw r19, r0
/* 801B59B8 001AB738  41 80 FC A4 */	blt lbl_801B565C
/* 801B59BC 001AB73C  39 61 02 10 */	addi r11, r1, 0x210
/* 801B59C0 001AB740  48 23 B9 79 */	bl _restgpr_14
/* 801B59C4 001AB744  80 01 02 14 */	lwz r0, 0x214(r1)
/* 801B59C8 001AB748  7C 08 03 A6 */	mtlr r0
/* 801B59CC 001AB74C  38 21 02 10 */	addi r1, r1, 0x210
/* 801B59D0 001AB750  4E 80 00 20 */	blr 

