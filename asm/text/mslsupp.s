.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global __TRK_write_console
__TRK_write_console:
/* 80405520 003FB2A0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80405524 003FB2A4  7C 08 02 A6 */	mflr r0
/* 80405528 003FB2A8  90 01 00 24 */	stw r0, 0x24(r1)
/* 8040552C 003FB2AC  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80405530 003FB2B0  7C BF 2B 78 */	mr r31, r5
/* 80405534 003FB2B4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80405538 003FB2B8  7C 9E 23 78 */	mr r30, r4
/* 8040553C 003FB2BC  48 00 09 B1 */	bl GetUseSerialIO
/* 80405540 003FB2C0  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80405544 003FB2C4  40 82 00 0C */	bne lbl_80405550
/* 80405548 003FB2C8  38 60 00 01 */	li r3, 1
/* 8040554C 003FB2CC  48 00 00 78 */	b lbl_804055C4
lbl_80405550:
/* 80405550 003FB2D0  4B FF D9 A1 */	bl GetTRKConnected
/* 80405554 003FB2D4  2C 03 00 00 */	cmpwi r3, 0
/* 80405558 003FB2D8  40 82 00 0C */	bne lbl_80405564
/* 8040555C 003FB2DC  38 60 00 01 */	li r3, 1
/* 80405560 003FB2E0  48 00 00 64 */	b lbl_804055C4
lbl_80405564:
/* 80405564 003FB2E4  80 1F 00 00 */	lwz r0, 0(r31)
/* 80405568 003FB2E8  7F C6 F3 78 */	mr r6, r30
/* 8040556C 003FB2EC  38 A1 00 08 */	addi r5, r1, 8
/* 80405570 003FB2F0  38 60 00 D0 */	li r3, 0xd0
/* 80405574 003FB2F4  90 01 00 08 */	stw r0, 8(r1)
/* 80405578 003FB2F8  38 80 00 01 */	li r4, 1
/* 8040557C 003FB2FC  4B FF FC 15 */	bl $6fill$6
/* 80405580 003FB300  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 80405584 003FB304  80 61 00 08 */	lwz r3, 8(r1)
/* 80405588 003FB308  2C 00 00 01 */	cmpwi r0, 1
/* 8040558C 003FB30C  90 7F 00 00 */	stw r3, 0(r31)
/* 80405590 003FB310  41 82 00 30 */	beq lbl_804055C0
/* 80405594 003FB314  40 80 00 10 */	bge lbl_804055A4
/* 80405598 003FB318  2C 00 00 00 */	cmpwi r0, 0
/* 8040559C 003FB31C  40 80 00 14 */	bge lbl_804055B0
/* 804055A0 003FB320  48 00 00 20 */	b lbl_804055C0
lbl_804055A4:
/* 804055A4 003FB324  2C 00 00 03 */	cmpwi r0, 3
/* 804055A8 003FB328  40 80 00 18 */	bge lbl_804055C0
/* 804055AC 003FB32C  48 00 00 0C */	b lbl_804055B8
lbl_804055B0:
/* 804055B0 003FB330  38 60 00 00 */	li r3, 0
/* 804055B4 003FB334  48 00 00 10 */	b lbl_804055C4
lbl_804055B8:
/* 804055B8 003FB338  38 60 00 02 */	li r3, 2
/* 804055BC 003FB33C  48 00 00 08 */	b lbl_804055C4
lbl_804055C0:
/* 804055C0 003FB340  38 60 00 01 */	li r3, 1
lbl_804055C4:
/* 804055C4 003FB344  80 01 00 24 */	lwz r0, 0x24(r1)
/* 804055C8 003FB348  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 804055CC 003FB34C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 804055D0 003FB350  7C 08 03 A6 */	mtlr r0
/* 804055D4 003FB354  38 21 00 20 */	addi r1, r1, 0x20
/* 804055D8 003FB358  4E 80 00 20 */	blr 

.global __read_console
__read_console:
/* 804055DC 003FB35C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 804055E0 003FB360  7C 08 02 A6 */	mflr r0
/* 804055E4 003FB364  90 01 00 24 */	stw r0, 0x24(r1)
/* 804055E8 003FB368  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 804055EC 003FB36C  7C BF 2B 78 */	mr r31, r5
/* 804055F0 003FB370  93 C1 00 18 */	stw r30, 0x18(r1)
/* 804055F4 003FB374  7C 9E 23 78 */	mr r30, r4
/* 804055F8 003FB378  48 00 08 F5 */	bl GetUseSerialIO
/* 804055FC 003FB37C  54 60 06 3F */	clrlwi. r0, r3, 0x18
/* 80405600 003FB380  40 82 00 0C */	bne lbl_8040560C
/* 80405604 003FB384  38 60 00 01 */	li r3, 1
/* 80405608 003FB388  48 00 00 78 */	b lbl_80405680
lbl_8040560C:
/* 8040560C 003FB38C  4B FF D8 E5 */	bl GetTRKConnected
/* 80405610 003FB390  2C 03 00 00 */	cmpwi r3, 0
/* 80405614 003FB394  40 82 00 0C */	bne lbl_80405620
/* 80405618 003FB398  38 60 00 01 */	li r3, 1
/* 8040561C 003FB39C  48 00 00 64 */	b lbl_80405680
lbl_80405620:
/* 80405620 003FB3A0  80 1F 00 00 */	lwz r0, 0(r31)
/* 80405624 003FB3A4  7F C6 F3 78 */	mr r6, r30
/* 80405628 003FB3A8  38 A1 00 08 */	addi r5, r1, 8
/* 8040562C 003FB3AC  38 60 00 D1 */	li r3, 0xd1
/* 80405630 003FB3B0  90 01 00 08 */	stw r0, 8(r1)
/* 80405634 003FB3B4  38 80 00 00 */	li r4, 0
/* 80405638 003FB3B8  4B FF FB 59 */	bl $6fill$6
/* 8040563C 003FB3BC  54 60 06 3E */	clrlwi r0, r3, 0x18
/* 80405640 003FB3C0  80 61 00 08 */	lwz r3, 8(r1)
/* 80405644 003FB3C4  2C 00 00 01 */	cmpwi r0, 1
/* 80405648 003FB3C8  90 7F 00 00 */	stw r3, 0(r31)
/* 8040564C 003FB3CC  41 82 00 30 */	beq lbl_8040567C
/* 80405650 003FB3D0  40 80 00 10 */	bge lbl_80405660
/* 80405654 003FB3D4  2C 00 00 00 */	cmpwi r0, 0
/* 80405658 003FB3D8  40 80 00 14 */	bge lbl_8040566C
/* 8040565C 003FB3DC  48 00 00 20 */	b lbl_8040567C
lbl_80405660:
/* 80405660 003FB3E0  2C 00 00 03 */	cmpwi r0, 3
/* 80405664 003FB3E4  40 80 00 18 */	bge lbl_8040567C
/* 80405668 003FB3E8  48 00 00 0C */	b lbl_80405674
lbl_8040566C:
/* 8040566C 003FB3EC  38 60 00 00 */	li r3, 0
/* 80405670 003FB3F0  48 00 00 10 */	b lbl_80405680
lbl_80405674:
/* 80405674 003FB3F4  38 60 00 02 */	li r3, 2
/* 80405678 003FB3F8  48 00 00 08 */	b lbl_80405680
lbl_8040567C:
/* 8040567C 003FB3FC  38 60 00 01 */	li r3, 1
lbl_80405680:
/* 80405680 003FB400  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80405684 003FB404  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80405688 003FB408  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8040568C 003FB40C  7C 08 03 A6 */	mtlr r0
/* 80405690 003FB410  38 21 00 20 */	addi r1, r1, 0x20
/* 80405694 003FB414  4E 80 00 20 */	blr 

