.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global PFDRV_LoadVolumeLabelFromBuf
PFDRV_LoadVolumeLabelFromBuf:
/* 803D6C50 003CC9D0  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803D6C54 003CC9D4  7C 08 02 A6 */	mflr r0
/* 803D6C58 003CC9D8  38 A0 00 0B */	li r5, 0xb
/* 803D6C5C 003CC9DC  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D6C60 003CC9E0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D6C64 003CC9E4  7C 7F 1B 78 */	mr r31, r3
/* 803D6C68 003CC9E8  38 63 16 48 */	addi r3, r3, 0x1648
/* 803D6C6C 003CC9EC  4B FF F5 B9 */	bl pf_memcpy
/* 803D6C70 003CC9F0  38 00 00 00 */	li r0, 0
/* 803D6C74 003CC9F4  98 1F 16 53 */	stb r0, 0x1653(r31)
/* 803D6C78 003CC9F8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803D6C7C 003CC9FC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D6C80 003CCA00  7C 08 03 A6 */	mtlr r0
/* 803D6C84 003CCA04  38 21 00 10 */	addi r1, r1, 0x10
/* 803D6C88 003CCA08  4E 80 00 20 */	blr 

.global PFDRV_MediaEject
PFDRV_MediaEject:
/* 803D6C8C 003CCA0C  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D6C90 003CCA10  38 00 00 0D */	li r0, 0xd
/* 803D6C94 003CCA14  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D6C98 003CCA18  38 C0 00 00 */	li r6, 0
/* 803D6C9C 003CCA1C  38 A4 00 A0 */	addi r5, r4, 0xa0
/* 803D6CA0 003CCA20  7C 09 03 A6 */	mtctr r0
lbl_803D6CA4:
/* 803D6CA4 003CCA24  80 05 1F BC */	lwz r0, 0x1fbc(r5)
/* 803D6CA8 003CCA28  7C 00 18 40 */	cmplw r0, r3
/* 803D6CAC 003CCA2C  40 82 00 24 */	bne lbl_803D6CD0
/* 803D6CB0 003CCA30  A0 85 1F 8C */	lhz r4, 0x1f8c(r5)
/* 803D6CB4 003CCA34  54 80 07 39 */	rlwinm. r0, r4, 0, 0x1c, 0x1c
/* 803D6CB8 003CCA38  41 82 00 0C */	beq lbl_803D6CC4
/* 803D6CBC 003CCA3C  60 80 00 20 */	ori r0, r4, 0x20
/* 803D6CC0 003CCA40  B0 05 1F 8C */	sth r0, 0x1f8c(r5)
lbl_803D6CC4:
/* 803D6CC4 003CCA44  A0 05 1F 8C */	lhz r0, 0x1f8c(r5)
/* 803D6CC8 003CCA48  54 00 07 B6 */	rlwinm r0, r0, 0, 0x1e, 0x1b
/* 803D6CCC 003CCA4C  B0 05 1F 8C */	sth r0, 0x1f8c(r5)
lbl_803D6CD0:
/* 803D6CD0 003CCA50  80 05 3F 84 */	lwz r0, 0x3f84(r5)
/* 803D6CD4 003CCA54  7C 00 18 40 */	cmplw r0, r3
/* 803D6CD8 003CCA58  40 82 00 24 */	bne lbl_803D6CFC
/* 803D6CDC 003CCA5C  A0 85 3F 54 */	lhz r4, 0x3f54(r5)
/* 803D6CE0 003CCA60  54 80 07 39 */	rlwinm. r0, r4, 0, 0x1c, 0x1c
/* 803D6CE4 003CCA64  41 82 00 0C */	beq lbl_803D6CF0
/* 803D6CE8 003CCA68  60 80 00 20 */	ori r0, r4, 0x20
/* 803D6CEC 003CCA6C  B0 05 3F 54 */	sth r0, 0x3f54(r5)
lbl_803D6CF0:
/* 803D6CF0 003CCA70  A0 05 3F 54 */	lhz r0, 0x3f54(r5)
/* 803D6CF4 003CCA74  54 00 07 B6 */	rlwinm r0, r0, 0, 0x1e, 0x1b
/* 803D6CF8 003CCA78  B0 05 3F 54 */	sth r0, 0x3f54(r5)
lbl_803D6CFC:
/* 803D6CFC 003CCA7C  38 A5 3F 90 */	addi r5, r5, 0x3f90
/* 803D6D00 003CCA80  38 C6 00 01 */	addi r6, r6, 1
/* 803D6D04 003CCA84  42 00 FF A0 */	bdnz lbl_803D6CA4
/* 803D6D08 003CCA88  4E 80 00 20 */	blr 

.global PFDRV_MediaInsert
PFDRV_MediaInsert:
/* 803D6D0C 003CCA8C  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D6D10 003CCA90  38 00 00 0D */	li r0, 0xd
/* 803D6D14 003CCA94  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D6D18 003CCA98  38 A0 00 00 */	li r5, 0
/* 803D6D1C 003CCA9C  38 84 00 A0 */	addi r4, r4, 0xa0
/* 803D6D20 003CCAA0  7C 09 03 A6 */	mtctr r0
lbl_803D6D24:
/* 803D6D24 003CCAA4  80 04 1F BC */	lwz r0, 0x1fbc(r4)
/* 803D6D28 003CCAA8  7C 00 18 40 */	cmplw r0, r3
/* 803D6D2C 003CCAAC  40 82 00 10 */	bne lbl_803D6D3C
/* 803D6D30 003CCAB0  A0 04 1F 8C */	lhz r0, 0x1f8c(r4)
/* 803D6D34 003CCAB4  60 00 00 14 */	ori r0, r0, 0x14
/* 803D6D38 003CCAB8  B0 04 1F 8C */	sth r0, 0x1f8c(r4)
lbl_803D6D3C:
/* 803D6D3C 003CCABC  80 04 3F 84 */	lwz r0, 0x3f84(r4)
/* 803D6D40 003CCAC0  7C 00 18 40 */	cmplw r0, r3
/* 803D6D44 003CCAC4  40 82 00 10 */	bne lbl_803D6D54
/* 803D6D48 003CCAC8  A0 04 3F 54 */	lhz r0, 0x3f54(r4)
/* 803D6D4C 003CCACC  60 00 00 14 */	ori r0, r0, 0x14
/* 803D6D50 003CCAD0  B0 04 3F 54 */	sth r0, 0x3f54(r4)
lbl_803D6D54:
/* 803D6D54 003CCAD4  38 84 3F 90 */	addi r4, r4, 0x3f90
/* 803D6D58 003CCAD8  38 A5 00 01 */	addi r5, r5, 1
/* 803D6D5C 003CCADC  42 00 FF C8 */	bdnz lbl_803D6D24
/* 803D6D60 003CCAE0  4E 80 00 20 */	blr 

.global PFDRV_IsInserted
PFDRV_IsInserted:
/* 803D6D64 003CCAE4  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803D6D68 003CCAE8  54 03 F7 FE */	rlwinm r3, r0, 0x1e, 0x1f, 0x1f
/* 803D6D6C 003CCAEC  4E 80 00 20 */	blr 

.global PFDRV_IsMountRequested
PFDRV_IsMountRequested:
/* 803D6D70 003CCAF0  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803D6D74 003CCAF4  54 03 E7 FE */	rlwinm r3, r0, 0x1c, 0x1f, 0x1f
/* 803D6D78 003CCAF8  4E 80 00 20 */	blr 

.global PFDRV_ClearMountRequested
PFDRV_ClearMountRequested:
/* 803D6D7C 003CCAFC  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803D6D80 003CCB00  54 00 07 34 */	rlwinm r0, r0, 0, 0x1c, 0x1a
/* 803D6D84 003CCB04  B0 03 1F 8C */	sth r0, 0x1f8c(r3)
/* 803D6D88 003CCB08  4E 80 00 20 */	blr 

.global PFDRV_IsUnmountRequested
PFDRV_IsUnmountRequested:
/* 803D6D8C 003CCB0C  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803D6D90 003CCB10  54 03 DF FE */	rlwinm r3, r0, 0x1b, 0x1f, 0x1f
/* 803D6D94 003CCB14  4E 80 00 20 */	blr 

.global PFDRV_ClearUnmountRequested
PFDRV_ClearUnmountRequested:
/* 803D6D98 003CCB18  A0 03 1F 8C */	lhz r0, 0x1f8c(r3)
/* 803D6D9C 003CCB1C  54 00 06 F2 */	rlwinm r0, r0, 0, 0x1b, 0x19
/* 803D6DA0 003CCB20  B0 03 1F 8C */	sth r0, 0x1f8c(r3)
/* 803D6DA4 003CCB24  4E 80 00 20 */	blr 

.global PFDRV_init
PFDRV_init:
/* 803D6DA8 003CCB28  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803D6DAC 003CCB2C  7C 08 02 A6 */	mflr r0
/* 803D6DB0 003CCB30  3C 80 80 3D */	lis r4, PFDRV_MediaInsert@ha
/* 803D6DB4 003CCB34  3C A0 80 3D */	lis r5, PFDRV_MediaEject@ha
/* 803D6DB8 003CCB38  90 01 00 24 */	stw r0, 0x24(r1)
/* 803D6DBC 003CCB3C  38 84 6D 0C */	addi r4, r4, PFDRV_MediaInsert@l
/* 803D6DC0 003CCB40  38 A5 6C 8C */	addi r5, r5, PFDRV_MediaEject@l
/* 803D6DC4 003CCB44  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803D6DC8 003CCB48  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803D6DCC 003CCB4C  7C 7E 1B 78 */	mr r30, r3
/* 803D6DD0 003CCB50  90 81 00 08 */	stw r4, 8(r1)
/* 803D6DD4 003CCB54  38 81 00 08 */	addi r4, r1, 8
/* 803D6DD8 003CCB58  90 A1 00 0C */	stw r5, 0xc(r1)
/* 803D6DDC 003CCB5C  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D6DE0 003CCB60  48 00 1F F5 */	bl pdm_part_register_callback
/* 803D6DE4 003CCB64  2C 03 00 00 */	cmpwi r3, 0
/* 803D6DE8 003CCB68  41 82 00 0C */	beq lbl_803D6DF4
/* 803D6DEC 003CCB6C  38 60 FF FF */	li r3, -1
/* 803D6DF0 003CCB70  48 00 00 54 */	b lbl_803D6E44
lbl_803D6DF4:
/* 803D6DF4 003CCB74  80 7E 1F BC */	lwz r3, 0x1fbc(r30)
/* 803D6DF8 003CCB78  48 00 1B E1 */	bl pdm_part_init
/* 803D6DFC 003CCB7C  2C 03 00 00 */	cmpwi r3, 0
/* 803D6E00 003CCB80  7C 7F 1B 78 */	mr r31, r3
/* 803D6E04 003CCB84  41 82 00 3C */	beq lbl_803D6E40
/* 803D6E08 003CCB88  80 7E 1F BC */	lwz r3, 0x1fbc(r30)
/* 803D6E0C 003CCB8C  48 00 1F E1 */	bl pdm_part_unregister_callback
/* 803D6E10 003CCB90  2C 1F 00 15 */	cmpwi r31, 0x15
/* 803D6E14 003CCB94  40 82 00 24 */	bne lbl_803D6E38
/* 803D6E18 003CCB98  80 7E 1F BC */	lwz r3, 0x1fbc(r30)
/* 803D6E1C 003CCB9C  48 00 1B 81 */	bl pdm_part_get_driver_error_code
/* 803D6E20 003CCBA0  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D6E24 003CCBA4  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D6E28 003CCBA8  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D6E2C 003CCBAC  90 7E 1F 84 */	stw r3, 0x1f84(r30)
/* 803D6E30 003CCBB0  38 60 10 00 */	li r3, 0x1000
/* 803D6E34 003CCBB4  48 00 00 10 */	b lbl_803D6E44
lbl_803D6E38:
/* 803D6E38 003CCBB8  38 60 FF FF */	li r3, -1
/* 803D6E3C 003CCBBC  48 00 00 08 */	b lbl_803D6E44
lbl_803D6E40:
/* 803D6E40 003CCBC0  38 60 00 00 */	li r3, 0
lbl_803D6E44:
/* 803D6E44 003CCBC4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803D6E48 003CCBC8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803D6E4C 003CCBCC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803D6E50 003CCBD0  7C 08 03 A6 */	mtlr r0
/* 803D6E54 003CCBD4  38 21 00 20 */	addi r1, r1, 0x20
/* 803D6E58 003CCBD8  4E 80 00 20 */	blr 

.global PFDRV_mount
PFDRV_mount:
/* 803D6E5C 003CCBDC  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 803D6E60 003CCBE0  7C 08 02 A6 */	mflr r0
/* 803D6E64 003CCBE4  90 01 00 34 */	stw r0, 0x34(r1)
/* 803D6E68 003CCBE8  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 803D6E6C 003CCBEC  7C 7F 1B 78 */	mr r31, r3
/* 803D6E70 003CCBF0  93 C1 00 28 */	stw r30, 0x28(r1)
/* 803D6E74 003CCBF4  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D6E78 003CCBF8  48 00 1B D9 */	bl pdm_part_mount
/* 803D6E7C 003CCBFC  2C 03 00 00 */	cmpwi r3, 0
/* 803D6E80 003CCC00  41 82 00 34 */	beq lbl_803D6EB4
/* 803D6E84 003CCC04  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D6E88 003CCC08  40 82 00 24 */	bne lbl_803D6EAC
/* 803D6E8C 003CCC0C  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6E90 003CCC10  48 00 1B 0D */	bl pdm_part_get_driver_error_code
/* 803D6E94 003CCC14  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D6E98 003CCC18  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D6E9C 003CCC1C  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D6EA0 003CCC20  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D6EA4 003CCC24  38 60 10 00 */	li r3, 0x1000
/* 803D6EA8 003CCC28  48 00 02 30 */	b lbl_803D70D8
lbl_803D6EAC:
/* 803D6EAC 003CCC2C  38 60 FF FF */	li r3, -1
/* 803D6EB0 003CCC30  48 00 02 28 */	b lbl_803D70D8
lbl_803D6EB4:
/* 803D6EB4 003CCC34  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6EB8 003CCC38  38 81 00 14 */	addi r4, r1, 0x14
/* 803D6EBC 003CCC3C  48 00 1A E9 */	bl pdm_part_get_media_attribute
/* 803D6EC0 003CCC40  2C 03 00 00 */	cmpwi r3, 0
/* 803D6EC4 003CCC44  41 82 00 18 */	beq lbl_803D6EDC
/* 803D6EC8 003CCC48  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6ECC 003CCC4C  38 80 00 00 */	li r4, 0
/* 803D6ED0 003CCC50  48 00 1E 5D */	bl pdm_part_unmount
/* 803D6ED4 003CCC54  38 60 FF FF */	li r3, -1
/* 803D6ED8 003CCC58  48 00 02 00 */	b lbl_803D70D8
lbl_803D6EDC:
/* 803D6EDC 003CCC5C  80 01 00 20 */	lwz r0, 0x20(r1)
/* 803D6EE0 003CCC60  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 803D6EE4 003CCC64  41 82 00 14 */	beq lbl_803D6EF8
/* 803D6EE8 003CCC68  A0 1F 1F 8C */	lhz r0, 0x1f8c(r31)
/* 803D6EEC 003CCC6C  60 00 00 02 */	ori r0, r0, 2
/* 803D6EF0 003CCC70  B0 1F 1F 8C */	sth r0, 0x1f8c(r31)
/* 803D6EF4 003CCC74  48 00 00 10 */	b lbl_803D6F04
lbl_803D6EF8:
/* 803D6EF8 003CCC78  A0 1F 1F 8C */	lhz r0, 0x1f8c(r31)
/* 803D6EFC 003CCC7C  54 00 07 FA */	rlwinm r0, r0, 0, 0x1f, 0x1d
/* 803D6F00 003CCC80  B0 1F 1F 8C */	sth r0, 0x1f8c(r31)
lbl_803D6F04:
/* 803D6F04 003CCC84  80 01 00 20 */	lwz r0, 0x20(r1)
/* 803D6F08 003CCC88  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 803D6F0C 003CCC8C  41 82 00 18 */	beq lbl_803D6F24
/* 803D6F10 003CCC90  A0 1F 1F 8C */	lhz r0, 0x1f8c(r31)
/* 803D6F14 003CCC94  80 61 00 24 */	lwz r3, 0x24(r1)
/* 803D6F18 003CCC98  60 00 00 40 */	ori r0, r0, 0x40
/* 803D6F1C 003CCC9C  B0 1F 1F 8C */	sth r0, 0x1f8c(r31)
/* 803D6F20 003CCCA0  90 7F 1F C4 */	stw r3, 0x1fc4(r31)
lbl_803D6F24:
/* 803D6F24 003CCCA4  80 01 00 20 */	lwz r0, 0x20(r1)
/* 803D6F28 003CCCA8  54 00 07 39 */	rlwinm. r0, r0, 0, 0x1c, 0x1c
/* 803D6F2C 003CCCAC  41 82 00 10 */	beq lbl_803D6F3C
/* 803D6F30 003CCCB0  A0 1F 1F 8C */	lhz r0, 0x1f8c(r31)
/* 803D6F34 003CCCB4  60 00 00 80 */	ori r0, r0, 0x80
/* 803D6F38 003CCCB8  B0 1F 1F 8C */	sth r0, 0x1f8c(r31)
lbl_803D6F3C:
/* 803D6F3C 003CCCBC  7F E3 FB 78 */	mr r3, r31
/* 803D6F40 003CCCC0  38 A1 00 0C */	addi r5, r1, 0xc
/* 803D6F44 003CCCC4  38 C1 00 10 */	addi r6, r1, 0x10
/* 803D6F48 003CCCC8  38 80 FF FF */	li r4, -1
/* 803D6F4C 003CCCCC  48 00 35 09 */	bl PFCACHE_AllocateDataPage
/* 803D6F50 003CCCD0  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D6F54 003CCCD4  39 01 00 08 */	addi r8, r1, 8
/* 803D6F58 003CCCD8  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6F5C 003CCCDC  38 A0 00 00 */	li r5, 0
/* 803D6F60 003CCCE0  80 84 00 04 */	lwz r4, 4(r4)
/* 803D6F64 003CCCE4  38 C0 00 01 */	li r6, 1
/* 803D6F68 003CCCE8  38 E0 02 00 */	li r7, 0x200
/* 803D6F6C 003CCCEC  48 00 1B F9 */	bl pdm_part_logical_read
/* 803D6F70 003CCCF0  2C 03 00 00 */	cmpwi r3, 0
/* 803D6F74 003CCCF4  41 82 00 50 */	beq lbl_803D6FC4
/* 803D6F78 003CCCF8  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D6F7C 003CCCFC  40 82 00 24 */	bne lbl_803D6FA0
/* 803D6F80 003CCD00  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6F84 003CCD04  48 00 1A 19 */	bl pdm_part_get_driver_error_code
/* 803D6F88 003CCD08  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D6F8C 003CCD0C  3B C0 10 00 */	li r30, 0x1000
/* 803D6F90 003CCD10  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D6F94 003CCD14  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D6F98 003CCD18  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D6F9C 003CCD1C  48 00 00 08 */	b lbl_803D6FA4
lbl_803D6FA0:
/* 803D6FA0 003CCD20  3B C0 FF FF */	li r30, -1
lbl_803D6FA4:
/* 803D6FA4 003CCD24  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D6FA8 003CCD28  7F E3 FB 78 */	mr r3, r31
/* 803D6FAC 003CCD2C  48 00 35 B1 */	bl PFCACHE_FreeDataPage
/* 803D6FB0 003CCD30  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6FB4 003CCD34  38 80 00 00 */	li r4, 0
/* 803D6FB8 003CCD38  48 00 1D 75 */	bl pdm_part_unmount
/* 803D6FBC 003CCD3C  7F C3 F3 78 */	mr r3, r30
/* 803D6FC0 003CCD40  48 00 01 18 */	b lbl_803D70D8
lbl_803D6FC4:
/* 803D6FC4 003CCD44  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D6FC8 003CCD48  7F E3 FB 78 */	mr r3, r31
/* 803D6FCC 003CCD4C  80 84 00 04 */	lwz r4, 4(r4)
/* 803D6FD0 003CCD50  48 00 04 49 */	bl pdm_bpb_InitVolumeWithBootSector
/* 803D6FD4 003CCD54  2C 03 00 00 */	cmpwi r3, 0
/* 803D6FD8 003CCD58  41 82 00 24 */	beq lbl_803D6FFC
/* 803D6FDC 003CCD5C  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D6FE0 003CCD60  7F E3 FB 78 */	mr r3, r31
/* 803D6FE4 003CCD64  48 00 35 79 */	bl PFCACHE_FreeDataPage
/* 803D6FE8 003CCD68  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D6FEC 003CCD6C  38 80 00 00 */	li r4, 0
/* 803D6FF0 003CCD70  48 00 1D 3D */	bl pdm_part_unmount
/* 803D6FF4 003CCD74  38 60 00 07 */	li r3, 7
/* 803D6FF8 003CCD78  48 00 00 E0 */	b lbl_803D70D8
lbl_803D6FFC:
/* 803D6FFC 003CCD7C  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 803D7000 003CCD80  38 60 FF FF */	li r3, -1
/* 803D7004 003CCD84  90 7F 00 38 */	stw r3, 0x38(r31)
/* 803D7008 003CCD88  2C 00 00 02 */	cmpwi r0, 2
/* 803D700C 003CCD8C  90 7F 00 3C */	stw r3, 0x3c(r31)
/* 803D7010 003CCD90  40 82 00 B8 */	bne lbl_803D70C8
/* 803D7014 003CCD94  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D7018 003CCD98  39 01 00 08 */	addi r8, r1, 8
/* 803D701C 003CCD9C  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D7020 003CCDA0  38 C0 00 01 */	li r6, 1
/* 803D7024 003CCDA4  80 84 00 04 */	lwz r4, 4(r4)
/* 803D7028 003CCDA8  38 E0 02 00 */	li r7, 0x200
/* 803D702C 003CCDAC  A0 BF 00 14 */	lhz r5, 0x14(r31)
/* 803D7030 003CCDB0  48 00 1B 35 */	bl pdm_part_logical_read
/* 803D7034 003CCDB4  2C 03 00 00 */	cmpwi r3, 0
/* 803D7038 003CCDB8  41 82 00 50 */	beq lbl_803D7088
/* 803D703C 003CCDBC  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D7040 003CCDC0  40 82 00 24 */	bne lbl_803D7064
/* 803D7044 003CCDC4  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D7048 003CCDC8  48 00 19 55 */	bl pdm_part_get_driver_error_code
/* 803D704C 003CCDCC  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D7050 003CCDD0  3B C0 10 00 */	li r30, 0x1000
/* 803D7054 003CCDD4  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D7058 003CCDD8  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D705C 003CCDDC  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D7060 003CCDE0  48 00 00 08 */	b lbl_803D7068
lbl_803D7064:
/* 803D7064 003CCDE4  3B C0 FF FF */	li r30, -1
lbl_803D7068:
/* 803D7068 003CCDE8  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D706C 003CCDEC  7F E3 FB 78 */	mr r3, r31
/* 803D7070 003CCDF0  48 00 34 ED */	bl PFCACHE_FreeDataPage
/* 803D7074 003CCDF4  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D7078 003CCDF8  38 80 00 00 */	li r4, 0
/* 803D707C 003CCDFC  48 00 1C B1 */	bl pdm_part_unmount
/* 803D7080 003CCE00  7F C3 F3 78 */	mr r3, r30
/* 803D7084 003CCE04  48 00 00 54 */	b lbl_803D70D8
lbl_803D7088:
/* 803D7088 003CCE08  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D708C 003CCE0C  7F E3 FB 78 */	mr r3, r31
/* 803D7090 003CCE10  38 BF 00 38 */	addi r5, r31, 0x38
/* 803D7094 003CCE14  38 DF 00 3C */	addi r6, r31, 0x3c
/* 803D7098 003CCE18  80 84 00 04 */	lwz r4, 4(r4)
/* 803D709C 003CCE1C  48 00 06 99 */	bl pdm_bpb_InitVolumeWithFSINFOSector
/* 803D70A0 003CCE20  2C 03 00 00 */	cmpwi r3, 0
/* 803D70A4 003CCE24  41 82 00 24 */	beq lbl_803D70C8
/* 803D70A8 003CCE28  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D70AC 003CCE2C  7F E3 FB 78 */	mr r3, r31
/* 803D70B0 003CCE30  48 00 34 AD */	bl PFCACHE_FreeDataPage
/* 803D70B4 003CCE34  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D70B8 003CCE38  38 80 00 00 */	li r4, 0
/* 803D70BC 003CCE3C  48 00 1C 71 */	bl pdm_part_unmount
/* 803D70C0 003CCE40  38 60 FF FF */	li r3, -1
/* 803D70C4 003CCE44  48 00 00 14 */	b lbl_803D70D8
lbl_803D70C8:
/* 803D70C8 003CCE48  80 81 00 0C */	lwz r4, 0xc(r1)
/* 803D70CC 003CCE4C  7F E3 FB 78 */	mr r3, r31
/* 803D70D0 003CCE50  48 00 34 8D */	bl PFCACHE_FreeDataPage
/* 803D70D4 003CCE54  38 60 00 00 */	li r3, 0
lbl_803D70D8:
/* 803D70D8 003CCE58  80 01 00 34 */	lwz r0, 0x34(r1)
/* 803D70DC 003CCE5C  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 803D70E0 003CCE60  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 803D70E4 003CCE64  7C 08 03 A6 */	mtlr r0
/* 803D70E8 003CCE68  38 21 00 30 */	addi r1, r1, 0x30
/* 803D70EC 003CCE6C  4E 80 00 20 */	blr 

.global PFDRV_unmount
PFDRV_unmount:
/* 803D70F0 003CCE70  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803D70F4 003CCE74  7C 08 02 A6 */	mflr r0
/* 803D70F8 003CCE78  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D70FC 003CCE7C  38 04 FF FF */	addi r0, r4, -1
/* 803D7100 003CCE80  7C 00 00 34 */	cntlzw r0, r0
/* 803D7104 003CCE84  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D7108 003CCE88  7C 7F 1B 78 */	mr r31, r3
/* 803D710C 003CCE8C  54 04 D9 7E */	srwi r4, r0, 5
/* 803D7110 003CCE90  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D7114 003CCE94  48 00 1C 19 */	bl pdm_part_unmount
/* 803D7118 003CCE98  2C 03 00 00 */	cmpwi r3, 0
/* 803D711C 003CCE9C  41 82 00 34 */	beq lbl_803D7150
/* 803D7120 003CCEA0  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D7124 003CCEA4  40 82 00 24 */	bne lbl_803D7148
/* 803D7128 003CCEA8  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D712C 003CCEAC  48 00 18 71 */	bl pdm_part_get_driver_error_code
/* 803D7130 003CCEB0  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D7134 003CCEB4  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D7138 003CCEB8  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D713C 003CCEBC  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D7140 003CCEC0  38 60 10 00 */	li r3, 0x1000
/* 803D7144 003CCEC4  48 00 00 10 */	b lbl_803D7154
lbl_803D7148:
/* 803D7148 003CCEC8  38 60 FF FF */	li r3, -1
/* 803D714C 003CCECC  48 00 00 08 */	b lbl_803D7154
lbl_803D7150:
/* 803D7150 003CCED0  38 60 00 00 */	li r3, 0
lbl_803D7154:
/* 803D7154 003CCED4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D7158 003CCED8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803D715C 003CCEDC  7C 08 03 A6 */	mtlr r0
/* 803D7160 003CCEE0  38 21 00 10 */	addi r1, r1, 0x10
/* 803D7164 003CCEE4  4E 80 00 20 */	blr 

.global PFDRV_format
PFDRV_format:
/* 803D7168 003CCEE8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803D716C 003CCEEC  7C 08 02 A6 */	mflr r0
/* 803D7170 003CCEF0  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D7174 003CCEF4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D7178 003CCEF8  7C 7F 1B 78 */	mr r31, r3
/* 803D717C 003CCEFC  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D7180 003CCF00  48 00 19 7D */	bl pdm_part_format
/* 803D7184 003CCF04  2C 03 00 00 */	cmpwi r3, 0
/* 803D7188 003CCF08  41 82 00 34 */	beq lbl_803D71BC
/* 803D718C 003CCF0C  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D7190 003CCF10  40 82 00 24 */	bne lbl_803D71B4
/* 803D7194 003CCF14  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D7198 003CCF18  48 00 18 05 */	bl pdm_part_get_driver_error_code
/* 803D719C 003CCF1C  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D71A0 003CCF20  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D71A4 003CCF24  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D71A8 003CCF28  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D71AC 003CCF2C  38 60 10 00 */	li r3, 0x1000
/* 803D71B0 003CCF30  48 00 00 10 */	b lbl_803D71C0
lbl_803D71B4:
/* 803D71B4 003CCF34  38 60 FF FF */	li r3, -1
/* 803D71B8 003CCF38  48 00 00 08 */	b lbl_803D71C0
lbl_803D71BC:
/* 803D71BC 003CCF3C  38 60 00 00 */	li r3, 0
lbl_803D71C0:
/* 803D71C0 003CCF40  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D71C4 003CCF44  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803D71C8 003CCF48  7C 08 03 A6 */	mtlr r0
/* 803D71CC 003CCF4C  38 21 00 10 */	addi r1, r1, 0x10
/* 803D71D0 003CCF50  4E 80 00 20 */	blr 

.global PFDRV_lread
PFDRV_lread:
/* 803D71D4 003CCF54  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803D71D8 003CCF58  7C 08 02 A6 */	mflr r0
/* 803D71DC 003CCF5C  7C E8 3B 78 */	mr r8, r7
/* 803D71E0 003CCF60  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D71E4 003CCF64  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D71E8 003CCF68  7C 7F 1B 78 */	mr r31, r3
/* 803D71EC 003CCF6C  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D71F0 003CCF70  A0 FF 00 00 */	lhz r7, 0(r31)
/* 803D71F4 003CCF74  48 00 19 71 */	bl pdm_part_logical_read
/* 803D71F8 003CCF78  2C 03 00 00 */	cmpwi r3, 0
/* 803D71FC 003CCF7C  41 82 00 34 */	beq lbl_803D7230
/* 803D7200 003CCF80  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D7204 003CCF84  40 82 00 24 */	bne lbl_803D7228
/* 803D7208 003CCF88  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D720C 003CCF8C  48 00 17 91 */	bl pdm_part_get_driver_error_code
/* 803D7210 003CCF90  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D7214 003CCF94  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D7218 003CCF98  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D721C 003CCF9C  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D7220 003CCFA0  38 60 10 00 */	li r3, 0x1000
/* 803D7224 003CCFA4  48 00 00 10 */	b lbl_803D7234
lbl_803D7228:
/* 803D7228 003CCFA8  38 60 FF FF */	li r3, -1
/* 803D722C 003CCFAC  48 00 00 08 */	b lbl_803D7234
lbl_803D7230:
/* 803D7230 003CCFB0  38 60 00 00 */	li r3, 0
lbl_803D7234:
/* 803D7234 003CCFB4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D7238 003CCFB8  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803D723C 003CCFBC  7C 08 03 A6 */	mtlr r0
/* 803D7240 003CCFC0  38 21 00 10 */	addi r1, r1, 0x10
/* 803D7244 003CCFC4  4E 80 00 20 */	blr 

.global PFDRV_lwrite
PFDRV_lwrite:
/* 803D7248 003CCFC8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803D724C 003CCFCC  7C 08 02 A6 */	mflr r0
/* 803D7250 003CCFD0  7C E8 3B 78 */	mr r8, r7
/* 803D7254 003CCFD4  90 01 00 14 */	stw r0, 0x14(r1)
/* 803D7258 003CCFD8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803D725C 003CCFDC  7C 7F 1B 78 */	mr r31, r3
/* 803D7260 003CCFE0  80 63 1F BC */	lwz r3, 0x1fbc(r3)
/* 803D7264 003CCFE4  A0 FF 00 00 */	lhz r7, 0(r31)
/* 803D7268 003CCFE8  48 00 19 E1 */	bl pdm_part_logical_write
/* 803D726C 003CCFEC  2C 03 00 00 */	cmpwi r3, 0
/* 803D7270 003CCFF0  41 82 00 34 */	beq lbl_803D72A4
/* 803D7274 003CCFF4  2C 03 00 15 */	cmpwi r3, 0x15
/* 803D7278 003CCFF8  40 82 00 24 */	bne lbl_803D729C
/* 803D727C 003CCFFC  80 7F 1F BC */	lwz r3, 0x1fbc(r31)
/* 803D7280 003CD000  48 00 17 1D */	bl pdm_part_get_driver_error_code
/* 803D7284 003CD004  3C 80 80 56 */	lis r4, lbl_805644C0@ha
/* 803D7288 003CD008  38 84 44 C0 */	addi r4, r4, lbl_805644C0@l
/* 803D728C 003CD00C  90 64 00 44 */	stw r3, 0x44(r4)
/* 803D7290 003CD010  90 7F 1F 84 */	stw r3, 0x1f84(r31)
/* 803D7294 003CD014  38 60 10 00 */	li r3, 0x1000
/* 803D7298 003CD018  48 00 00 10 */	b lbl_803D72A8
lbl_803D729C:
/* 803D729C 003CD01C  38 60 FF FF */	li r3, -1
/* 803D72A0 003CD020  48 00 00 08 */	b lbl_803D72A8
lbl_803D72A4:
/* 803D72A4 003CD024  38 60 00 00 */	li r3, 0
lbl_803D72A8:
/* 803D72A8 003CD028  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803D72AC 003CD02C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803D72B0 003CD030  7C 08 03 A6 */	mtlr r0
/* 803D72B4 003CD034  38 21 00 10 */	addi r1, r1, 0x10
/* 803D72B8 003CD038  4E 80 00 20 */	blr 

