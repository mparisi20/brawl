.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global OSInitMessageQueue
OSInitMessageQueue:
/* 801DE094 001D3E14  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801DE098 001D3E18  7C 08 02 A6 */	mflr r0
/* 801DE09C 001D3E1C  90 01 00 24 */	stw r0, 0x24(r1)
/* 801DE0A0 001D3E20  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801DE0A4 001D3E24  7C BF 2B 78 */	mr r31, r5
/* 801DE0A8 001D3E28  93 C1 00 18 */	stw r30, 0x18(r1)
/* 801DE0AC 001D3E2C  7C 9E 23 78 */	mr r30, r4
/* 801DE0B0 001D3E30  93 A1 00 14 */	stw r29, 0x14(r1)
/* 801DE0B4 001D3E34  7C 7D 1B 78 */	mr r29, r3
/* 801DE0B8 001D3E38  48 00 26 4D */	bl OSInitThreadQueue
/* 801DE0BC 001D3E3C  38 7D 00 08 */	addi r3, r29, 8
/* 801DE0C0 001D3E40  48 00 26 45 */	bl OSInitThreadQueue
/* 801DE0C4 001D3E44  38 00 00 00 */	li r0, 0
/* 801DE0C8 001D3E48  93 DD 00 10 */	stw r30, 0x10(r29)
/* 801DE0CC 001D3E4C  93 FD 00 14 */	stw r31, 0x14(r29)
/* 801DE0D0 001D3E50  90 1D 00 18 */	stw r0, 0x18(r29)
/* 801DE0D4 001D3E54  90 1D 00 1C */	stw r0, 0x1c(r29)
/* 801DE0D8 001D3E58  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801DE0DC 001D3E5C  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801DE0E0 001D3E60  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 801DE0E4 001D3E64  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801DE0E8 001D3E68  7C 08 03 A6 */	mtlr r0
/* 801DE0EC 001D3E6C  38 21 00 20 */	addi r1, r1, 0x20
/* 801DE0F0 001D3E70  4E 80 00 20 */	blr 

.global OSSendMessage
OSSendMessage:
/* 801DE0F4 001D3E74  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801DE0F8 001D3E78  7C 08 02 A6 */	mflr r0
/* 801DE0FC 001D3E7C  90 01 00 24 */	stw r0, 0x24(r1)
/* 801DE100 001D3E80  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801DE104 001D3E84  7C BF 2B 78 */	mr r31, r5
/* 801DE108 001D3E88  93 C1 00 18 */	stw r30, 0x18(r1)
/* 801DE10C 001D3E8C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 801DE110 001D3E90  7C 9D 23 78 */	mr r29, r4
/* 801DE114 001D3E94  93 81 00 10 */	stw r28, 0x10(r1)
/* 801DE118 001D3E98  7C 7C 1B 78 */	mr r28, r3
/* 801DE11C 001D3E9C  4B FF ED F5 */	bl OSDisableInterrupts
/* 801DE120 001D3EA0  7C 7E 1B 78 */	mr r30, r3
/* 801DE124 001D3EA4  57 FF 07 FE */	clrlwi r31, r31, 0x1f
/* 801DE128 001D3EA8  48 00 00 24 */	b lbl_801DE14C
lbl_801DE12C:
/* 801DE12C 001D3EAC  2C 1F 00 00 */	cmpwi r31, 0
/* 801DE130 001D3EB0  40 82 00 14 */	bne lbl_801DE144
/* 801DE134 001D3EB4  7F C3 F3 78 */	mr r3, r30
/* 801DE138 001D3EB8  4B FF EE 01 */	bl OSRestoreInterrupts
/* 801DE13C 001D3EBC  38 60 00 00 */	li r3, 0
/* 801DE140 001D3EC0  48 00 00 5C */	b lbl_801DE19C
lbl_801DE144:
/* 801DE144 001D3EC4  7F 83 E3 78 */	mr r3, r28
/* 801DE148 001D3EC8  48 00 36 49 */	bl OSSleepThread
lbl_801DE14C:
/* 801DE14C 001D3ECC  80 9C 00 1C */	lwz r4, 0x1c(r28)
/* 801DE150 001D3ED0  80 DC 00 14 */	lwz r6, 0x14(r28)
/* 801DE154 001D3ED4  7C 06 20 00 */	cmpw r6, r4
/* 801DE158 001D3ED8  40 81 FF D4 */	ble lbl_801DE12C
/* 801DE15C 001D3EDC  80 1C 00 18 */	lwz r0, 0x18(r28)
/* 801DE160 001D3EE0  38 7C 00 08 */	addi r3, r28, 8
/* 801DE164 001D3EE4  80 BC 00 10 */	lwz r5, 0x10(r28)
/* 801DE168 001D3EE8  7C 80 22 14 */	add r4, r0, r4
/* 801DE16C 001D3EEC  7C 04 33 D6 */	divw r0, r4, r6
/* 801DE170 001D3EF0  7C 00 31 D6 */	mullw r0, r0, r6
/* 801DE174 001D3EF4  7C 00 20 50 */	subf r0, r0, r4
/* 801DE178 001D3EF8  54 00 10 3A */	slwi r0, r0, 2
/* 801DE17C 001D3EFC  7F A5 01 2E */	stwx r29, r5, r0
/* 801DE180 001D3F00  80 9C 00 1C */	lwz r4, 0x1c(r28)
/* 801DE184 001D3F04  38 04 00 01 */	addi r0, r4, 1
/* 801DE188 001D3F08  90 1C 00 1C */	stw r0, 0x1c(r28)
/* 801DE18C 001D3F0C  48 00 36 F1 */	bl OSWakeupThread
/* 801DE190 001D3F10  7F C3 F3 78 */	mr r3, r30
/* 801DE194 001D3F14  4B FF ED A5 */	bl OSRestoreInterrupts
/* 801DE198 001D3F18  38 60 00 01 */	li r3, 1
lbl_801DE19C:
/* 801DE19C 001D3F1C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801DE1A0 001D3F20  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801DE1A4 001D3F24  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801DE1A8 001D3F28  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 801DE1AC 001D3F2C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 801DE1B0 001D3F30  7C 08 03 A6 */	mtlr r0
/* 801DE1B4 001D3F34  38 21 00 20 */	addi r1, r1, 0x20
/* 801DE1B8 001D3F38  4E 80 00 20 */	blr 

.global OSReceiveMessage
OSReceiveMessage:
/* 801DE1BC 001D3F3C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801DE1C0 001D3F40  7C 08 02 A6 */	mflr r0
/* 801DE1C4 001D3F44  90 01 00 24 */	stw r0, 0x24(r1)
/* 801DE1C8 001D3F48  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801DE1CC 001D3F4C  7C 7F 1B 78 */	mr r31, r3
/* 801DE1D0 001D3F50  93 C1 00 18 */	stw r30, 0x18(r1)
/* 801DE1D4 001D3F54  7C BE 2B 78 */	mr r30, r5
/* 801DE1D8 001D3F58  93 A1 00 14 */	stw r29, 0x14(r1)
/* 801DE1DC 001D3F5C  93 81 00 10 */	stw r28, 0x10(r1)
/* 801DE1E0 001D3F60  7C 9C 23 78 */	mr r28, r4
/* 801DE1E4 001D3F64  4B FF ED 2D */	bl OSDisableInterrupts
/* 801DE1E8 001D3F68  7C 7D 1B 78 */	mr r29, r3
/* 801DE1EC 001D3F6C  57 DE 07 FE */	clrlwi r30, r30, 0x1f
/* 801DE1F0 001D3F70  48 00 00 24 */	b lbl_801DE214
lbl_801DE1F4:
/* 801DE1F4 001D3F74  2C 1E 00 00 */	cmpwi r30, 0
/* 801DE1F8 001D3F78  40 82 00 14 */	bne lbl_801DE20C
/* 801DE1FC 001D3F7C  7F A3 EB 78 */	mr r3, r29
/* 801DE200 001D3F80  4B FF ED 39 */	bl OSRestoreInterrupts
/* 801DE204 001D3F84  38 60 00 00 */	li r3, 0
/* 801DE208 001D3F88  48 00 00 70 */	b lbl_801DE278
lbl_801DE20C:
/* 801DE20C 001D3F8C  38 7F 00 08 */	addi r3, r31, 8
/* 801DE210 001D3F90  48 00 35 81 */	bl OSSleepThread
lbl_801DE214:
/* 801DE214 001D3F94  80 1F 00 1C */	lwz r0, 0x1c(r31)
/* 801DE218 001D3F98  2C 00 00 00 */	cmpwi r0, 0
/* 801DE21C 001D3F9C  41 82 FF D8 */	beq lbl_801DE1F4
/* 801DE220 001D3FA0  2C 1C 00 00 */	cmpwi r28, 0
/* 801DE224 001D3FA4  41 82 00 18 */	beq lbl_801DE23C
/* 801DE228 001D3FA8  80 1F 00 18 */	lwz r0, 0x18(r31)
/* 801DE22C 001D3FAC  80 7F 00 10 */	lwz r3, 0x10(r31)
/* 801DE230 001D3FB0  54 00 10 3A */	slwi r0, r0, 2
/* 801DE234 001D3FB4  7C 03 00 2E */	lwzx r0, r3, r0
/* 801DE238 001D3FB8  90 1C 00 00 */	stw r0, 0(r28)
lbl_801DE23C:
/* 801DE23C 001D3FBC  80 9F 00 18 */	lwz r4, 0x18(r31)
/* 801DE240 001D3FC0  7F E3 FB 78 */	mr r3, r31
/* 801DE244 001D3FC4  80 DF 00 14 */	lwz r6, 0x14(r31)
/* 801DE248 001D3FC8  38 E4 00 01 */	addi r7, r4, 1
/* 801DE24C 001D3FCC  80 9F 00 1C */	lwz r4, 0x1c(r31)
/* 801DE250 001D3FD0  7C A7 33 D6 */	divw r5, r7, r6
/* 801DE254 001D3FD4  38 04 FF FF */	addi r0, r4, -1
/* 801DE258 001D3FD8  90 1F 00 1C */	stw r0, 0x1c(r31)
/* 801DE25C 001D3FDC  7C 05 31 D6 */	mullw r0, r5, r6
/* 801DE260 001D3FE0  7C 00 38 50 */	subf r0, r0, r7
/* 801DE264 001D3FE4  90 1F 00 18 */	stw r0, 0x18(r31)
/* 801DE268 001D3FE8  48 00 36 15 */	bl OSWakeupThread
/* 801DE26C 001D3FEC  7F A3 EB 78 */	mr r3, r29
/* 801DE270 001D3FF0  4B FF EC C9 */	bl OSRestoreInterrupts
/* 801DE274 001D3FF4  38 60 00 01 */	li r3, 1
lbl_801DE278:
/* 801DE278 001D3FF8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801DE27C 001D3FFC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801DE280 001D4000  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801DE284 001D4004  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 801DE288 001D4008  83 81 00 10 */	lwz r28, 0x10(r1)
/* 801DE28C 001D400C  7C 08 03 A6 */	mtlr r0
/* 801DE290 001D4010  38 21 00 20 */	addi r1, r1, 0x20
/* 801DE294 001D4014  4E 80 00 20 */	blr 

.global OSJamMessage
OSJamMessage:
/* 801DE298 001D4018  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801DE29C 001D401C  7C 08 02 A6 */	mflr r0
/* 801DE2A0 001D4020  90 01 00 24 */	stw r0, 0x24(r1)
/* 801DE2A4 001D4024  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801DE2A8 001D4028  7C BF 2B 78 */	mr r31, r5
/* 801DE2AC 001D402C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 801DE2B0 001D4030  93 A1 00 14 */	stw r29, 0x14(r1)
/* 801DE2B4 001D4034  7C 9D 23 78 */	mr r29, r4
/* 801DE2B8 001D4038  93 81 00 10 */	stw r28, 0x10(r1)
/* 801DE2BC 001D403C  7C 7C 1B 78 */	mr r28, r3
/* 801DE2C0 001D4040  4B FF EC 51 */	bl OSDisableInterrupts
/* 801DE2C4 001D4044  7C 7E 1B 78 */	mr r30, r3
/* 801DE2C8 001D4048  57 FF 07 FE */	clrlwi r31, r31, 0x1f
/* 801DE2CC 001D404C  48 00 00 24 */	b lbl_801DE2F0
lbl_801DE2D0:
/* 801DE2D0 001D4050  2C 1F 00 00 */	cmpwi r31, 0
/* 801DE2D4 001D4054  40 82 00 14 */	bne lbl_801DE2E8
/* 801DE2D8 001D4058  7F C3 F3 78 */	mr r3, r30
/* 801DE2DC 001D405C  4B FF EC 5D */	bl OSRestoreInterrupts
/* 801DE2E0 001D4060  38 60 00 00 */	li r3, 0
/* 801DE2E4 001D4064  48 00 00 64 */	b lbl_801DE348
lbl_801DE2E8:
/* 801DE2E8 001D4068  7F 83 E3 78 */	mr r3, r28
/* 801DE2EC 001D406C  48 00 34 A5 */	bl OSSleepThread
lbl_801DE2F0:
/* 801DE2F0 001D4070  80 DC 00 14 */	lwz r6, 0x14(r28)
/* 801DE2F4 001D4074  80 1C 00 1C */	lwz r0, 0x1c(r28)
/* 801DE2F8 001D4078  7C 06 00 00 */	cmpw r6, r0
/* 801DE2FC 001D407C  40 81 FF D4 */	ble lbl_801DE2D0
/* 801DE300 001D4080  80 1C 00 18 */	lwz r0, 0x18(r28)
/* 801DE304 001D4084  38 7C 00 08 */	addi r3, r28, 8
/* 801DE308 001D4088  80 9C 00 10 */	lwz r4, 0x10(r28)
/* 801DE30C 001D408C  7C A6 02 14 */	add r5, r6, r0
/* 801DE310 001D4090  38 A5 FF FF */	addi r5, r5, -1
/* 801DE314 001D4094  7C 05 33 D6 */	divw r0, r5, r6
/* 801DE318 001D4098  7C 00 31 D6 */	mullw r0, r0, r6
/* 801DE31C 001D409C  7C 00 28 50 */	subf r0, r0, r5
/* 801DE320 001D40A0  90 1C 00 18 */	stw r0, 0x18(r28)
/* 801DE324 001D40A4  54 00 10 3A */	slwi r0, r0, 2
/* 801DE328 001D40A8  7F A4 01 2E */	stwx r29, r4, r0
/* 801DE32C 001D40AC  80 9C 00 1C */	lwz r4, 0x1c(r28)
/* 801DE330 001D40B0  38 04 00 01 */	addi r0, r4, 1
/* 801DE334 001D40B4  90 1C 00 1C */	stw r0, 0x1c(r28)
/* 801DE338 001D40B8  48 00 35 45 */	bl OSWakeupThread
/* 801DE33C 001D40BC  7F C3 F3 78 */	mr r3, r30
/* 801DE340 001D40C0  4B FF EB F9 */	bl OSRestoreInterrupts
/* 801DE344 001D40C4  38 60 00 01 */	li r3, 1
lbl_801DE348:
/* 801DE348 001D40C8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 801DE34C 001D40CC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 801DE350 001D40D0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 801DE354 001D40D4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 801DE358 001D40D8  83 81 00 10 */	lwz r28, 0x10(r1)
/* 801DE35C 001D40DC  7C 08 03 A6 */	mtlr r0
/* 801DE360 001D40E0  38 21 00 20 */	addi r1, r1, 0x20
/* 801DE364 001D40E4  4E 80 00 20 */	blr 

