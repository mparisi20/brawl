.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global findChar
findChar:
/* 8029F098 00294E18  7C 80 07 74 */	extsb r0, r4
/* 8029F09C 00294E1C  48 00 00 18 */	b lbl_8029F0B4
lbl_8029F0A0:
/* 8029F0A0 00294E20  7C A4 07 75 */	extsb. r4, r5
/* 8029F0A4 00294E24  40 82 00 0C */	bne lbl_8029F0B0
/* 8029F0A8 00294E28  38 60 00 00 */	li r3, 0
/* 8029F0AC 00294E2C  4E 80 00 20 */	blr 
lbl_8029F0B0:
/* 8029F0B0 00294E30  38 63 00 01 */	addi r3, r3, 1
lbl_8029F0B4:
/* 8029F0B4 00294E34  88 A3 00 00 */	lbz r5, 0(r3)
/* 8029F0B8 00294E38  7C A4 07 74 */	extsb r4, r5
/* 8029F0BC 00294E3C  7C 04 00 00 */	cmpw r4, r0
/* 8029F0C0 00294E40  40 82 FF E0 */	bne lbl_8029F0A0
/* 8029F0C4 00294E44  4E 80 00 20 */	blr 

.global processFlyingColors
processFlyingColors:
/* 8029F0C8 00294E48  94 21 FE B0 */	stwu r1, -0x150(r1)
/* 8029F0CC 00294E4C  7C 08 02 A6 */	mflr r0
/* 8029F0D0 00294E50  90 01 01 54 */	stw r0, 0x154(r1)
/* 8029F0D4 00294E54  BE 21 01 14 */	stmw r17, 0x114(r1)
/* 8029F0D8 00294E58  3F 40 80 41 */	lis r26, lbl_8040F9A0@ha
/* 8029F0DC 00294E5C  83 0D 80 88 */	lwz r24, lbl_8059C4A8-_SDA_BASE_(r13)
/* 8029F0E0 00294E60  3F 80 80 48 */	lis r28, lbl_80486668@ha
/* 8029F0E4 00294E64  3F A0 80 41 */	lis r29, lbl_8040FA10@ha
/* 8029F0E8 00294E68  7C 74 1B 78 */	mr r20, r3
/* 8029F0EC 00294E6C  57 17 0F FE */	srwi r23, r24, 0x1f
/* 8029F0F0 00294E70  3B 5A F9 A0 */	addi r26, r26, lbl_8040F9A0@l
/* 8029F0F4 00294E74  54 7B 10 3A */	slwi r27, r3, 2
/* 8029F0F8 00294E78  3B 9C 66 68 */	addi r28, r28, lbl_80486668@l
/* 8029F0FC 00294E7C  57 19 00 7E */	clrlwi r25, r24, 1
/* 8029F100 00294E80  3B BD FA 10 */	addi r29, r29, lbl_8040FA10@l
/* 8029F104 00294E84  3A A0 00 00 */	li r21, 0
/* 8029F108 00294E88  3B C0 00 00 */	li r30, 0
/* 8029F10C 00294E8C  3F E0 02 0A */	lis r31, 0x20a
lbl_8029F110:
/* 8029F110 00294E90  82 DA 00 00 */	lwz r22, 0(r26)
/* 8029F114 00294E94  38 6D 80 70 */	addi r3, r13, lbl_8059C490-_SDA_BASE_
/* 8029F118 00294E98  38 80 00 2E */	li r4, 0x2e
/* 8029F11C 00294E9C  4B FF FF 7D */	bl findChar
/* 8029F120 00294EA0  2C 03 00 00 */	cmpwi r3, 0
/* 8029F124 00294EA4  7C 72 1B 78 */	mr r18, r3
/* 8029F128 00294EA8  40 82 00 18 */	bne lbl_8029F140
/* 8029F12C 00294EAC  3C 60 80 41 */	lis r3, lbl_8040FA10@ha
/* 8029F130 00294EB0  38 63 FA 10 */	addi r3, r3, lbl_8040FA10@l
/* 8029F134 00294EB4  4B FD DB D1 */	bl hkErrorMessage
/* 8029F138 00294EB8  38 60 00 00 */	li r3, 0
/* 8029F13C 00294EBC  48 00 01 E4 */	b lbl_8029F320
lbl_8029F140:
/* 8029F140 00294EC0  38 9D 00 7B */	addi r4, r29, 0x7b
/* 8029F144 00294EC4  48 15 B6 55 */	bl strstr
/* 8029F148 00294EC8  2C 03 00 00 */	cmpwi r3, 0
/* 8029F14C 00294ECC  41 82 00 A4 */	beq lbl_8029F1F0
/* 8029F150 00294ED0  2C 14 00 00 */	cmpwi r20, 0
/* 8029F154 00294ED4  41 82 00 9C */	beq lbl_8029F1F0
/* 8029F158 00294ED8  9B C1 00 08 */	stb r30, 8(r1)
/* 8029F15C 00294EDC  3A 3D 00 81 */	addi r17, r29, 0x81
/* 8029F160 00294EE0  38 61 00 08 */	addi r3, r1, 8
/* 8029F164 00294EE4  48 15 14 DD */	bl strlen
/* 8029F168 00294EE8  22 63 00 FE */	subfic r19, r3, 0xfe
/* 8029F16C 00294EEC  7E 23 8B 78 */	mr r3, r17
/* 8029F170 00294EF0  48 15 14 D1 */	bl strlen
/* 8029F174 00294EF4  7C 03 98 40 */	cmplw r3, r19
/* 8029F178 00294EF8  40 80 00 10 */	bge lbl_8029F188
/* 8029F17C 00294EFC  7E 23 8B 78 */	mr r3, r17
/* 8029F180 00294F00  48 15 14 C1 */	bl strlen
/* 8029F184 00294F04  48 00 00 10 */	b lbl_8029F194
lbl_8029F188:
/* 8029F188 00294F08  38 61 00 08 */	addi r3, r1, 8
/* 8029F18C 00294F0C  48 15 14 B5 */	bl strlen
/* 8029F190 00294F10  20 63 00 FE */	subfic r3, r3, 0xfe
lbl_8029F194:
/* 8029F194 00294F14  7C 65 1B 78 */	mr r5, r3
/* 8029F198 00294F18  7E 24 8B 78 */	mr r4, r17
/* 8029F19C 00294F1C  38 61 00 08 */	addi r3, r1, 8
/* 8029F1A0 00294F20  48 15 B2 11 */	bl strncat
/* 8029F1A4 00294F24  38 61 00 08 */	addi r3, r1, 8
/* 8029F1A8 00294F28  48 15 14 99 */	bl strlen
/* 8029F1AC 00294F2C  22 63 00 FE */	subfic r19, r3, 0xfe
/* 8029F1B0 00294F30  7E 23 8B 78 */	mr r3, r17
/* 8029F1B4 00294F34  48 15 14 8D */	bl strlen
/* 8029F1B8 00294F38  7C 03 98 40 */	cmplw r3, r19
/* 8029F1BC 00294F3C  40 80 00 10 */	bge lbl_8029F1CC
/* 8029F1C0 00294F40  7E 23 8B 78 */	mr r3, r17
/* 8029F1C4 00294F44  48 15 14 7D */	bl strlen
/* 8029F1C8 00294F48  48 00 00 10 */	b lbl_8029F1D8
lbl_8029F1CC:
/* 8029F1CC 00294F4C  38 61 00 08 */	addi r3, r1, 8
/* 8029F1D0 00294F50  48 15 14 71 */	bl strlen
/* 8029F1D4 00294F54  20 63 00 FE */	subfic r3, r3, 0xfe
lbl_8029F1D8:
/* 8029F1D8 00294F58  7C 9C D8 2E */	lwzx r4, r28, r27
/* 8029F1DC 00294F5C  7C 65 1B 78 */	mr r5, r3
/* 8029F1E0 00294F60  38 61 00 08 */	addi r3, r1, 8
/* 8029F1E4 00294F64  48 15 B1 CD */	bl strncat
/* 8029F1E8 00294F68  38 61 00 08 */	addi r3, r1, 8
/* 8029F1EC 00294F6C  4B FD DB 19 */	bl hkErrorMessage
lbl_8029F1F0:
/* 8029F1F0 00294F70  38 72 00 01 */	addi r3, r18, 1
/* 8029F1F4 00294F74  38 80 00 2E */	li r4, 0x2e
/* 8029F1F8 00294F78  4B FF FE A1 */	bl findChar
/* 8029F1FC 00294F7C  2C 03 00 00 */	cmpwi r3, 0
/* 8029F200 00294F80  40 82 00 18 */	bne lbl_8029F218
/* 8029F204 00294F84  3C 60 80 41 */	lis r3, lbl_8040FA10@ha
/* 8029F208 00294F88  38 63 FA 10 */	addi r3, r3, lbl_8040FA10@l
/* 8029F20C 00294F8C  4B FD DA F9 */	bl hkErrorMessage
/* 8029F210 00294F90  38 60 00 00 */	li r3, 0
/* 8029F214 00294F94  48 00 01 0C */	b lbl_8029F320
lbl_8029F218:
/* 8029F218 00294F98  2C 17 00 00 */	cmpwi r23, 0
/* 8029F21C 00294F9C  38 83 00 01 */	addi r4, r3, 1
/* 8029F220 00294FA0  41 82 00 78 */	beq lbl_8029F298
/* 8029F224 00294FA4  7F 33 B2 78 */	xor r19, r25, r22
/* 8029F228 00294FA8  48 00 19 61 */	bl hkSolverGetSystemTime
/* 8029F22C 00294FAC  7E 65 FE 70 */	srawi r5, r19, 0x1f
/* 8029F230 00294FB0  7C 13 20 10 */	subfc r0, r19, r4
/* 8029F234 00294FB4  7C 05 19 10 */	subfe r0, r5, r3
/* 8029F238 00294FB8  7C 04 21 10 */	subfe r0, r4, r4
/* 8029F23C 00294FBC  7C 00 00 D1 */	neg. r0, r0
/* 8029F240 00294FC0  41 82 00 C0 */	beq lbl_8029F300
/* 8029F244 00294FC4  7E 65 FE 70 */	srawi r5, r19, 0x1f
/* 8029F248 00294FC8  38 1F A5 AD */	addi r0, r31, -23123
/* 8029F24C 00294FCC  7C 84 98 10 */	subfc r4, r4, r19
/* 8029F250 00294FD0  7C 63 29 10 */	subfe r3, r3, r5
/* 8029F254 00294FD4  7C 00 20 10 */	subfc r0, r0, r4
/* 8029F258 00294FD8  7C 1E 19 10 */	subfe r0, r30, r3
/* 8029F25C 00294FDC  7C 04 21 10 */	subfe r0, r4, r4
/* 8029F260 00294FE0  7C 00 00 D1 */	neg. r0, r0
/* 8029F264 00294FE4  41 82 00 9C */	beq lbl_8029F300
/* 8029F268 00294FE8  2C 14 00 00 */	cmpwi r20, 0
/* 8029F26C 00294FEC  41 82 00 24 */	beq lbl_8029F290
/* 8029F270 00294FF0  2C 15 00 02 */	cmpwi r21, 2
/* 8029F274 00294FF4  40 82 00 1C */	bne lbl_8029F290
/* 8029F278 00294FF8  3C 60 80 41 */	lis r3, lbl_8040FA10@ha
/* 8029F27C 00294FFC  38 63 FA 10 */	addi r3, r3, lbl_8040FA10@l
/* 8029F280 00295000  38 63 00 BC */	addi r3, r3, 0xbc
/* 8029F284 00295004  4B FD DA 81 */	bl hkErrorMessage
/* 8029F288 00295008  38 60 00 00 */	li r3, 0
/* 8029F28C 0029500C  48 00 00 94 */	b lbl_8029F320
lbl_8029F290:
/* 8029F290 00295010  38 60 00 01 */	li r3, 1
/* 8029F294 00295014  48 00 00 8C */	b lbl_8029F320
lbl_8029F298:
/* 8029F298 00295018  38 A0 00 00 */	li r5, 0
/* 8029F29C 0029501C  48 00 00 14 */	b lbl_8029F2B0
lbl_8029F2A0:
/* 8029F2A0 00295020  88 64 00 00 */	lbz r3, 0(r4)
/* 8029F2A4 00295024  1C 05 00 17 */	mulli r0, r5, 0x17
/* 8029F2A8 00295028  7C 63 07 74 */	extsb r3, r3
/* 8029F2AC 0029502C  7C A3 02 14 */	add r5, r3, r0
lbl_8029F2B0:
/* 8029F2B0 00295030  88 04 00 00 */	lbz r0, 0(r4)
/* 8029F2B4 00295034  38 84 00 01 */	addi r4, r4, 1
/* 8029F2B8 00295038  7C 00 07 75 */	extsb. r0, r0
/* 8029F2BC 0029503C  40 82 FF E4 */	bne lbl_8029F2A0
/* 8029F2C0 00295040  7C A5 B2 78 */	xor r5, r5, r22
/* 8029F2C4 00295044  54 A0 00 7E */	clrlwi r0, r5, 1
/* 8029F2C8 00295048  7C 18 00 40 */	cmplw r24, r0
/* 8029F2CC 0029504C  40 82 00 34 */	bne lbl_8029F300
/* 8029F2D0 00295050  2C 14 00 00 */	cmpwi r20, 0
/* 8029F2D4 00295054  41 82 00 24 */	beq lbl_8029F2F8
/* 8029F2D8 00295058  2C 15 00 02 */	cmpwi r21, 2
/* 8029F2DC 0029505C  40 82 00 1C */	bne lbl_8029F2F8
/* 8029F2E0 00295060  3C 60 80 41 */	lis r3, lbl_8040FA10@ha
/* 8029F2E4 00295064  38 63 FA 10 */	addi r3, r3, lbl_8040FA10@l
/* 8029F2E8 00295068  38 63 00 BC */	addi r3, r3, 0xbc
/* 8029F2EC 0029506C  4B FD DA 19 */	bl hkErrorMessage
/* 8029F2F0 00295070  38 60 00 00 */	li r3, 0
/* 8029F2F4 00295074  48 00 00 2C */	b lbl_8029F320
lbl_8029F2F8:
/* 8029F2F8 00295078  38 60 00 01 */	li r3, 1
/* 8029F2FC 0029507C  48 00 00 24 */	b lbl_8029F320
lbl_8029F300:
/* 8029F300 00295080  3A B5 00 01 */	addi r21, r21, 1
/* 8029F304 00295084  3B 5A 00 04 */	addi r26, r26, 4
/* 8029F308 00295088  2C 15 00 03 */	cmpwi r21, 3
/* 8029F30C 0029508C  41 80 FE 04 */	blt lbl_8029F110
/* 8029F310 00295090  3C 60 80 41 */	lis r3, lbl_8040FA10@ha
/* 8029F314 00295094  38 63 FA 10 */	addi r3, r3, lbl_8040FA10@l
/* 8029F318 00295098  4B FD D9 ED */	bl hkErrorMessage
/* 8029F31C 0029509C  38 60 00 00 */	li r3, 0
lbl_8029F320:
/* 8029F320 002950A0  BA 21 01 14 */	lmw r17, 0x114(r1)
/* 8029F324 002950A4  80 01 01 54 */	lwz r0, 0x154(r1)
/* 8029F328 002950A8  7C 08 03 A6 */	mtlr r0
/* 8029F32C 002950AC  38 21 01 50 */	addi r1, r1, 0x150
/* 8029F330 002950B0  4E 80 00 20 */	blr 

