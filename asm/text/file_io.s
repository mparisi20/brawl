.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global fclose
fclose:
/* 803F5898 003EB618  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 803F589C 003EB61C  7C 08 02 A6 */	mflr r0
/* 803F58A0 003EB620  2C 03 00 00 */	cmpwi r3, 0
/* 803F58A4 003EB624  90 01 00 24 */	stw r0, 0x24(r1)
/* 803F58A8 003EB628  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 803F58AC 003EB62C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 803F58B0 003EB630  93 A1 00 14 */	stw r29, 0x14(r1)
/* 803F58B4 003EB634  7C 7D 1B 78 */	mr r29, r3
/* 803F58B8 003EB638  40 82 00 0C */	bne lbl_803F58C4
/* 803F58BC 003EB63C  38 60 FF FF */	li r3, -1
/* 803F58C0 003EB640  48 00 00 78 */	b lbl_803F5938
lbl_803F58C4:
/* 803F58C4 003EB644  80 03 00 04 */	lwz r0, 4(r3)
/* 803F58C8 003EB648  54 00 57 7F */	rlwinm. r0, r0, 0xa, 0x1d, 0x1f
/* 803F58CC 003EB64C  40 82 00 0C */	bne lbl_803F58D8
/* 803F58D0 003EB650  38 60 00 00 */	li r3, 0
/* 803F58D4 003EB654  48 00 00 64 */	b lbl_803F5938
lbl_803F58D8:
/* 803F58D8 003EB658  48 00 00 7D */	bl fflush
/* 803F58DC 003EB65C  81 9D 00 44 */	lwz r12, 0x44(r29)
/* 803F58E0 003EB660  7C 7E 1B 78 */	mr r30, r3
/* 803F58E4 003EB664  80 7D 00 00 */	lwz r3, 0(r29)
/* 803F58E8 003EB668  7D 89 03 A6 */	mtctr r12
/* 803F58EC 003EB66C  4E 80 04 21 */	bctrl 
/* 803F58F0 003EB670  80 1D 00 08 */	lwz r0, 8(r29)
/* 803F58F4 003EB674  38 A0 00 00 */	li r5, 0
/* 803F58F8 003EB678  80 9D 00 04 */	lwz r4, 4(r29)
/* 803F58FC 003EB67C  7C 7F 1B 78 */	mr r31, r3
/* 803F5900 003EB680  54 00 27 FF */	rlwinm. r0, r0, 4, 0x1f, 0x1f
/* 803F5904 003EB684  90 BD 00 00 */	stw r5, 0(r29)
/* 803F5908 003EB688  54 84 02 8C */	rlwinm r4, r4, 0, 0xa, 6
/* 803F590C 003EB68C  90 9D 00 04 */	stw r4, 4(r29)
/* 803F5910 003EB690  41 82 00 0C */	beq lbl_803F591C
/* 803F5914 003EB694  80 7D 00 1C */	lwz r3, 0x1c(r29)
/* 803F5918 003EB698  4B FF DB 15 */	bl free
lbl_803F591C:
/* 803F591C 003EB69C  2C 1E 00 00 */	cmpwi r30, 0
/* 803F5920 003EB6A0  38 00 00 00 */	li r0, 0
/* 803F5924 003EB6A4  40 82 00 0C */	bne lbl_803F5930
/* 803F5928 003EB6A8  2C 1F 00 00 */	cmpwi r31, 0
/* 803F592C 003EB6AC  41 82 00 08 */	beq lbl_803F5934
lbl_803F5930:
/* 803F5930 003EB6B0  38 00 00 01 */	li r0, 1
lbl_803F5934:
/* 803F5934 003EB6B4  7C 60 00 D0 */	neg r3, r0
lbl_803F5938:
/* 803F5938 003EB6B8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 803F593C 003EB6BC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 803F5940 003EB6C0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 803F5944 003EB6C4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 803F5948 003EB6C8  7C 08 03 A6 */	mtlr r0
/* 803F594C 003EB6CC  38 21 00 20 */	addi r1, r1, 0x20
/* 803F5950 003EB6D0  4E 80 00 20 */	blr 

.global fflush
fflush:
/* 803F5954 003EB6D4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803F5958 003EB6D8  7C 08 02 A6 */	mflr r0
/* 803F595C 003EB6DC  2C 03 00 00 */	cmpwi r3, 0
/* 803F5960 003EB6E0  90 01 00 14 */	stw r0, 0x14(r1)
/* 803F5964 003EB6E4  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803F5968 003EB6E8  7C 7F 1B 78 */	mr r31, r3
/* 803F596C 003EB6EC  93 C1 00 08 */	stw r30, 8(r1)
/* 803F5970 003EB6F0  40 82 00 0C */	bne lbl_803F597C
/* 803F5974 003EB6F4  4B FF DD 11 */	bl __flush_all
/* 803F5978 003EB6F8  48 00 00 F8 */	b lbl_803F5A70
lbl_803F597C:
/* 803F597C 003EB6FC  88 03 00 0A */	lbz r0, 0xa(r3)
/* 803F5980 003EB700  2C 00 00 00 */	cmpwi r0, 0
/* 803F5984 003EB704  40 82 00 10 */	bne lbl_803F5994
/* 803F5988 003EB708  80 83 00 04 */	lwz r4, 4(r3)
/* 803F598C 003EB70C  54 80 57 7F */	rlwinm. r0, r4, 0xa, 0x1d, 0x1f
/* 803F5990 003EB710  40 82 00 0C */	bne lbl_803F599C
lbl_803F5994:
/* 803F5994 003EB714  38 60 FF FF */	li r3, -1
/* 803F5998 003EB718  48 00 00 D8 */	b lbl_803F5A70
lbl_803F599C:
/* 803F599C 003EB71C  54 80 2F 7E */	rlwinm r0, r4, 5, 0x1d, 0x1f
/* 803F59A0 003EB720  28 00 00 01 */	cmplwi r0, 1
/* 803F59A4 003EB724  40 82 00 0C */	bne lbl_803F59B0
/* 803F59A8 003EB728  38 60 00 00 */	li r3, 0
/* 803F59AC 003EB72C  48 00 00 C4 */	b lbl_803F5A70
lbl_803F59B0:
/* 803F59B0 003EB730  80 83 00 08 */	lwz r4, 8(r3)
/* 803F59B4 003EB734  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 803F59B8 003EB738  28 00 00 03 */	cmplwi r0, 3
/* 803F59BC 003EB73C  41 80 00 10 */	blt lbl_803F59CC
/* 803F59C0 003EB740  38 00 00 02 */	li r0, 2
/* 803F59C4 003EB744  50 04 E8 04 */	rlwimi r4, r0, 0x1d, 0, 2
/* 803F59C8 003EB748  90 83 00 08 */	stw r4, 8(r3)
lbl_803F59CC:
/* 803F59CC 003EB74C  80 03 00 08 */	lwz r0, 8(r3)
/* 803F59D0 003EB750  54 00 1F 7E */	srwi r0, r0, 0x1d
/* 803F59D4 003EB754  28 00 00 02 */	cmplwi r0, 2
/* 803F59D8 003EB758  40 82 00 0C */	bne lbl_803F59E4
/* 803F59DC 003EB75C  38 00 00 00 */	li r0, 0
/* 803F59E0 003EB760  90 03 00 28 */	stw r0, 0x28(r3)
lbl_803F59E4:
/* 803F59E4 003EB764  80 83 00 08 */	lwz r4, 8(r3)
/* 803F59E8 003EB768  54 80 1F 7E */	srwi r0, r4, 0x1d
/* 803F59EC 003EB76C  28 00 00 01 */	cmplwi r0, 1
/* 803F59F0 003EB770  41 82 00 14 */	beq lbl_803F5A04
/* 803F59F4 003EB774  54 80 00 FE */	clrlwi r0, r4, 3
/* 803F59F8 003EB778  90 03 00 08 */	stw r0, 8(r3)
/* 803F59FC 003EB77C  38 60 00 00 */	li r3, 0
/* 803F5A00 003EB780  48 00 00 70 */	b lbl_803F5A70
lbl_803F5A04:
/* 803F5A04 003EB784  80 03 00 04 */	lwz r0, 4(r3)
/* 803F5A08 003EB788  54 00 57 7E */	rlwinm r0, r0, 0xa, 0x1d, 0x1f
/* 803F5A0C 003EB78C  28 00 00 01 */	cmplwi r0, 1
/* 803F5A10 003EB790  41 82 00 0C */	beq lbl_803F5A1C
/* 803F5A14 003EB794  3B C0 00 00 */	li r30, 0
/* 803F5A18 003EB798  48 00 00 10 */	b lbl_803F5A28
lbl_803F5A1C:
/* 803F5A1C 003EB79C  7F E3 FB 78 */	mr r3, r31
/* 803F5A20 003EB7A0  48 00 02 C1 */	bl ftell
/* 803F5A24 003EB7A4  7C 7E 1B 78 */	mr r30, r3
lbl_803F5A28:
/* 803F5A28 003EB7A8  7F E3 FB 78 */	mr r3, r31
/* 803F5A2C 003EB7AC  38 80 00 00 */	li r4, 0
/* 803F5A30 003EB7B0  4B FF F7 65 */	bl __flush_buffer
/* 803F5A34 003EB7B4  2C 03 00 00 */	cmpwi r3, 0
/* 803F5A38 003EB7B8  41 82 00 1C */	beq lbl_803F5A54
/* 803F5A3C 003EB7BC  38 60 00 01 */	li r3, 1
/* 803F5A40 003EB7C0  38 00 00 00 */	li r0, 0
/* 803F5A44 003EB7C4  98 7F 00 0A */	stb r3, 0xa(r31)
/* 803F5A48 003EB7C8  38 60 FF FF */	li r3, -1
/* 803F5A4C 003EB7CC  90 1F 00 28 */	stw r0, 0x28(r31)
/* 803F5A50 003EB7D0  48 00 00 20 */	b lbl_803F5A70
lbl_803F5A54:
/* 803F5A54 003EB7D4  80 1F 00 08 */	lwz r0, 8(r31)
/* 803F5A58 003EB7D8  38 80 00 00 */	li r4, 0
/* 803F5A5C 003EB7DC  93 DF 00 18 */	stw r30, 0x18(r31)
/* 803F5A60 003EB7E0  38 60 00 00 */	li r3, 0
/* 803F5A64 003EB7E4  54 00 00 FE */	clrlwi r0, r0, 3
/* 803F5A68 003EB7E8  90 1F 00 08 */	stw r0, 8(r31)
/* 803F5A6C 003EB7EC  90 9F 00 28 */	stw r4, 0x28(r31)
lbl_803F5A70:
/* 803F5A70 003EB7F0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803F5A74 003EB7F4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803F5A78 003EB7F8  83 C1 00 08 */	lwz r30, 8(r1)
/* 803F5A7C 003EB7FC  7C 08 03 A6 */	mtlr r0
/* 803F5A80 003EB800  38 21 00 10 */	addi r1, r1, 0x10
/* 803F5A84 003EB804  4E 80 00 20 */	blr 

.global __msl_strnicmp
__msl_strnicmp:
/* 803F5A88 003EB808  3C C0 80 49 */	lis r6, lbl_804942B8@ha
/* 803F5A8C 003EB80C  38 C6 42 B8 */	addi r6, r6, lbl_804942B8@l
/* 803F5A90 003EB810  80 C6 00 38 */	lwz r6, 0x38(r6)
/* 803F5A94 003EB814  7C A9 03 A6 */	mtctr r5
/* 803F5A98 003EB818  2C 05 00 00 */	cmpwi r5, 0
/* 803F5A9C 003EB81C  40 81 00 A4 */	ble lbl_803F5B40
lbl_803F5AA0:
/* 803F5AA0 003EB820  88 A3 00 00 */	lbz r5, 0(r3)
/* 803F5AA4 003EB824  38 00 00 00 */	li r0, 0
/* 803F5AA8 003EB828  38 63 00 01 */	addi r3, r3, 1
/* 803F5AAC 003EB82C  7C A7 07 75 */	extsb. r7, r5
/* 803F5AB0 003EB830  41 80 00 0C */	blt lbl_803F5ABC
/* 803F5AB4 003EB834  2C 07 01 00 */	cmpwi r7, 0x100
/* 803F5AB8 003EB838  41 80 00 08 */	blt lbl_803F5AC0
lbl_803F5ABC:
/* 803F5ABC 003EB83C  38 00 00 01 */	li r0, 1
lbl_803F5AC0:
/* 803F5AC0 003EB840  2C 00 00 00 */	cmpwi r0, 0
/* 803F5AC4 003EB844  41 82 00 08 */	beq lbl_803F5ACC
/* 803F5AC8 003EB848  48 00 00 0C */	b lbl_803F5AD4
lbl_803F5ACC:
/* 803F5ACC 003EB84C  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 803F5AD0 003EB850  7C E5 38 AE */	lbzx r7, r5, r7
lbl_803F5AD4:
/* 803F5AD4 003EB854  88 A4 00 00 */	lbz r5, 0(r4)
/* 803F5AD8 003EB858  7C E8 07 74 */	extsb r8, r7
/* 803F5ADC 003EB85C  38 00 00 00 */	li r0, 0
/* 803F5AE0 003EB860  38 84 00 01 */	addi r4, r4, 1
/* 803F5AE4 003EB864  7C A7 07 75 */	extsb. r7, r5
/* 803F5AE8 003EB868  41 80 00 0C */	blt lbl_803F5AF4
/* 803F5AEC 003EB86C  2C 07 01 00 */	cmpwi r7, 0x100
/* 803F5AF0 003EB870  41 80 00 08 */	blt lbl_803F5AF8
lbl_803F5AF4:
/* 803F5AF4 003EB874  38 00 00 01 */	li r0, 1
lbl_803F5AF8:
/* 803F5AF8 003EB878  2C 00 00 00 */	cmpwi r0, 0
/* 803F5AFC 003EB87C  41 82 00 08 */	beq lbl_803F5B04
/* 803F5B00 003EB880  48 00 00 0C */	b lbl_803F5B0C
lbl_803F5B04:
/* 803F5B04 003EB884  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 803F5B08 003EB888  7C E5 38 AE */	lbzx r7, r5, r7
lbl_803F5B0C:
/* 803F5B0C 003EB88C  7C E0 07 74 */	extsb r0, r7
/* 803F5B10 003EB890  7C 08 00 00 */	cmpw r8, r0
/* 803F5B14 003EB894  40 80 00 0C */	bge lbl_803F5B20
/* 803F5B18 003EB898  38 60 FF FF */	li r3, -1
/* 803F5B1C 003EB89C  4E 80 00 20 */	blr 
lbl_803F5B20:
/* 803F5B20 003EB8A0  40 81 00 0C */	ble lbl_803F5B2C
/* 803F5B24 003EB8A4  38 60 00 01 */	li r3, 1
/* 803F5B28 003EB8A8  4E 80 00 20 */	blr 
lbl_803F5B2C:
/* 803F5B2C 003EB8AC  2C 08 00 00 */	cmpwi r8, 0
/* 803F5B30 003EB8B0  40 82 00 0C */	bne lbl_803F5B3C
/* 803F5B34 003EB8B4  38 60 00 00 */	li r3, 0
/* 803F5B38 003EB8B8  4E 80 00 20 */	blr 
lbl_803F5B3C:
/* 803F5B3C 003EB8BC  42 00 FF 64 */	bdnz lbl_803F5AA0
lbl_803F5B40:
/* 803F5B40 003EB8C0  38 60 00 00 */	li r3, 0
/* 803F5B44 003EB8C4  4E 80 00 20 */	blr 

.global __msl_itoa
__msl_itoa:
/* 803F5B48 003EB8C8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 803F5B4C 003EB8CC  7C 08 02 A6 */	mflr r0
/* 803F5B50 003EB8D0  2C 03 00 00 */	cmpwi r3, 0
/* 803F5B54 003EB8D4  38 E0 00 00 */	li r7, 0
/* 803F5B58 003EB8D8  90 01 00 14 */	stw r0, 0x14(r1)
/* 803F5B5C 003EB8DC  39 00 00 00 */	li r8, 0
/* 803F5B60 003EB8E0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 803F5B64 003EB8E4  93 C1 00 08 */	stw r30, 8(r1)
/* 803F5B68 003EB8E8  7C 9E 23 78 */	mr r30, r4
/* 803F5B6C 003EB8EC  40 80 00 0C */	bge lbl_803F5B78
/* 803F5B70 003EB8F0  7C 63 00 D0 */	neg r3, r3
/* 803F5B74 003EB8F4  38 E0 00 01 */	li r7, 1
lbl_803F5B78:
/* 803F5B78 003EB8F8  7C 86 23 78 */	mr r6, r4
lbl_803F5B7C:
/* 803F5B7C 003EB8FC  7C 03 2B 96 */	divwu r0, r3, r5
/* 803F5B80 003EB900  7C 00 29 D6 */	mullw r0, r0, r5
/* 803F5B84 003EB904  7D 20 18 50 */	subf r9, r0, r3
/* 803F5B88 003EB908  2C 09 00 09 */	cmpwi r9, 9
/* 803F5B8C 003EB90C  40 81 00 18 */	ble lbl_803F5BA4
/* 803F5B90 003EB910  38 09 00 37 */	addi r0, r9, 0x37
/* 803F5B94 003EB914  39 08 00 01 */	addi r8, r8, 1
/* 803F5B98 003EB918  98 06 00 00 */	stb r0, 0(r6)
/* 803F5B9C 003EB91C  38 C6 00 01 */	addi r6, r6, 1
/* 803F5BA0 003EB920  48 00 00 14 */	b lbl_803F5BB4
lbl_803F5BA4:
/* 803F5BA4 003EB924  38 09 00 30 */	addi r0, r9, 0x30
/* 803F5BA8 003EB928  39 08 00 01 */	addi r8, r8, 1
/* 803F5BAC 003EB92C  98 06 00 00 */	stb r0, 0(r6)
/* 803F5BB0 003EB930  38 C6 00 01 */	addi r6, r6, 1
lbl_803F5BB4:
/* 803F5BB4 003EB934  7C 63 2B 97 */	divwu. r3, r3, r5
/* 803F5BB8 003EB938  40 82 FF C4 */	bne lbl_803F5B7C
/* 803F5BBC 003EB93C  2C 07 00 00 */	cmpwi r7, 0
/* 803F5BC0 003EB940  41 82 00 10 */	beq lbl_803F5BD0
/* 803F5BC4 003EB944  38 00 00 2D */	li r0, 0x2d
/* 803F5BC8 003EB948  7C 04 41 AE */	stbx r0, r4, r8
/* 803F5BCC 003EB94C  39 08 00 01 */	addi r8, r8, 1
lbl_803F5BD0:
/* 803F5BD0 003EB950  38 00 00 00 */	li r0, 0
/* 803F5BD4 003EB954  7F C3 F3 78 */	mr r3, r30
/* 803F5BD8 003EB958  7C 04 41 AE */	stbx r0, r4, r8
/* 803F5BDC 003EB95C  3B E0 00 00 */	li r31, 0
/* 803F5BE0 003EB960  4B FF AA 61 */	bl strlen
/* 803F5BE4 003EB964  38 C3 FF FF */	addi r6, r3, -1
/* 803F5BE8 003EB968  7F C3 F3 78 */	mr r3, r30
/* 803F5BEC 003EB96C  7C 9E 32 14 */	add r4, r30, r6
/* 803F5BF0 003EB970  48 00 00 24 */	b lbl_803F5C14
lbl_803F5BF4:
/* 803F5BF4 003EB974  88 A3 00 00 */	lbz r5, 0(r3)
/* 803F5BF8 003EB978  3B FF 00 01 */	addi r31, r31, 1
/* 803F5BFC 003EB97C  88 04 00 00 */	lbz r0, 0(r4)
/* 803F5C00 003EB980  38 C6 FF FF */	addi r6, r6, -1
/* 803F5C04 003EB984  98 03 00 00 */	stb r0, 0(r3)
/* 803F5C08 003EB988  38 63 00 01 */	addi r3, r3, 1
/* 803F5C0C 003EB98C  98 A4 00 00 */	stb r5, 0(r4)
/* 803F5C10 003EB990  38 84 FF FF */	addi r4, r4, -1
lbl_803F5C14:
/* 803F5C14 003EB994  7C 1F 30 00 */	cmpw r31, r6
/* 803F5C18 003EB998  41 80 FF DC */	blt lbl_803F5BF4
/* 803F5C1C 003EB99C  7F C3 F3 78 */	mr r3, r30
/* 803F5C20 003EB9A0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 803F5C24 003EB9A4  83 C1 00 08 */	lwz r30, 8(r1)
/* 803F5C28 003EB9A8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 803F5C2C 003EB9AC  7C 08 03 A6 */	mtlr r0
/* 803F5C30 003EB9B0  38 21 00 10 */	addi r1, r1, 0x10
/* 803F5C34 003EB9B4  4E 80 00 20 */	blr 

