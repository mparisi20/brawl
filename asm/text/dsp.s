.include "macros.inc"

.section .text, "ax"  # 0x8000C860 - 0x804064E0

.global DSPCheckMailToDSP
DSPCheckMailToDSP:
/* 8020981C 001FF59C  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 80209820 001FF5A0  A0 03 50 00 */	lhz r0, 0xCC005000@l(r3)
/* 80209824 001FF5A4  54 03 8F FE */	rlwinm r3, r0, 0x11, 0x1f, 0x1f
/* 80209828 001FF5A8  4E 80 00 20 */	blr 

.global DSPCheckMailFromDSP
DSPCheckMailFromDSP:
/* 8020982C 001FF5AC  3C 60 CC 00 */	lis r3, 0xCC005004@ha
/* 80209830 001FF5B0  A0 03 50 04 */	lhz r0, 0xCC005004@l(r3)
/* 80209834 001FF5B4  54 03 8F FE */	rlwinm r3, r0, 0x11, 0x1f, 0x1f
/* 80209838 001FF5B8  4E 80 00 20 */	blr 

.global DSPReadMailFromDSP
DSPReadMailFromDSP:
/* 8020983C 001FF5BC  3C 60 CC 00 */	lis r3, 0xCC005004@ha
/* 80209840 001FF5C0  A0 03 50 04 */	lhz r0, 0xCC005004@l(r3)
/* 80209844 001FF5C4  A0 63 50 06 */	lhz r3, 0x5006(r3)
/* 80209848 001FF5C8  50 03 80 1E */	rlwimi r3, r0, 0x10, 0, 0xf
/* 8020984C 001FF5CC  4E 80 00 20 */	blr 

.global DSPSendMailToDSP
DSPSendMailToDSP:
/* 80209850 001FF5D0  3C 80 CC 00 */	lis r4, 0xCC005000@ha
/* 80209854 001FF5D4  54 60 84 3E */	srwi r0, r3, 0x10
/* 80209858 001FF5D8  B0 04 50 00 */	sth r0, 0xCC005000@l(r4)
/* 8020985C 001FF5DC  B0 64 50 02 */	sth r3, 0x5002(r4)
/* 80209860 001FF5E0  4E 80 00 20 */	blr 

.global DSPInit
DSPInit:
/* 80209864 001FF5E4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80209868 001FF5E8  7C 08 02 A6 */	mflr r0
/* 8020986C 001FF5EC  3C A0 80 48 */	lis r5, lbl_8047BE70@ha
/* 80209870 001FF5F0  90 01 00 14 */	stw r0, 0x14(r1)
/* 80209874 001FF5F4  38 A5 BE 70 */	addi r5, r5, lbl_8047BE70@l
/* 80209878 001FF5F8  38 65 00 48 */	addi r3, r5, 0x48
/* 8020987C 001FF5FC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80209880 001FF600  38 85 00 68 */	addi r4, r5, 0x68
/* 80209884 001FF604  38 A5 00 74 */	addi r5, r5, 0x74
/* 80209888 001FF608  4C C6 31 82 */	crclr 6
/* 8020988C 001FF60C  48 00 02 0D */	bl __DSP_debug_printf
/* 80209890 001FF610  80 0D C7 58 */	lwz r0, lbl_805A0B78-_SDA_BASE_(r13)
/* 80209894 001FF614  2C 00 00 01 */	cmpwi r0, 1
/* 80209898 001FF618  41 82 00 78 */	beq lbl_80209910
/* 8020989C 001FF61C  80 6D A7 08 */	lwz r3, lbl_8059EB28-_SDA_BASE_(r13)
/* 802098A0 001FF620  4B FC CC ED */	bl OSRegisterVersion
/* 802098A4 001FF624  4B FD 36 6D */	bl OSDisableInterrupts
/* 802098A8 001FF628  3C 80 80 21 */	lis r4, __DSPHandler@ha
/* 802098AC 001FF62C  7C 7F 1B 78 */	mr r31, r3
/* 802098B0 001FF630  38 84 9A E8 */	addi r4, r4, __DSPHandler@l
/* 802098B4 001FF634  38 60 00 07 */	li r3, 7
/* 802098B8 001FF638  4B FD 36 A5 */	bl __OSSetInterruptHandler
/* 802098BC 001FF63C  3C 60 01 00 */	lis r3, 0x100
/* 802098C0 001FF640  4B FD 3A 61 */	bl __OSUnmaskInterrupts
/* 802098C4 001FF644  3C E0 CC 00 */	lis r7, 0xCC00500A@ha
/* 802098C8 001FF648  38 60 FF 57 */	li r3, -169
/* 802098CC 001FF64C  A0 C7 50 0A */	lhz r6, 0xCC00500A@l(r7)
/* 802098D0 001FF650  38 A0 FF 53 */	li r5, -173
/* 802098D4 001FF654  38 80 00 00 */	li r4, 0
/* 802098D8 001FF658  38 00 00 01 */	li r0, 1
/* 802098DC 001FF65C  7C C3 18 38 */	and r3, r6, r3
/* 802098E0 001FF660  60 63 08 00 */	ori r3, r3, 0x800
/* 802098E4 001FF664  B0 67 50 0A */	sth r3, 0x500a(r7)
/* 802098E8 001FF668  7F E3 FB 78 */	mr r3, r31
/* 802098EC 001FF66C  A0 C7 50 0A */	lhz r6, 0x500a(r7)
/* 802098F0 001FF670  7C C5 28 38 */	and r5, r6, r5
/* 802098F4 001FF674  B0 A7 50 0A */	sth r5, 0x500a(r7)
/* 802098F8 001FF678  90 8D C7 68 */	stw r4, lbl_805A0B88-_SDA_BASE_(r13)
/* 802098FC 001FF67C  90 8D C7 74 */	stw r4, lbl_805A0B94-_SDA_BASE_(r13)
/* 80209900 001FF680  90 8D C7 6C */	stw r4, lbl_805A0B8C-_SDA_BASE_(r13)
/* 80209904 001FF684  90 8D C7 70 */	stw r4, lbl_805A0B90-_SDA_BASE_(r13)
/* 80209908 001FF688  90 0D C7 58 */	stw r0, lbl_805A0B78-_SDA_BASE_(r13)
/* 8020990C 001FF68C  4B FD 36 2D */	bl OSRestoreInterrupts
lbl_80209910:
/* 80209910 001FF690  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80209914 001FF694  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80209918 001FF698  7C 08 03 A6 */	mtlr r0
/* 8020991C 001FF69C  38 21 00 10 */	addi r1, r1, 0x10
/* 80209920 001FF6A0  4E 80 00 20 */	blr 

.global DSPCheckInit
DSPCheckInit:
/* 80209924 001FF6A4  80 6D C7 58 */	lwz r3, lbl_805A0B78-_SDA_BASE_(r13)
/* 80209928 001FF6A8  4E 80 00 20 */	blr 

.global DSPAddTask
DSPAddTask:
/* 8020992C 001FF6AC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80209930 001FF6B0  7C 08 02 A6 */	mflr r0
/* 80209934 001FF6B4  90 01 00 14 */	stw r0, 0x14(r1)
/* 80209938 001FF6B8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8020993C 001FF6BC  93 C1 00 08 */	stw r30, 8(r1)
/* 80209940 001FF6C0  7C 7E 1B 78 */	mr r30, r3
/* 80209944 001FF6C4  4B FD 35 CD */	bl OSDisableInterrupts
/* 80209948 001FF6C8  7C 7F 1B 78 */	mr r31, r3
/* 8020994C 001FF6CC  7F C3 F3 78 */	mr r3, r30
/* 80209950 001FF6D0  48 00 08 FD */	bl __DSP_insert_task
/* 80209954 001FF6D4  38 60 00 00 */	li r3, 0
/* 80209958 001FF6D8  38 00 00 01 */	li r0, 1
/* 8020995C 001FF6DC  90 7E 00 00 */	stw r3, 0(r30)
/* 80209960 001FF6E0  7F E3 FB 78 */	mr r3, r31
/* 80209964 001FF6E4  90 1E 00 08 */	stw r0, 8(r30)
/* 80209968 001FF6E8  4B FD 35 D1 */	bl OSRestoreInterrupts
/* 8020996C 001FF6EC  80 0D C7 70 */	lwz r0, lbl_805A0B90-_SDA_BASE_(r13)
/* 80209970 001FF6F0  7C 1E 00 40 */	cmplw r30, r0
/* 80209974 001FF6F4  40 82 00 0C */	bne lbl_80209980
/* 80209978 001FF6F8  7F C3 F3 78 */	mr r3, r30
/* 8020997C 001FF6FC  48 00 07 45 */	bl __DSP_boot_task
lbl_80209980:
/* 80209980 001FF700  7F C3 F3 78 */	mr r3, r30
/* 80209984 001FF704  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80209988 001FF708  83 C1 00 08 */	lwz r30, 8(r1)
/* 8020998C 001FF70C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80209990 001FF710  7C 08 03 A6 */	mtlr r0
/* 80209994 001FF714  38 21 00 10 */	addi r1, r1, 0x10
/* 80209998 001FF718  4E 80 00 20 */	blr 

.global DSPCancelTask
DSPCancelTask:
/* 8020999C 001FF71C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802099A0 001FF720  7C 08 02 A6 */	mflr r0
/* 802099A4 001FF724  90 01 00 14 */	stw r0, 0x14(r1)
/* 802099A8 001FF728  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802099AC 001FF72C  7C 7F 1B 78 */	mr r31, r3
/* 802099B0 001FF730  4B FD 35 61 */	bl OSDisableInterrupts
/* 802099B4 001FF734  80 1F 00 08 */	lwz r0, 8(r31)
/* 802099B8 001FF738  60 00 00 02 */	ori r0, r0, 2
/* 802099BC 001FF73C  90 1F 00 08 */	stw r0, 8(r31)
/* 802099C0 001FF740  4B FD 35 79 */	bl OSRestoreInterrupts
/* 802099C4 001FF744  7F E3 FB 78 */	mr r3, r31
/* 802099C8 001FF748  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 802099CC 001FF74C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 802099D0 001FF750  7C 08 03 A6 */	mtlr r0
/* 802099D4 001FF754  38 21 00 10 */	addi r1, r1, 0x10
/* 802099D8 001FF758  4E 80 00 20 */	blr 

.global DSPAssertTask
DSPAssertTask:
/* 802099DC 001FF75C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 802099E0 001FF760  7C 08 02 A6 */	mflr r0
/* 802099E4 001FF764  90 01 00 14 */	stw r0, 0x14(r1)
/* 802099E8 001FF768  93 E1 00 0C */	stw r31, 0xc(r1)
/* 802099EC 001FF76C  93 C1 00 08 */	stw r30, 8(r1)
/* 802099F0 001FF770  7C 7E 1B 78 */	mr r30, r3
/* 802099F4 001FF774  4B FD 35 1D */	bl OSDisableInterrupts
/* 802099F8 001FF778  80 AD C7 74 */	lwz r5, lbl_805A0B94-_SDA_BASE_(r13)
/* 802099FC 001FF77C  7C 7F 1B 78 */	mr r31, r3
/* 80209A00 001FF780  7C 05 F0 40 */	cmplw r5, r30
/* 80209A04 001FF784  40 82 00 1C */	bne lbl_80209A20
/* 80209A08 001FF788  38 00 00 01 */	li r0, 1
/* 80209A0C 001FF78C  93 CD C7 64 */	stw r30, lbl_805A0B84-_SDA_BASE_(r13)
/* 80209A10 001FF790  90 0D C7 60 */	stw r0, lbl_805A0B80-_SDA_BASE_(r13)
/* 80209A14 001FF794  4B FD 35 25 */	bl OSRestoreInterrupts
/* 80209A18 001FF798  7F C3 F3 78 */	mr r3, r30
/* 80209A1C 001FF79C  48 00 00 64 */	b lbl_80209A80
lbl_80209A20:
/* 80209A20 001FF7A0  80 9E 00 04 */	lwz r4, 4(r30)
/* 80209A24 001FF7A4  80 05 00 04 */	lwz r0, 4(r5)
/* 80209A28 001FF7A8  7C 04 00 40 */	cmplw r4, r0
/* 80209A2C 001FF7AC  40 80 00 4C */	bge lbl_80209A78
/* 80209A30 001FF7B0  38 00 00 01 */	li r0, 1
/* 80209A34 001FF7B4  93 CD C7 64 */	stw r30, lbl_805A0B84-_SDA_BASE_(r13)
/* 80209A38 001FF7B8  90 0D C7 60 */	stw r0, lbl_805A0B80-_SDA_BASE_(r13)
/* 80209A3C 001FF7BC  80 05 00 00 */	lwz r0, 0(r5)
/* 80209A40 001FF7C0  28 00 00 01 */	cmplwi r0, 1
/* 80209A44 001FF7C4  40 82 00 24 */	bne lbl_80209A68
/* 80209A48 001FF7C8  4B FD 34 C9 */	bl OSDisableInterrupts
/* 80209A4C 001FF7CC  3C A0 CC 00 */	lis r5, 0xCC00500A@ha
/* 80209A50 001FF7D0  38 00 FF 57 */	li r0, -169
/* 80209A54 001FF7D4  A0 85 50 0A */	lhz r4, 0xCC00500A@l(r5)
/* 80209A58 001FF7D8  7C 80 00 38 */	and r0, r4, r0
/* 80209A5C 001FF7DC  60 00 00 02 */	ori r0, r0, 2
/* 80209A60 001FF7E0  B0 05 50 0A */	sth r0, 0x500a(r5)
/* 80209A64 001FF7E4  4B FD 34 D5 */	bl OSRestoreInterrupts
lbl_80209A68:
/* 80209A68 001FF7E8  7F E3 FB 78 */	mr r3, r31
/* 80209A6C 001FF7EC  4B FD 34 CD */	bl OSRestoreInterrupts
/* 80209A70 001FF7F0  7F C3 F3 78 */	mr r3, r30
/* 80209A74 001FF7F4  48 00 00 0C */	b lbl_80209A80
lbl_80209A78:
/* 80209A78 001FF7F8  4B FD 34 C1 */	bl OSRestoreInterrupts
/* 80209A7C 001FF7FC  38 60 00 00 */	li r3, 0
lbl_80209A80:
/* 80209A80 001FF800  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80209A84 001FF804  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80209A88 001FF808  83 C1 00 08 */	lwz r30, 8(r1)
/* 80209A8C 001FF80C  7C 08 03 A6 */	mtlr r0
/* 80209A90 001FF810  38 21 00 10 */	addi r1, r1, 0x10
/* 80209A94 001FF814  4E 80 00 20 */	blr 

